!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}function a(t,a){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,a){if(t){if("string"==typeof t)return e(t,a);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,a):void 0}}(t))||a&&t&&"number"==typeof t.length){o&&(t=o);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,s=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){s=!0,c=t},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw c}}}}const o=()=>{let t=document.querySelector(".loader");t&&(t.style.display="none")},r=()=>{let t=new URLSearchParams(window.location.search);return t.get("sid")?t.get("sid"):""},n=t=>{let e=t+"=",a=decodeURIComponent(document.cookie).split(";");for(let t=0;t<a.length;t++){let o=a[t];for(;" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""};n("kenzap_api_key"),n("locale")&&n("locale"),(()=>{let t=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,e=window.location.hostname+"/"+r()+"/"+n("locale");e!=n("check")&&(t=0,console.log("refresh")),((t,e,a)=>{let o="";if(a){let t=new Date;t.setTime(t.getTime()+24*a*60*60*1e3),o=";expires="+t.toUTCString()}document.cookie=t+"="+(escape(e)||"")+o+";path=/;domain=.kenzap.cloud"})("check",e,5)})(),n("kenzap_token"),r();const c=t=>{if(console.log(t),isNaN(t.code)){let e=t;try{e=JSON.stringify(e)}catch(t){}let a=new URLSearchParams;return a.append("cmd","report"),a.append("sid",r()),a.append("token",n("kenzap_token")),a.append("data",e),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:a}),void alert("Can not connect to Kenzap Cloud")}if(401===t.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(t.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(t.reason)},i=(t,e)=>{if(document.querySelector(t))for(let a of document.querySelectorAll(t))a.removeEventListener("click",e,!0),a.addEventListener("click",e,!0)};var s="https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com",d="66432108790002",l=function(t){return(""+t).length<2?"0"+t:t},u=function(t,e){var a=0;switch(t){case"checkout":a=4;break;case"account":a=3}var o="",r={grand_total:0,total:0,discount_percent:0,discount_total:0,fee_total:0,tax_total:0,tax_percent:0};return e.forEach((function(t){return r.total+=parseFloat(t.total)})),r.grand_total=r.total,o+='<tr><td colspan="'.concat(a,'"><div class="price" style="margin-top:16px;">').concat(b("Subtotal")," <b>").concat(y(r.total),"</b></div></td></tr>"),config.price.fee_calc&&(r.fee_total=parseFloat(config.price.fee_percent*r.total)/100,r.fee_percent=config.price.fee_percent,o+='<tr><td colspan="'.concat(a,'"><div class="price" >').concat(b(config.price.fee_display)," <b>").concat(y(r.fee_total),"</b></div></td></tr>"),r.grand_total+=r.fee_total),config.price.tax_calc&&(r.tax_total=(r.fee_total+r.total)*parseFloat(config.price.tax_percent)/100,r.tax_percent=config.price.tax_percent,o+='<tr><td colspan="'.concat(a,'"><div class="price ">').concat(config.price.tax_display," <b>").concat(y(r.tax_total),"</b></div></td></tr>"),r.grand_total+=r.tax_total),r.grand_total=f(r.grand_total),o+='<tr><td colspan="'.concat(a,'"><div class="price " style="font-size:19px;font-weight:700;">').concat(b("Total")," <b>").concat(y(r.grand_total),"</b></div></td></tr>"),{price:r,html:o}},p=function(t){var e={html:null,priced:null};if(e.html='<span class="tag ptag">'+y(t.price)+"</span>",""!=t.priced&&t.priced,t.discounts){var a=!1,o=new Date,r=l(o.getMonth()+1),n=l(o.getDate()),c=l(o.getFullYear());t.discounts.forEach((function(i){switch(i.availability){case"always":a=!0;break;case"weekly":if(!i.dow[o.getDay()-1])break;a=!0;case"hourly":var s=new Date(r+"/"+n+"/"+c+" "+i.hours.from+":00").getTime(),d=new Date(r+"/"+n+"/"+c+" "+i.hours.to+":00").getTime();s>Date.now()/1e3|0>d&&(a=!0)}a&&("percent"==i.type?e.priced=v(t.price)*((100-i.percent)/100):"value"==i.type&&(e.priced=i.value),e.html='<span class="ptagc">'.concat(y(t.price),'</span> <span class="tag ptag">').concat(y(e.priced),"</span>"),i.note&&(e.html+='<div class="pricenote">'.concat(i.note,"</div>")))}))}return e},m=function(t){for(var e=t+"=",a=decodeURIComponent(document.cookie).split(";"),o=0;o<a.length;o++){for(var r=a[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},f=function(t){return t=v(t),(Math.round(100*parseFloat(t))/100).toFixed(2)},y=function(t){t=v(t);var e=f(t);switch(config.price.style){case"left":e=config.price.symbol+e;break;case"right":e+=config.price.symbol}return e},v=function(t){return t=""==t?0:t},g=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz".split("");"number"!=typeof t&&(t=Math.floor(Math.random()*e.length_));for(var a="",o=0;o<t;o++)a+=e[Math.floor(Math.random()*e.length)];return a},h=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},w=function(){window.navigator&&window.navigator.vibrate&&navigator.vibrate(20)},k=function(t){var e=document.querySelector(".kUNwHA .snackbar");e.innerHTML=t,e.classList.add("show"),setTimeout((function(){e.className=e.className.replace("show","")}),2200)},b=function(t){for(var e=function(t,e){return e.forEach((function(e,a){t=t.replace("%"+(a+1)+"$",e)})),t},a=arguments.length,o=new Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];return void 0===i18n.state.locale.values[t]?e(t,o):e(i18n.state.locale.values[t],o)},S=function(t,e){switch(e){case"new":case"paid":return'<div class="badge btn-warning text-dark fw-light">'+t("New")+"</div>";case"processing":return'<div class="badge btn-warning text-dark fw-light">'+t("Cooking")+"</div>";case"completed":return'<div class="badge btn-success text-dark fw-light">'+t("Served")+"</div>";case"canceled":return'<div class="badge btn-secondary text-dark fw-light">'+t("Canceled")+"</div>";case"refunded":return'<div class="badge btn-secondary text-dark fw-light">'+t("Refunded")+"</div>";case"failed":return'<div class="badge btn-secondary text-dark fw-light">'+t("Failed")+"</div>";default:return'<div class="badge btn-primary text-dark fw-light">'+t("Processing")+"</div>"}},q={state:{total:0,count:0,index:0,product:{variations:[]},order:{step:0}},resetButton:function(){q.state.total=0,q.state.count=0},refreshButton:function(){products[q.state.index].priced=p(products[q.state.index]).priced,q.state.product.qty=parseInt(document.querySelector(".kUNwHA .mdialog .qty").value),q.state.product.price=products[q.state.index].priced?parseFloat(products[q.state.index].priced):parseFloat(products[q.state.index].price),q.state.product.note=document.querySelector(".kUNwHA .mdialog .kp-note textarea").value;var t,e=a(document.querySelectorAll(".kUNwHA .mdialog .kp-check input[type=checkbox]"));try{for(e.s();!(t=e.n()).done;){var o=t.value;o.checked&&(q.state.product.price+=parseFloat(o.dataset.price))}}catch(t){e.e(t)}finally{e.f()}var r,n=a(document.querySelectorAll(".kUNwHA .mdialog .kp-radio input[type=radio]"));try{for(n.s();!(r=n.n()).done;){var c=r.value;c.checked&&(q.state.product.price+=parseFloat(c.dataset.price))}}catch(t){n.e(t)}finally{n.f()}q.state.product.total=parseFloat(q.state.product.price*q.state.product.qty),document.querySelector(".kUNwHA .mdialog .add .price").innerHTML=y(q.state.product.total);var i=!1;for(var s in 0==q.state.product.total&&(i=!0),q.state.product.variations)0==q.state.product.variations[s].allow&&(i=!0);document.querySelector(".kUNwHA .mdialog .kp-add .mbtn .add").style.background="","update"==q.state.product.type&&q.state.product.qty>0&&(document.querySelector(".kUNwHA .mdialog .kp-add .mbtn .cta").innerHTML=b("Update")),"update"==q.state.product.type&&0==q.state.product.qty&&(document.querySelector(".kUNwHA .mdialog .kp-add .mbtn .cta").innerHTML=b("Remove"),document.querySelector(".kUNwHA .mdialog .kp-add .btn .add")&&(document.querySelector(".kUNwHA .mdialog .kp-add .btn .add").style.background="#df1960"),i=!1),"new"==q.state.product.type&&(document.querySelector(".kUNwHA .mdialog .kp-add .mbtn .cta").innerHTML=b("Add")),q.state.product.idd=localStorage.idd,i?document.querySelector(".kUNwHA .mdialog .kp-add .mbtn").classList.add("dis"):document.querySelector(".kUNwHA .mdialog .kp-add .mbtn").classList.remove("dis")},refreshCheckoutButton:function(){var t=0;for(var e in q.state.order.items)t+=parseFloat(q.state.order.items[e].total);q.state.order.total=t,t>0?(document.querySelector("body").classList.add("cbtn"),H(1),document.querySelector(".kUNwHA .cta-btn .price").innerHTML=y(t)):(document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=b("cart empty"),document.querySelector("body").classList.remove("cbtn"))},addToCart:function(){q.state.order.items=q.state.order.items.filter((function(t){return t.id!=q.state.product.id})),q.state.order.items.push(q.state.product),0==q.state.product.qty?q.removeFromCart(q.state.product.id):document.querySelector(".kUNwHA .kenzap-row[data-id='"+q.state.product.id+"'] .ctag").innerHTML=q.state.product.qty,localStorage.cart=JSON.stringify(q.state.order),q.refreshCheckoutButton()},removeFromCart:function(t){q.state.order.items=q.state.order.items.filter((function(e){return e.id!=t})),delete q.state.order.items[t],document.querySelector(".kUNwHA .kenzap-row[data-id='"+t+"'] .ctag").innerHTML="",localStorage.cart=JSON.stringify(q.state.order)},clearCart:function(){for(var t in q.state.order.items)document.querySelector(".kUNwHA .kenzap-row[data-id='"+q.state.order.items[t].id+"'] .ctag").innerHTML="";q.state.order={},q.state.order.created=Math.floor(Date.now()/1e3),q.state.order.items=[],localStorage.cart=JSON.stringify(q.state.order),q.refreshCheckoutButton(),window.history.replaceState({pageID:"feed"},"Feed",window.location.pathname+window.location.search)}},A=function(t,e){var a="";for(var o in e.variations){var r="";for(var n in e.variations[o].list)r+=e.variations[o].list[n].title+" ";a+='<div class="vars" ><b>'+e.variations[o].title+"</b> <span>"+r+"</span></div> ",void 0!==e.variations[o].note&&e.variations[o].note.length>0&&(a+="<div><b>"+b("Note")+"</b> "+e.variations[o].note+"</div> ")}return'<tr><td data-id="'+e.id+'" data-title="'+b(e.title)+'" class="checkt"><div>'+b(e.title)+"</div><div>"+a+'</div></td><td class="qty">'+e.qty+'</td><td class="price"><strong>'+y(e.price)+"</strong></td></tr>"},H=function(t){switch(document.querySelector(".kUNwHA .cta-btn").style.display="flex",t){case 1:q.state.step=t,document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=b("Cart")+' <span class="price">s$0.00</span>';break;case 2:q.state.step=t,document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=b("Continue");break;case 3:q.state.step=t,document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=b("Checkout");break;case 4:q.state.step=t,document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=b("Back to menu")}},N={state:0,last_state:0,state_prev:0,fp:0,el_id:"",direction:"",offsets:{},timer:null},U=function(){document.querySelector("body").classList.contains("kp-modal")&&(document.querySelector("body").style.height="100vh",document.querySelector("body").style.overflowY="hidden",document.querySelector(".kUNwHA .scrollable").style.height="100vh",document.querySelector(".kUNwHA .scrollable").style.overflowY="hidden",document.querySelector(".kUNwHA .mdialog-cnt").style.height=window.screen.availHeight-160+"px")},L=function(){document.querySelector(".kUNwHA .mdialog-cnt").style.display="none",document.querySelector(".kUNwHA .overlay").style.display="none",document.querySelector(".kUNwHA .scrollable").style.height="auto",document.querySelector(".kUNwHA .scrollable").style.overflowY="scroll",document.querySelector("body").style.overflowY="auto",document.querySelector("body").style.height="auto",setTimeout((function(){document.querySelector("body").classList.remove("kp-modal")}),300),document.documentElement.scrollTop=N.last_state,document.querySelector(".kUNwHA .cdialog-cnt").style.display="none",q.refreshCheckoutButton(),document.querySelector(".kUNwHA .cta-btn").style.display="flex",-1!=window.location.href.indexOf("#editing")&&history.pushState({pageID:"feed"},"Feed",window.location.pathname+window.location.search)},_=function(t){var e=document.querySelector(".kUNwHA .cdialog-cnt");e.style.display="block",document.querySelector(".kUNwHA .overlay").style.display="block",document.querySelector(".kUNwHA .cta-btn").style.display="none",document.querySelector("body").classList.add("kp-modal"),history.pushState({pageID:"feed"},"Feed",window.location.pathname+window.location.search+"#account"),U();var a='\n        <div class="account">\n            <h3 class="class-waiter"><svg xmlns="http://www.w3.org/2000/svg" class="bell" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n            <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"></path>\n            </svg>'.concat(b("Call waiter"),' <span class="statusLast"></span></h3>\n            <p>').concat(b("You can track your order from the table below or click on the bell to call waiter."),'</p>\n            <div class="lottie-cont dn"></div>\n            ');"new"==t&&(a='\n            <div class="account">\n                <h3 class="class-waiter"><svg xmlns="http://www.w3.org/2000/svg" class="bell" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"></path>\n                </svg>'.concat(b("Call waiter"),' <span class="statusLast"></span></h3>\n                <p>').concat(b("Thank you for placing your order. You can track your order from the table below or click on the bell to call waiter."),'</p>\n                <div class="lottie-cont dn"></div>\n                ')),a+="\n            <h4>".concat(b("Orders"),'</h4>\n            <div class="orders">'),T(a,e),a+="</div>",a+="</div>",e.querySelector(".kUNwHA .cdialog-cnt .kp-body").innerHTML=a,i(".kUNwHA .class-waiter",(function(t){if(confirm(b("Call waiter?"))){document.querySelector(".kUNwHA .bell").classList.add("dn");var e=new URLSearchParams(window.location.search),a=e.get("table")?e.get("table"):"";fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{notify:{type:"notify",key:"ecommerce-message",sid:localStorage.sid,data:{channel:"waiter",idd:localStorage.idd,msg:b("table %1$ is calling!",a),color:"danger"}}}})}).then((function(t){return t.json()})).then((function(t){t.success?k(b("Calling, please wait a moment!")):(document.querySelector(".kUNwHA .bell").classList.remove("dn"),k(b("Oops, please try again")))})).catch((function(t){c(t)}))}}))},T=function(t,e){var r=new URLSearchParams(window.location.search),n=r.get("table")?r.get("table"):"";fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{orders:{type:"get-orders",idd:localStorage.idd,table:n,fields:["id","_id","total","status","items","created"],limit:10,sortby:{field:"created",order:"DESC"}}}})}).then((function(t){return t.json()})).then((function(t){if(o(),t.success){var r=!0,n="cooking",s='<ul class="accordion">';t.orders||(s+="<li>"+b("No orders to display yet")+"</li>");var d,l=a(t.orders);try{for(l.s();!(d=l.n()).done;){var u=d.value;r&&(document.querySelector(".statusLast").innerHTML=S(b,u.status),"completed"==u.status&&(n="serving")),s+=x(r,u),r=!1}}catch(t){l.e(t)}finally{l.f()}switch(n){case"cooking":document.querySelector(".account .lottie-cont").innerHTML='<lottie-player src="https://assets8.lottiefiles.com/packages/lf20_fefIZO.json" background="transparent" speed="1" class="lplayer" style="width: 300px; height: auto;" loop autoplay></lottie-player>';break;case"serving":document.querySelector(".account .lottie-cont").innerHTML='<lottie-player src="https://assets9.lottiefiles.com/packages/lf20_thgy1p9c.json" background="transparent" speed="1" class="lplayer" style="width: 300px; height: auto;" loop autoplay></lottie-player>'}s+="</ul>",e.querySelector(".kUNwHA .orders").innerHTML=s,i(".kUNwHA .accordion .cancel-order",(function(t){if(t.preventDefault(),!confirm(b("Cancel order?")))return!1;var e=t.currentTarget,a=new URLSearchParams(window.location.search),r=a.get("table")?a.get("table"):"-";fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{status:{type:"update-order-status",id:e.dataset._id,status:"canceled",notify:!0,data:{msg:b("table %1$ canceled order #%2$",r,e.dataset.id),idd:localStorage.idd,color:"danger"}}}})}).then((function(t){return t.json()})).then((function(t){o(),t.success&&(e.parentElement.parentElement.querySelector(".badge").innerHTML=b("Canceled"),k(b("Order #"+e.dataset.id+" canceled")),e.remove(),C())})).catch((function(t){c(t)}))})),i(".kUNwHA .accordion .toggle",(function(t){t.preventDefault(),t.currentTarget.classList.contains("active")?(t.currentTarget.classList.remove("active"),t.currentTarget.parentElement.querySelector(".inner").classList.remove("show"),t.currentTarget.parentElement.querySelector(".plusminus").classList.remove("active")):(t.currentTarget.classList.add("active"),t.currentTarget.parentElement.querySelector(".inner").classList.add("show"),t.currentTarget.parentElement.querySelector(".plusminus").classList.add("active"))})),document.querySelector(".kUNwHA .cta-btn").style.display="none"}else k(b("Please make your first order")),C()})).catch((function(t){c(t)}))},x=function(t,e){var a='<li>\n        <a class="toggle '.concat(t?"active":"",' " href="#">\n            #').concat(e.id,' <span class="timago">').concat(function(t,e,a){var o=(e=parseInt(e))-(a=parseInt(a));if(o<60)return t("moments ago");if(o<3600)return parseInt(o/60)+" "+t("minutes ago");if(o<86400)return parseInt(o/60/24)+" "+t("hours ago");var r=new Date(1e3*a),n=[t("Jan"),t("Feb"),t("Mar"),t("Apr"),t("May"),t("Jun"),t("Jul"),t("Aug"),t("Sep"),t("Oct"),t("Nov"),t("Dec")],c=r.getFullYear(),i=n[r.getMonth()],s=r.getDate();return r.getHours(),r.getMinutes(),r.getSeconds(),s+" "+i+" "+c}(b,Date.now()/1e3|0,e.created),"</span> ").concat(S(b,e.status),'<div class="plusminus ').concat(t?"active":"",'"></div>\n        </a>\n        <div class="inner ').concat(t?"show":"",'">\n            <table>\n                <tr><th><div class="me-1 me-sm-3">').concat(b("Product"),'</div></th><th class="qty"><div class="me-1 me-sm-3">').concat(b("Qty"),'</div></th><th class="price"><div class="me-1 me-sm-3">').concat(b("Total"),"</div></th><th></th></tr>");for(var o in e.items)a+=A(0,e.items[o]);return a+=u("account",e.items).html,a+='</table> \n            <div class="tag cancel-order '.concat("true"==config.orders_cancelable?"new"!=e.status?"dn":"":"dn",'" data-id="').concat(e.id,'" data-_id="').concat(e._id,'">').concat(b("Cancel order"),"</div>\n        </div>\n    </li>")},C=function(){document.querySelector(".kUNwHA .mdialog-cnt").style.display="none",document.querySelector(".kUNwHA .overlay").style.display="none",document.querySelector(".kUNwHA .scrollable").style.height="auto",document.querySelector(".kUNwHA .scrollable").style.overflowY="scroll",document.querySelector("body").style.overflowY="auto",document.querySelector("body").style.height="auto",setTimeout((function(){document.querySelector("body").classList.remove("kp-modal")}),300),document.documentElement.scrollTop=scroll.last_state,document.querySelector(".kUNwHA .cdialog-cnt").style.display="none",document.querySelector(".kUNwHA .cta-btn").style.display="flex","undefined"!=typeof cart&&cart.refreshCheckoutButton()},M="";!function(){var t=new URLSearchParams(window.location.search),e="";config.available_locales.forEach((function(t,a){e+='<li data-locale="'.concat(t.locale,'" data-link="').concat(t.link.indexOf("?")?t.link+"&no_picker=1":t.link+"?no_picker=1",'">').concat(t.language_native,"</li>")})),document.querySelector(".lang-post").innerHTML=e,i(".lang-post li",(function(t){window.location.href=t.currentTarget.dataset.link})),(config.available_locales.length<2||t.get("no_picker"))&&document.querySelector(".lang-holder").classList.add("dn");var a={products:{type:"get-products",key:"ecommerce-product",fields:["_id","img","status","price","title","cats","sdesc","ldesc","stock","discounts","variations","updated"],limit:1e3,offset:0,sortby:{field:"created",order:"ASC"}}};fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded","Kenzap-Sid":config.sid},body:JSON.stringify({query:a})}).then((function(t){return t.json()})).then((function(t){t.success?(products=t.products,z(),function(){H(1);try{var t=localStorage.cart;void 0===(t=t?JSON.parse(t):{created:Math.floor(Date.now()/1e3)}).items&&(t.items=[]),t.created+3600<Math.floor(Date.now()/1e3)&&(t.items=[],t.created=Math.floor(Date.now()/1e3)),q.state.order=t}catch(t){q.state.order.created=Math.floor(Date.now()/1e3),q.state.order.items=[]}localStorage.idd||(localStorage.idd=g(8)+Math.floor(Date.now())),q.refreshCheckoutButton()}(),E(),F(),document.addEventListener("scroll",P)):alert(b("Oops, something went wrong. Please try again."))})).catch((function(t){console.error("Error:",t)}))}(),document.addEventListener("DOMContentLoaded",(function(){config.moreButton&&(document.querySelector(".kUNwHA .cta-btn .mbtnMore").style.display="flex",document.querySelector(".kUNwHA .cta-btn .mbtnMore").addEventListener("click",(function(t){_("")})))}));var z=function(){var t=new URLSearchParams(window.location.search);M=t.get("table")?t.get("table"):""},E=function(){localStorage.sid=config.sid,function(){var t,e=settings.categories.split("\n"),o="",r="",n="",c=a(e);try{for(c.s();!(t=c.n()).done;){var i=t.value.split("|"),d=i[0].trim(),l=null==i[1]?"":i[1].trim();o+='<div class="slide" data-href="'+h(d)+'"><a href="#'+h(d)+'" class=" cl">'+b(d)+"</a></div>";var u=function(t){if(products[t].id=products[t]._id,void 0===products[t].cats)return"continue";if(null==products[t].cats)return"continue";if(!products[t].cats.includes(d))return"continue";var e;if(products[t].img[0]||"true"==products[t].img[0]){var a=new Image;a._id=products[t]._id,a.updated=products[t].updated,(e=a).onload=function(){document.querySelector(".kUNwHA .kenzap-row[data-id='"+e._id+"'] img").setAttribute("src",e.src)},e.src=s+"/S"+localStorage.sid+"/product-"+e._id+"-1-250.jpeg?"+e.updated}var o="";products[t].stock&&products[t].stock.management&&0==parseInt(products[t].stock.qty)&&(o=b("sold out"));var c=q.state.order.items.find((function(e){return e.id==products[t]._id})),i=void 0===c?"":c.qty,u="";n!=d&&(u='<h2 id="'+h(n=d)+'">'+b(n)+'</h2><p class="subnote">'+b(l)+"</p>"),r+='\n            <div class="kenzap-row" data-nostock="'.concat(!!o,'" data-index="').concat(t,'" data-id="').concat(products[t]._id,'">\n                ').concat(u,'\n                <div class="info-box">\n                    <div class="kenzap-col-7">\n                        <div class="kp-content">\n                            <h3><span class="tag ctag">').concat(i,"</span>").concat(b(products[t].title),"</h3>\n                            <p>").concat(b(products[t].sdesc),"</p>\n                            ").concat(o?'<span class="tag ptag">'+b("sold out")+"</span>":p(products[t]).html,'\n                        </div>\n                    </div>\n                    <div class="kenzap-col-5">\n                        <div class="kp-img">\n                            <img src="').concat("https://cdn.kenzap.com/loading.png",'" alt="').concat(products[t].title,'">\n                            <div class="kp-info">').concat(o,"</div>\n                        </div>\n                    </div>\n                </div>\n            </div> ")};for(var m in products)u(m)}}catch(t){c.e(t)}finally{c.f()}var f=document.querySelector(".kUNwHA .slideset"),y=document.querySelector(".kUNwHA .kenzap-container");""==r?y.innerHTML=b("Please add products and specify categories first"):(f.innerHTML=o,y.innerHTML=r)}(),D(),function(){var e,o=a(document.querySelectorAll(".kUNwHA .kenzap-row"));try{for(o.s();!(e=o.n()).done;)e.value.addEventListener("click",(function(e){if("true"==e.currentTarget.dataset.nostock)return alert(b("Product sold out")),!1;var o=e.currentTarget.dataset.index;q.state.index=o;var r=products[o].id,n=document.querySelector(".kUNwHA .mdialog-cnt");N.last_state=N.state,q.state.total=0,q.state.count=0;var c=q.state.order.items.find((function(t){return t.id==r}));q.state.product=void 0===c?{id:products[o].id,title:products[o].title,sdesc:products[o].sdesc,index:o,qty:0,note:"",variations:[]}:c,q.state.product.type=0==q.state.product.qty?"new":"update",document.querySelector("body").classList.add("kp-modal"),history.pushState({pageID:"feed"},"Feed",window.location.pathname+window.location.search+"#editing"),U();var i=products[o].img[0]?s+"/S"+localStorage.sid+"/product-"+products[o]._id+"-1-250.jpeg?"+products[o].updated:"https://cdn.kenzap.com/loading.png";document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-body > h2").innerHTML=b(q.state.product.title),document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-body > p").innerHTML=b(q.state.product.sdesc),document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-img img").setAttribute("src",i),document.querySelector(".kUNwHA .mdialog .qty").value=q.state.count=q.state.product.qty,document.querySelector(".kUNwHA .mdialog .kp-note textarea").value=q.state.product.note;var d,l=new Image;l._id=products[o]._id,l.updated=products[o].updated,(d=l).onload=function(){document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-img img").setAttribute("src",d.src)},d.src=s+"/S"+localStorage.sid+"/product-"+d._id+"-1-500.jpeg?"+d.updated;var u="";if(t("undefined"!==products[o].variations))for(var p in products[o].variations){var m="";for(var f in"checkbox"==products[o].variations[p].type&&(m="check"),"radio"==products[o].variations[p].type&&(m="radio"),void 0===q.state.product.variations[p]&&(q.state.product.variations[p]={title:products[o].variations[p].title,required:products[o].variations[p].required,allow:"1"!=products[o].variations[p].required}),u+="                <h3>"+b(products[o].variations[p].title)+("1"==products[o].variations[p].required?' <span class="tag">'+b("required")+"</span>":"")+'</h3>                <div class="kp-'+m+'">',products[o].variations[p].data){var g=!1;switch(void 0!==q.state.product.variations[p]&&void 0!==q.state.product.variations[p].list&&void 0!==q.state.product.variations[p].list["_"+f]&&(g=!0),products[o].variations[p].data[f].price=v(products[o].variations[p].data[f].price),m){case"check":u+='\n                                <label>\n                                    <input type="checkbox" data-required="'.concat(products[o].variations[p].required,'" data-indexv="').concat(p,'" data-index="').concat(f,'" data-title="').concat(products[o].variations[p].data[f].title,'" data-price="').concat(products[o].variations[p].data[f].price,'" ').concat(g?'checked="checked"':"",'>\n                                    <div class="checkbox">\n                                        <svg width="20px" height="20px" viewBox="0 0 20 20">\n                                            <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>\n                                            <polyline points="4 11 8 15 16 6"></polyline>\n                                        </svg>\n                                    </div>\n                                    <span>').concat(b(products[o].variations[p].data[f].title),'</span>\n                                    <div class="price">+ ').concat(y(products[o].variations[p].data[f].price),"</div>\n                                </label>");break;case"radio":u+='\n                                <label>\n                                    <input type="radio" data-required="'.concat(products[o].variations[p].required,'" data-indexv="').concat(p,'" name="radio').concat(p,'" data-index="').concat(f,'" data-title="').concat(products[o].variations[p].data[f].title,'" data-price="').concat(products[o].variations[p].data[f].price,'" ').concat(g?'checked="checked"':""," />\n                                    <span>").concat(b(products[o].variations[p].data[f].title),'</span>\n                                    <div class="price">+ ').concat(y(products[o].variations[p].data[f].price),"</div>\n                                </label>")}}u+="</div>"}document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-vars").innerHTML=u,q.refreshButton(),n.style.display="block",document.querySelector(".kUNwHA .overlay").style.display="block";var h,w=a(document.querySelectorAll(".kUNwHA .mdialog .kp-check input[type=checkbox]"));try{var k=function(){var t=h.value;t.addEventListener("change",(function(){var e=parseInt(t.dataset.indexv);q.state.product.variations[e].list={};var o,r=0,n=a(document.querySelectorAll(".kUNwHA .mdialog .kp-check input[type=checkbox][data-indexv='"+e+"']"));try{for(n.s();!(o=n.n()).done;){var c=o.value;"1"==t.dataset.required?r&&(q.state.product.variations[e].allow=!0):q.state.product.variations[e].allow=!0,c.checked&&(q.state.product.variations[e].list["_"+c.dataset.index]={title:c.dataset.title,price:parseFloat(c.dataset.price)},r+=1)}}catch(t){n.e(t)}finally{n.f()}q.refreshButton()}))};for(w.s();!(h=w.n()).done;)k()}catch(t){w.e(t)}finally{w.f()}var S,A=a(document.querySelectorAll(".kUNwHA .mdialog .kp-radio input[type=radio]"));try{var H=function(){var t=S.value;t.addEventListener("change",(function(){var e=parseInt(t.dataset.indexv);q.state.product.variations[e].list={};var o,r=0,n=a(document.querySelectorAll(".kUNwHA .mdialog .kp-radio input[type=radio][data-indexv='"+e+"']"));try{for(n.s();!(o=n.n()).done;){var c=o.value;c.checked&&(q.state.product.variations[e].list["_"+c.dataset.index]={title:c.dataset.title,price:parseFloat(c.dataset.price)},r+=1),"1"==t.dataset.required?r&&(q.state.product.variations[e].allow=!0):q.state.product.variations[e].allow=!0}}catch(t){n.e(t)}finally{n.f()}q.refreshButton()}))};for(A.s();!(S=A.n()).done;)H()}catch(t){A.e(t)}finally{A.f()}}))}catch(t){o.e(t)}finally{o.f()}var r=document.querySelector(".kUNwHA .mdialog .qty");document.querySelector(".kUNwHA .mdialog .plus").addEventListener("click",(function(t){q.state.count<config.cart.max_addition&&(q.state.count+=1),r.value=q.state.count,q.refreshButton(),w()})),document.querySelector(".kUNwHA .mdialog .minus").addEventListener("click",(function(t){q.state.count>0&&(q.state.count-=1),r.value=q.state.count,q.refreshButton(),w()})),document.querySelector(".kUNwHA .mdialog .add").addEventListener("click",(function(t){t.currentTarget.parentNode.classList.contains("dis")?alert(b("Please select required fields")):(q.addToCart(),L(),k(b("Cart updated")),w())}))}(),function(){var t,e=a(document.querySelectorAll(".kUNwHA .slideset .slide"));try{for(e.s();!(t=e.n()).done;){var o=t.value,r=o.offsetLeft;N.offsets[o.dataset.href]=r,o.addEventListener("click",(function(t){document.documentElement.scrollTop,setTimeout((function(t){var e,o=a(document.querySelectorAll(".kUNwHA .slide"));try{for(o.s();!(e=o.n()).done;)e.value.classList.remove("active")}catch(t){o.e(t)}finally{o.f()}t.classList.add("active")}),250,this)}))}}catch(t){e.e(t)}finally{e.f()}}(),console.log(q.state.step),document.querySelector(".kUNwHA .cta-btn .mbtn").addEventListener("click",(function(t){if(0!=q.state.order.total||1!=q.state.step&&2!=q.state.step){if(document.querySelector("body").classList.add("kp-modal"),history.pushState({pageID:"feed"},"Feed",window.location.pathname+window.location.search+"#checkout"),U(),1==q.state.step)return O(),void H(2);if(2==q.state.step){if("2"==config.fast_checkout){var e=new URLSearchParams(window.location.search);return q.state.order.kid="0",q.state.order.name="dine-in",q.state.order.from=e.get("table")?"table "+e.get("table"):"dine-in",q.state.order.status="new",L(),k(b("Checking out")),void I()}var a="";return a='<div class="ptable">',a+='<label for="table" style="'+(M.length>0?"display:none;":"")+'">'+b("Table number")+"</label>",a+='<input type="number" value="'+M+'" name="table" style="'+(M.length>0?"display:none;":"")+'" autocomplete="off" class="table" size="4" pattern="" inputmode="">',a+='<label for="note">'+b("Note")+"</label>",a+='<textarea class="note" name="note" placeholder="'+b("leave a note for a kitchen")+'"></textarea>',a+="</div>",document.querySelector(".kUNwHA .cdialog-cnt .kp-body").innerHTML=a,document.querySelector(".kUNwHA .cdialog-cnt .ptable .table").focus(),void H(3)}if(3==q.state.step){var o=document.querySelector(".kUNwHA .cdialog-cnt .ptable .table").value,r=document.querySelector(".kUNwHA .cdialog-cnt .ptable .note").value;if(""==o)return void alert("Please enter table number");q.state.order.table=o,q.state.order.note=r,localStorage.cart=JSON.stringify(q.state.order),document.querySelector(".kUNwHA .cdialog-cnt").style.display="none",L();var n=config.domain;return-1==n.indexOf("checkout")&&(n+=(-1==n.indexOf("?")?"?":"&")+"checkout=1"),window.location.href="https://auth.kenzap.com/?app="+d+"&redirect="+encodeURIComponent(n),document.querySelector(".kUNwHA .overlay").style.display="block",void(document.querySelector(".kUNwHA .overlay .loader").style.display="block")}4!=q.state.step||L()}else k(b("Cart is empty"))}))},D=function(){document.querySelector(".kUNwHA .mdialog .close").addEventListener("click",(function(t){L()})),document.querySelector(".kUNwHA .cdialog .close").addEventListener("click",(function(t){document.querySelector(".kUNwHA .cdialog-cnt").style.display="none",H(1),L()})),window.addEventListener("resize",U),window.addEventListener("orientationchange",U),window.addEventListener("hashchange",(function(t){if(document.querySelector("body").classList.contains("kp-modal"))return t.preventDefault(),L(),!1}))},O=function t(){var e=document.querySelector(".kUNwHA .cdialog-cnt");U(),e.style.display="block",document.querySelector(".kUNwHA .overlay").style.display="block";var o='\n        <table class="cart-table">\n\n            <tr><th><div class="prod me-1 me-sm-3">'.concat(b("Product"),'</div></th><th class="qty"><div class="me-1 me-sm-3">').concat(b("Qty"),'</div></th><th class="price"><div class="me-1 me-sm-3">').concat(b("Total"),"</div></th><th></th></tr>");for(var r in q.state.order.items)o+=A(0,q.state.order.items[r]);o+=u("checkout",q.state.order.items).html,o+="\n        </table>",e.querySelector(".kUNwHA .cdialog-cnt .kp-body").innerHTML=o;var n,c=a(e.querySelectorAll(".kUNwHA .cdialog-cnt .kp-body .checkt"));try{for(c.s();!(n=c.n()).done;){n.value.addEventListener("click",(function(e){if(confirm("Remove "+e.currentTarget.dataset.title+"?")){if(document.querySelector(".kUNwHA .kenzap-row[data-id='"+e.currentTarget.dataset.id+"'] .ctag").innerHTML="",q.removeFromCart(e.currentTarget.dataset.id),q.refreshCheckoutButton(),0==Object.keys(q.state.order.items).length)return H(1),void L();t(),H(2)}}))}}catch(t){c.e(t)}finally{c.f()}},F=function(t,e){var a=new URLSearchParams(window.location.search),o=a.get("ott")?a.get("ott"):"",r=new URLSearchParams;r.append("cmd","get_state"),r.append("app",d),r.append("ott",o),r.append("token",m("kenzap_token")),config.token=m("kenzap_token"),fetch("https://api-v1.kenzap.cloud/auth/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:r}).then((function(t){return t.json()})).then((function(t){(a.get("checkout")?a.get("checkout"):"")&&(t.success?(t.token&&(config.token=t.token,function(t,e,a){var o="";if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3),o=";expires="+r.toUTCString()}document.cookie=t+"="+(escape(e)||"")+o+";path=/"}("kenzap_token",t.token,1),console.log("setting up token")),q.state.order.kid=t.kid,q.state.order.name=t.name,q.state.order.from=M+" - "+t.name,q.state.order.status="new",I()):alert(b("Oops, something went wrong. Please try checking out again.")))})).catch((function(t){console.error("Error:",t)}))},I=function(){var t=new URLSearchParams(window.location.search);q.state.order.table=t.get("table")?t.get("table"):"",q.state.order.idd=localStorage.idd,q.state.order.sid=localStorage.sid,q.state.order.aggregation=config.aggregation,q.state.order.id=void 0===q.state.order.id?g(8)+Math.floor(Date.now()):q.state.order.id,localStorage.lastOrder=JSON.stringify(q.state.order);var e=new Date;q.state.order.created_ymd=e.getUTCFullYear()+""+l(e.getUTCMonth()+1)+l(e.getUTCDate()),q.state.order.created_ym=e.getUTCFullYear()+""+l(e.getUTCMonth()+1),q.state.order.created_y=e.getUTCFullYear()+"",fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{order:{type:"create-order",key:"ecommerce-order",sid:localStorage.sid,data:q.state.order}}})}).then((function(t){return t.json()})).then((function(t){t.success?(!function(t){var e=[];try{e=JSON.parse(localStorage.orderIDs)}catch(t){}var a=Date.now()/1e3|0,o=new Date(a),r={time:a,date:o.getFullYear()+""+(o.getMonth()+1)+o.getDate(),id:t};e.push(r),localStorage.orderIDs=JSON.stringify(e)}(t.order.id),q.clearCart(),_("new"),H(4)):alert("Error: "+JSON.stringify(t))})).catch((function(t){console.error("Error:",t)}))},P=function(){var t=document.querySelectorAll(".kUNwHA .kenzap-row h2"),e=0,o=0;N.state=document.documentElement.scrollTop;var r,n=a(t);try{for(n.s();!(r=n.n()).done;){var c=r.value;o=c.offsetTop-document.documentElement.scrollTop,N.direction="down",o<0&&e>o&&(o=e,N.el_id=c.id),e=o}}catch(t){n.e(t)}finally{n.f()}if(N.state_prev!=N.state&&(N.state_prev=N.state),""!=N.el_id){var i=document.querySelector(".kUNwHA .cata-sub-nav");N.timer&&clearTimeout(N.timer),N.timer=setTimeout((function(t){i.scrollTo({left:N.offsets[t],behavior:"smooth"});var e,o=a(document.querySelectorAll(".kUNwHA .slide"));try{for(o.s();!(e=o.n()).done;){e.value.classList.remove("active")}}catch(t){o.e(t)}finally{o.f()}document.querySelector(".kUNwHA [data-href='"+t+"']").classList.add("active")}),200,N.el_id)}N.el_id=""}}();
