!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function a(e,a){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,a){if(e){if("string"==typeof e)return t(e,a);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,a):void 0}}(e))||a&&e&&"number"==typeof e.length){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,c=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw c}}}}const o=(e,t,...a)=>{let o=(e,t)=>(t.forEach(((t,a)=>{e=e.replace("%"+(a+1)+"$",t)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?o(e,a):o(t(window.i18n.state.locale.values[e]),a)},r=(e,...t)=>{if(0===(e=String(e)).length)return"";return o(e,(e=>e.replace(/[<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},n=(e,...t)=>{if(0===(e=String(e)).length)return"";return o(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},c=()=>{let e=document.querySelector(".loader");e&&(e.style.display="none")},i=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},s=e=>{let t=e+"=",a=decodeURIComponent(document.cookie).split(";");for(let e=0;e<a.length;e++){let o=a[e];for(;" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""};s("kenzap_api_key"),s("locale")&&s("locale"),(()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,t=window.location.hostname+"/"+i()+"/"+s("locale");t!=s("check")&&(e=0,console.log("refresh")),((e,t,a)=>{let o="";if(a){let e=new Date;e.setTime(e.getTime()+24*a*60*60*1e3),o=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(t)||"")+o+";path=/;domain=.kenzap.cloud"})("check",t,5)})(),s("kenzap_token"),i();const d=e=>{if(console.log(e),isNaN(e.code)){let t=e;try{t=JSON.stringify(t)}catch(e){}let a=new URLSearchParams;return a.append("cmd","report"),a.append("sid",i()),a.append("token",s("kenzap_token")),a.append("data",t),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:a}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)},l=(e,t)=>{if(document.querySelector(e))for(let a of document.querySelectorAll(e))a.removeEventListener("click",t,!0),a.addEventListener("click",t,!0)},u=(e,t)=>{if(document.querySelector(e))for(let a of document.querySelectorAll(e))a.removeEventListener("keyup",t,!0),a.addEventListener("keyup",t,!0)},p=(e,t)=>{if(document.querySelector(e))for(let a of document.querySelectorAll(e))a.removeEventListener("change",t,!0),a.addEventListener("change",t,!0)};var m="https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com",y="66432108790002",f=function(e){return(""+e).length<2?"0"+e:e},g=function(e,t){var a=0;switch(e){case"checkout":a=4;break;case"account":a=3}var o="",r={grand_total:0,total:0,discount_percent:0,discount_total:0,fee_total:0,tax_total:0,tax_percent:0};return t.forEach((function(e){return r.total+=parseFloat(e.total)})),r.grand_total=r.total,o+='<tr><td colspan="'.concat(a,'"><div class="price" style="margin-top:16px;">').concat(n("Subtotal")," <b>").concat(w(r.total),"</b></div></td></tr>"),config.price.fee_calc&&(r.fee_total=parseFloat(config.price.fee_percent*r.total)/100,r.fee_percent=config.price.fee_percent,o+='<tr><td colspan="'.concat(a,'"><div class="price" >').concat(n(config.price.fee_display)," <b>").concat(w(r.fee_total),"</b></div></td></tr>"),r.grand_total+=r.fee_total),config.price.tax_calc&&(r.tax_total=(r.fee_total+r.total)*parseFloat(config.price.tax_percent)/100,r.tax_percent=config.price.tax_percent,o+='<tr><td colspan="'.concat(a,'"><div class="price ">').concat(config.price.tax_display," <b>").concat(w(r.tax_total),"</b></div></td></tr>"),r.grand_total+=r.tax_total),r.grand_total=k(r.grand_total),o+='<tr><td colspan="'.concat(a,'"><div class="price " style="font-size:19px;font-weight:700;">').concat(n("Total")," <b>").concat(w(r.grand_total),"</b></div></td></tr>"),{price:r,html:o}},h=function(e){var t={html:null,priced:null};if(t.html='<span class="tag ptag">'+w(e.price)+"</span>",""!=e.priced&&e.priced,e.discounts){var a=!1,o=new Date,r=f(o.getMonth()+1),n=f(o.getDate()),c=f(o.getFullYear());e.discounts.forEach((function(i){switch(i.availability){case"always":a=!0;break;case"weekly":if(!i.dow[o.getDay()-1])break;a=!0;case"hourly":var s=new Date(r+"/"+n+"/"+c+" "+i.hours.from+":00").getTime(),d=new Date(r+"/"+n+"/"+c+" "+i.hours.to+":00").getTime();s>Date.now()/1e3|0>d&&(a=!0)}a&&("percent"==i.type?t.priced=S(e.price)*((100-i.percent)/100):"value"==i.type&&(t.priced=i.value),t.html='<span class="ptagc">'.concat(w(e.price),'</span> <span class="tag ptag">').concat(w(t.priced),"</span>"),i.note&&(t.html+='<div class="pricenote">'.concat(i.note,"</div>")))}))}return t},v=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),o=0;o<a.length;o++){for(var r=a[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},k=function(e){return e=S(e),(Math.round(100*parseFloat(e))/100).toFixed(2)},w=function(e){e=S(e);var t=k(e);switch(config.price.style){case"left":t=config.price.symbol+t;break;case"right":t+=config.price.symbol}return t},S=function(e){return e=""==e?0:e},b=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz".split("");"number"!=typeof e&&(e=Math.floor(Math.random()*t.length_));for(var a="",o=0;o<e;o++)a+=t[Math.floor(Math.random()*t.length)];return a},q=function(e){for(var t="cat",a=0;a<e.length-1;a++)t+=e.charCodeAt(a);return t},_=function(){window.navigator&&window.navigator.vibrate&&navigator.vibrate(20)},A=function(e){var t=document.querySelector(".kUNwHA .snackbar");t.innerHTML=e,t.classList.add("show"),setTimeout((function(){t.className=t.className.replace("show","")}),2200)},H=function(e,t){switch(t){case"new":case"paid":return'<div class="badge btn-warning text-dark fw-light">'+n("New")+"</div>";case"processing":return'<div class="badge btn-warning text-dark fw-light">'+n("Cooking")+"</div>";case"completed":return'<div class="badge btn-success text-dark fw-light">'+n("Served")+"</div>";case"canceled":return'<div class="badge btn-secondary text-dark fw-light">'+n("Canceled")+"</div>";case"refunded":return'<div class="badge btn-secondary text-dark fw-light">'+n("Refunded")+"</div>";case"failed":return'<div class="badge btn-secondary text-dark fw-light">'+n("Failed")+"</div>";default:return'<div class="badge btn-primary text-dark fw-light">'+n("Processing")+"</div>"}},N={state:0,last_state:0,state_prev:0,fp:0,el_id:"",direction:"",offsets:{},timer:null},L=function(){document.querySelector("body").classList.contains("kp-modal")&&(document.querySelector("body").style.height="100vh",document.querySelector("body").style.overflowY="hidden",document.querySelector(".kUNwHA .scrollable").style.height="100vh",document.querySelector(".kUNwHA .scrollable").style.overflowY="hidden",document.querySelector(".kUNwHA .mdialog-cnt").style.height=window.screen.availHeight-160+"px")},U=function(){document.querySelector(".kUNwHA .mdialog-cnt").style.display="none",document.querySelector(".kUNwHA .overlay").style.display="none",document.querySelector(".kUNwHA .scrollable").style.height="auto",document.querySelector(".kUNwHA .scrollable").style.overflowY="scroll",document.querySelector("body").style.overflowY="auto",document.querySelector("body").style.height="auto",setTimeout((function(){document.querySelector("body").classList.remove("kp-modal")}),300),document.documentElement.scrollTop=N.last_state,document.querySelector(".kUNwHA .cdialog-cnt").style.display="none",M.refreshCheckoutButton(),document.querySelector(".kUNwHA .cta-btn").style.display="flex",-1!=window.location.href.indexOf("#editing")&&history.pushState({pageID:"feed"},"Feed",window.location.pathname+window.location.search)},x=function(e){var t=document.querySelector(".kUNwHA .cdialog-cnt");t.style.display="block",document.querySelector(".kUNwHA .overlay").style.display="block",document.querySelector(".kUNwHA .cta-btn").style.display="none",document.querySelector("body").classList.add("kp-modal"),history.pushState({pageID:"feed"},"Feed",window.location.pathname+window.location.search+"#account"),L();var a="";a=settings.orders_call_waiter?'\n                <div class="account">\n                    <h3 class="class-waiter"><svg xmlns="http://www.w3.org/2000/svg" class="bell" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                    <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"></path>\n                    </svg>'.concat(n("Call waiter"),' <span class="statusLast"></span></h3>\n                    <p>').concat(n("You can track your order from the table below."),'</p>\n                    <div class="lottie-cont dn"></div>\n                    '):'\n                <div class="account">\n                    <h3 class="" style="display:flex;">\n                    <svg style="margin:4px 12px 0 0px;" xmlns="http://www.w3.org/2000/svg" width="32" height="30" fill="currentColor" class="bi bi-cart-check" viewBox="0 0 16 16">\n                    <path d="M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>\n                    <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n                    </svg>\n                    '.concat(n("My Account"),' <span class="statusLast"></span></h3>\n                    <p>').concat(n("You can track your order from the table below or click on the bell to call waiter."),'</p>\n                    <div class="lottie-cont dn"></div>\n                    '),"new"==e&&(a='\n            <div class="account">\n                <h3 class="class-waiter"><svg xmlns="http://www.w3.org/2000/svg" class="bell" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"></path>\n                </svg>'.concat(n("Call waiter"),' <span class="statusLast"></span></h3>\n                <p>').concat(n("Thank you for placing your order. You can track your order from the table below or click on the bell to call waiter."),'</p>\n                <div class="lottie-cont dn"></div>\n                ')),a+="\n            <h4>".concat(n("Orders"),'</h4>\n            <div class="orders">'),T(a,t),a+="</div>",a+="</div>",t.querySelector(".kUNwHA .cdialog-cnt .kp-body").innerHTML=a,l(".kUNwHA .class-waiter",(function(e){if(confirm(n("Call waiter?"))){document.querySelector(".kUNwHA .bell").classList.add("dn");var t=new URLSearchParams(window.location.search),a=t.get("table")?t.get("table"):"";fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{notify:{type:"notify",key:"ecommerce-message",sid:localStorage.sid,data:{channel:"waiter",idd:localStorage.idd,msg:n("table %1$ is calling!",a),color:"danger"}}}})}).then((function(e){return e.json()})).then((function(e){e.success?A(n("Calling, please wait a moment!")):(document.querySelector(".kUNwHA .bell").classList.remove("dn"),A(n("Oops, please try again")))})).catch((function(e){d(e)}))}}))},T=function(e,t){var o=new URLSearchParams(window.location.search),r=o.get("table")?o.get("table"):"";fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{orders:{type:"get-orders",idd:localStorage.idd,table:r,fields:["id","_id","total","status","items","created"],limit:10,sortby:{field:"created",order:"DESC"}}}})}).then((function(e){return e.json()})).then((function(e){if(c(),e.success){var o=!0,r="cooking",i='<ul class="accordion">';e.orders||(i+="<li>"+n("No orders to display yet")+"</li>");var s,u=a(e.orders);try{for(u.s();!(s=u.n()).done;){var p=s.value;o&&(document.querySelector(".statusLast").innerHTML=H(0,p.status),"completed"==p.status&&(r="serving")),i+=C(o,p),o=!1}}catch(e){u.e(e)}finally{u.f()}switch(r){case"cooking":document.querySelector(".account .lottie-cont").innerHTML='<lottie-player src="https://assets8.lottiefiles.com/packages/lf20_fefIZO.json" background="transparent" speed="1" class="lplayer" style="width: 300px; height: auto;" loop autoplay></lottie-player>';break;case"serving":document.querySelector(".account .lottie-cont").innerHTML='<lottie-player src="https://assets9.lottiefiles.com/packages/lf20_thgy1p9c.json" background="transparent" speed="1" class="lplayer" style="width: 300px; height: auto;" loop autoplay></lottie-player>'}i+="</ul>",t.querySelector(".kUNwHA .orders").innerHTML=i,l(".kUNwHA .accordion .cancel-order",(function(e){if(e.preventDefault(),!confirm(n("Cancel order?")))return!1;var t=e.currentTarget,a=new URLSearchParams(window.location.search),o=a.get("table")?a.get("table"):"-";fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{status:{type:"update-order-status",id:t.dataset._id,status:"canceled",notify:!0,data:{msg:n("table %1$ canceled order #%2$",o,t.dataset.id),idd:localStorage.idd,color:"danger"}}}})}).then((function(e){return e.json()})).then((function(e){c(),e.success&&(t.parentElement.parentElement.querySelector(".badge").innerHTML=n("Canceled"),A(n("Order #"+t.dataset.id+" canceled")),t.remove(),z())})).catch((function(e){d(e)}))})),l(".kUNwHA .accordion .toggle",(function(e){e.preventDefault(),e.currentTarget.classList.contains("active")?(e.currentTarget.classList.remove("active"),e.currentTarget.parentElement.querySelector(".inner").classList.remove("show"),e.currentTarget.parentElement.querySelector(".plusminus").classList.remove("active")):(e.currentTarget.classList.add("active"),e.currentTarget.parentElement.querySelector(".inner").classList.add("show"),e.currentTarget.parentElement.querySelector(".plusminus").classList.add("active"))})),document.querySelector(".kUNwHA .cta-btn").style.display="none"}else A(n("Please make your first order")),z()})).catch((function(e){d(e)}))},C=function(e,t){var a='<li>\n        <a class="toggle '.concat(e?"active":"",' " href="#">\n            #').concat(t.id,' <span class="timago">').concat(function(e,t,a){var o=(t=parseInt(t))-(a=parseInt(a));if(o<60)return n("moments ago");if(o<3600)return parseInt(o/60)+" "+n("minutes ago");if(o<86400)return parseInt(o/60/24)+" "+n("hours ago");var r=new Date(1e3*a),c=[n("Jan"),n("Feb"),n("Mar"),n("Apr"),n("May"),n("Jun"),n("Jul"),n("Aug"),n("Sep"),n("Oct"),n("Nov"),n("Dec")],i=r.getFullYear(),s=c[r.getMonth()],d=r.getDate();return r.getHours(),r.getMinutes(),r.getSeconds(),d+" "+s+" "+i}(0,Date.now()/1e3|0,t.created),"</span> ").concat(H(0,t.status),'<div class="plusminus ').concat(e?"active":"",'"></div>\n        </a>\n        <div class="inner ').concat(e?"show":"",'">\n            <table>\n                <tr><th><div class="me-1 me-sm-3">').concat(n("Product"),'</div></th><th class="qty"><div class="me-1 me-sm-3">').concat(n("Qty"),'</div></th><th class="price"><div class="me-1 me-sm-3">').concat(n("Total"),"</div></th><th></th></tr>");for(var o in t.items)a+=O("history",t.items[o]);return a+=g("account",t.items).html,a+='</table> \n            <div class="tag cancel-order '.concat("true"==config.orders_cancelable?"new"!=t.status?"dn":"":"dn",'" data-id="').concat(t.id,'" data-_id="').concat(t._id,'">').concat(n("Cancel order"),"</div>\n        </div>\n    </li>")},z=function(){document.querySelector(".kUNwHA .mdialog-cnt").style.display="none",document.querySelector(".kUNwHA .overlay").style.display="none",document.querySelector(".kUNwHA .scrollable").style.height="auto",document.querySelector(".kUNwHA .scrollable").style.overflowY="scroll",document.querySelector("body").style.overflowY="auto",document.querySelector("body").style.height="auto",setTimeout((function(){document.querySelector("body").classList.remove("kp-modal")}),300),document.documentElement.scrollTop=scroll.last_state,document.querySelector(".kUNwHA .cdialog-cnt").style.display="none",document.querySelector(".kUNwHA .cta-btn").style.display="flex","undefined"!=typeof cart&&cart.refreshCheckoutButton()},M={state:{total:0,count:0,index:0,product:{variations:[]},order:{step:0}},resetButton:function(){M.state.total=0,M.state.count=0},refreshButton:function(){products[M.state.index].priced=h(products[M.state.index]).priced,M.state.product.qty=parseInt(document.querySelector(".kUNwHA .mdialog .qty").value),M.state.product.price=products[M.state.index].priced?parseFloat(products[M.state.index].priced):parseFloat(products[M.state.index].price),M.state.product.note=document.querySelector(".kUNwHA .mdialog .kp-note textarea").value;var e,t=a(document.querySelectorAll(".kUNwHA .mdialog .kp-check input[type=checkbox]"));try{for(t.s();!(e=t.n()).done;){var o=e.value;o.checked&&(M.state.product.price+=parseFloat(o.dataset.price))}}catch(e){t.e(e)}finally{t.f()}var r,c=a(document.querySelectorAll(".kUNwHA .mdialog .kp-radio input[type=radio]"));try{for(c.s();!(r=c.n()).done;){var i=r.value;i.checked&&(M.state.product.price+=parseFloat(i.dataset.price))}}catch(e){c.e(e)}finally{c.f()}M.state.product.total=parseFloat(M.state.product.price*M.state.product.qty),document.querySelector(".kUNwHA .mdialog .add .price").innerHTML=w(M.state.product.total);var s=!1;for(var d in 0==M.state.product.total&&(s=!0),M.state.product.variations)0==M.state.product.variations[d].allow&&(s=!0);document.querySelector(".kUNwHA .mdialog .kp-add .mbtn .add").style.background="","update"==M.state.product.type&&M.state.product.qty>0&&(document.querySelector(".kUNwHA .mdialog .kp-add .mbtn .cta").innerHTML=n("Update")),"update"==M.state.product.type&&0==M.state.product.qty&&(document.querySelector(".kUNwHA .mdialog .kp-add .mbtn .cta").innerHTML=n("Remove"),document.querySelector(".kUNwHA .mdialog .kp-add .btn .add")&&(document.querySelector(".kUNwHA .mdialog .kp-add .btn .add").style.background="#df1960"),s=!1),"new"==M.state.product.type&&(document.querySelector(".kUNwHA .mdialog .kp-add .mbtn .cta").innerHTML=n("Add")),M.state.product.idd=localStorage.idd,s?document.querySelector(".kUNwHA .mdialog .kp-add .mbtn").classList.add("dis"):document.querySelector(".kUNwHA .mdialog .kp-add .mbtn").classList.remove("dis")},refreshCheckoutButton:function(){var e=0;for(var t in M.state.order.items)e+=parseFloat(M.state.order.items[t].total);M.state.order.total=e,e>0?(document.querySelector("body").classList.add("cbtn"),D(1),document.querySelector(".kUNwHA .cta-btn .price").innerHTML=w(e)):(document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=n("cart empty"),document.querySelector("body").classList.remove("cbtn"))},addToCart:function(){M.state.order.items=M.state.order.items.filter((function(e){return e.id!=M.state.product.id})),"1"==config.add_products&&0==M.state.order.items.length&&config.add_products_list.trim().split("\n").forEach((function(e,t){var a=products.filter((function(t){return t._id==e}));if(a[0]){var o={id:a[0]._id,idd:localStorage.idd,index:"-1",note:"",noremove:!0,price:a[0].price,qty:1,sdesc:a[0].sdesc,title:a[0].title,total:a[0].price,type:"new",variations:[]};M.state.order.items.push(o),console.log("adding mandatory product"),console.log(o)}})),M.state.order.items.push(M.state.product),0==M.state.product.qty?M.removeFromCart(M.state.product.id):document.querySelector(".kUNwHA .kenzap-row[data-id='"+M.state.product.id+"'] .ctag").innerHTML=M.state.product.qty,localStorage.cart=JSON.stringify(M.state.order),M.refreshCheckoutButton()},removeFromCart:function(e){M.state.order.items=M.state.order.items.filter((function(t){return t.id!=e})),delete M.state.order.items[e],document.querySelector(".kUNwHA .kenzap-row[data-id='"+e+"'] .ctag")&&(document.querySelector(".kUNwHA .kenzap-row[data-id='"+e+"'] .ctag").innerHTML=""),localStorage.cart=JSON.stringify(M.state.order)},clearCart:function(){for(var e in M.state.order.items)document.querySelector(".kUNwHA .kenzap-row[data-id='"+M.state.order.items[e].id+"'] .ctag").innerHTML="";M.state.order={},M.state.order.created=Math.floor(Date.now()/1e3),M.state.order.items=[],localStorage.cart=JSON.stringify(M.state.order),M.refreshCheckoutButton(),window.history.replaceState({pageID:"feed"},"Feed",window.location.pathname+window.location.search)},loadCheckoutFields:function(){var e,t,a=new URLSearchParams(window.location.search),o=a.get("table")?a.get("table"):"";M.state.order.phone=localStorage.QR_menu_phone?localStorage.QR_menu_phone:"",M.state.order.takeaway=settings.checkout_takeaway_field,M.state.order.addr1=localStorage.QR_menu_addr1?localStorage.QR_menu_addr1:"",M.state.order.note="",document.querySelector("#addon10")&&(document.querySelector("#addon10").remove(),document.querySelector(".pac-container").remove()),window.initAutocomplete=function(){var a=new google.maps.Map(document.getElementById("checkout_map"),{center:{lat:-6.2309225,lng:106.8023857},zoom:12,mapTypeId:"roadmap",streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1});t=document.querySelector(".checkout_address"),e=new google.maps.places.SearchBox(t,{componentRestrictions:{country:["id"]},fields:["address_components","geometry","name"],types:["address"]}),a.addListener("bounds_changed",(function(){e.setBounds(a.getBounds())}));var o=[];e.addListener("places_changed",(function(){var t=e.getPlaces();if(0!=t.length){o.forEach((function(e){e.setMap(null)})),o=[];var r=new google.maps.LatLngBounds;t.forEach((function(e){if(e.geometry&&e.geometry.location){var t={url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};o.push(new google.maps.Marker({map:a,icon:t,title:e.name,position:e.geometry.location})),e.geometry.viewport?r.union(e.geometry.viewport):r.extend(e.geometry.location),M.state.order.addr_lat=e.geometry.location.lat(),M.state.order.addr_lng=e.geometry.location.lng(),console.log(e.geometry.location)}else console.log("Returned place contains no geometry")})),a.fitBounds(r)}})),t.focus()},function(e,t,a,o){if(document.getElementById(e))"function"==typeof o&&o.call();else switch(t){case"js":var r=document.createElement("script");r.setAttribute("src",e),r.id="addon"+a,r.onload=r.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||"function"==typeof o&&o.call()},document.body.appendChild(r);break;case"css":var n=document.getElementsByTagName("head")[0],c=document.createElement("link");c.id=e,c.rel="stylesheet",c.type="text/css",c.href=e,n.appendChild(c)}}("https://maps.googleapis.com/maps/api/js?key=AIzaSyDeFSWQfA18NwUammRut5D9LkAgjkNnshQ&callback=initAutocomplete&libraries=places&v=weekly","js","10"),window.googleMapsLoaded=!0;var c='\n            <div class="ptable">\n                <label class="takeaway '.concat(settings.checkout_takeaway_field?"":"d-none",'" >\n                    <input type="checkbox" name="takeaway" class="takeaway" value="1">\n                    <div class="checkbox">\n                        <svg width="32px" height="32px" viewBox="0 0 20 20">\n                            <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>\n                            <polyline points="4 11 8 15 16 6"></polyline>\n                        </svg>\n                    </div>\n                    <span>').concat(n("Take away order"),'</span>\n                </label>\n                <div class="checkout_address_cont ').concat(settings.checkout_takeaway_address_field?"":"d-none",'">\n                    <label for="checkout_address" >').concat(n("Address"),'</label>\n                    <input type="text" value="" name="checkout_address" class="checkout_address" autocomplete="off" class="inp" size="200" pattern="" inputmode="" value="').concat(M.state.order.addr1,'" placeholder="').concat(r("Enter address"),'">\n                    <div id="checkout_map" style="min-height:260px;margin-bottom: 16px;"></div>\n                </div>\n                <div class="checkout_phone_cont ').concat(settings.checkout_takeaway_phone_field?"":"d-none",'">\n                    <label for="checkout_phone" >').concat(n("Phone number"),'</label>\n                    <input type="text" value="" name="checkout_phone" class="checkout_phone" autocomplete="off" class="inp" size="15" pattern="" value="').concat(M.state.order.phone,'" inputmode="">\n                </div>\n                <div class="checkout_table_cont ').concat(o.length>0?"d-none":"",'" >\n                    <label for="table" >').concat(n("Table number"),'</label>\n                    <input type="number" value="').concat(o,'" name="table" style="').concat(o.length>0?"display:none;":"",'" autocomplete="off" class="table" size="4" pattern="" inputmode="">\n                </div>\n                <div class="').concat(settings.checkout_notes_field?"":"d-none",'">\n                    <label for="note">').concat(n("Note"),'</label>\n                    <textarea class="note" name="note" placeholder="').concat(r("leave a note"),'"></textarea>\n                </div>\n            </div>');document.querySelector(".kUNwHA .cdialog-cnt .kp-body").innerHTML=c,document.querySelector(".kUNwHA .cdialog-cnt .ptable .table").focus(),p(".takeaway",(function(e){M.state.order.takeaway=e.currentTarget.checked,localStorage.cart=JSON.stringify(M.state.order)})),u(".checkout_phone",(function(e){M.state.order.phone=e.currentTarget.value,localStorage.QR_menu_phone=M.state.order.phone,localStorage.cart=JSON.stringify(M.state.order)})),p(".checkout_phone",(function(e){M.state.order.phone=e.currentTarget.value,localStorage.QR_menu_phone=M.state.order.phone,localStorage.cart=JSON.stringify(M.state.order)})),u(".checkout_address",(function(e){setTimeout((function(){M.state.order.addr1=document.querySelector(".checkout_address").value,localStorage.QR_menu_addr1=M.state.order.addr1,localStorage.cart=JSON.stringify(M.state.order)}),50)})),p(".checkout_address",(function(e){setTimeout((function(){M.state.order.addr1=document.querySelector(".checkout_address").value,localStorage.QR_menu_addr1=M.state.order.addr1,localStorage.cart=JSON.stringify(M.state.order)}),250)})),u(".note",(function(e){M.state.order.note=e.currentTarget.value,localStorage.cart=JSON.stringify(M.state.order)}))}},E=function(e){var t=[];try{t=JSON.parse(localStorage.orderIDs)}catch(e){}var a=Date.now()/1e3|0,o=new Date(a),r={time:a,date:o.getFullYear()+""+(o.getMonth()+1)+o.getDate(),id:e};t.push(r),localStorage.orderIDs=JSON.stringify(t)},O=function(e,t){var a="";for(var o in t.variations){var r="";for(var c in t.variations[o].list)r+=n(t.variations[o].list[c].title)+" ";a+='<div class="vars" ><b>'+n(t.variations[o].title)+"</b> <span>"+r+"</span></div> ",void 0!==t.variations[o].note&&t.variations[o].note.length>0&&(a+="<div><b>"+n("Note")+"</b> "+t.variations[o].note+"</div> ")}return'<tr><td data-id="'+t.id+'" data-title="'+n(t.title)+'" class="checkt"><div>'+n(t.title)+"</div><div>"+a+'</div></td><td class="qty">'+t.qty+'</td><td class="price"><strong>'+w(t.price)+"</strong></td></tr>"},D=function(e){switch(document.querySelector(".kUNwHA .cta-btn").style.display="flex",e){case 1:M.state.step=e,document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=n("Cart")+' <span class="price">s$0.00</span>';break;case 2:M.state.step=e,document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=n("Continue");break;case 3:M.state.step=e,document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=n("Checkout");break;case 4:M.state.step=e,document.querySelector(".kUNwHA .cta-btn .mbtn").innerHTML=n("Back to menu")}},B=function(){var e=new URLSearchParams(window.location.search);M.state.order.payment_token=e.get("payment_token")?e.get("payment_token"):"",M.state.order.table=e.get("table")?e.get("table"):M.state.order.table,M.state.order.idd=localStorage.idd,M.state.order.sid=localStorage.sid,M.state.order.aggregation=config.aggregation,M.state.order.id=void 0===M.state.order.id?b(8)+Math.floor(Date.now()):M.state.order.id,M.state.order.kid="0",M.state.order.name="qr menu",M.state.order.status="new",M.state.order.from=e.get("table")?"table "+e.get("table"):"qr menu",localStorage.lastOrder=JSON.stringify(M.state.order);var t=new Date;if(M.state.order.created_ymd=t.getUTCFullYear()+""+f(t.getUTCMonth()+1)+f(t.getUTCDate()),M.state.order.created_ym=t.getUTCFullYear()+""+f(t.getUTCMonth()+1),M.state.order.created_y=t.getUTCFullYear()+"",settings.checkout_takeaway_address_field&&M.state.order.addr1.length<5)alert(n("Please enter valid address"));else if(settings.checkout_takeaway_phone_field&&M.state.order.phone.length<5)alert(n("Please enter valid phone number"));else if("xendit"===settings.payment_method)M.state.order.payment_token.length>0?fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{order:{type:"create-order",key:"ecommerce-order",sid:localStorage.sid,data:M.state.order}}})}).then((function(e){return e.json()})).then((function(t){t.success?(e.delete("payment_token"),U(),A(n("Checking out")),E(t.order.id),M.clearCart(),x("new"),D(4)):alert("Error: "+JSON.stringify(t))})).catch((function(e){console.error("Error:",e)})):(M.state.order.price||(M.state.order.price={}),M.state.order.price.payment_method="xendit",M.state.order.origin_url=window.location.href.split("#")[0],fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{order:{type:"create-order-intent",key:"ecommerce-order",sid:localStorage.sid,data:M.state.order}}})}).then((function(e){return e.json()})).then((function(e){e.success?(console.log(e.order.id),window.location.href="https://checkout.kenzap.site/?sid="+localStorage.sid+"&id="+e.order.id):alert("Error: "+JSON.stringify(e))})).catch((function(e){console.error("Error:",e)})));else fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded",Authorization:"Bearer "+API_KEY,"Kenzap-Token":config.token,"Kenzap-Sid":localStorage.sid},body:JSON.stringify({query:{order:{type:"create-order",key:"ecommerce-order",sid:localStorage.sid,data:M.state.order}}})}).then((function(e){return e.json()})).then((function(e){e.success?(U(),A(n("Checking out")),E(e.order.id),M.clearCart(),x("new"),D(4)):alert("Error: "+JSON.stringify(e))})).catch((function(e){console.error("Error:",e)}))},I="";!function(){window.i18n=i18n;var e=new URLSearchParams(window.location.search),t="";config.available_locales.forEach((function(e,a){t+='<li data-locale="'.concat(e.locale,'" data-link="').concat(e.link,'">').concat(e.language_native,"</li>")})),document.querySelector(".lang-post").innerHTML=t;var a=function(){document.querySelector(".lang-post").style.marginTop=screen.availHeight-(document.querySelector(".lang-post").offsetHeight+200)+"px"};window.addEventListener("resize",a),window.addEventListener("orientationchange",a),a(),l(".lang-post li",(function(e){var t=e.currentTarget.dataset.link.split("?")[0]+window.location.search;window.location.href=t+(-1==t.indexOf("?")?"?no_picker=1":"&no_picker=1")})),(config.available_locales.length<2||e.get("no_picker"))&&(document.querySelector(".lang-holder").classList.add("dn"),document.querySelector("body").style.overflowY="auto",document.querySelector("body").style.height="auto");var o={products:{type:"get-products",key:"ecommerce-product",fields:["_id","img","status","price","title","cats","sdesc","ldesc","stock","discounts","variations","updated"],limit:1e3,offset:0,sortby:{field:"created",order:"ASC"}}};fetch("https://api-v1.kenzap.cloud/ecommerce/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded","Kenzap-Sid":config.sid},body:JSON.stringify({query:o})}).then((function(e){return e.json()})).then((function(e){if(e.success){products=e.products,P(),function(){D(1);try{var e=localStorage.cart;void 0===(e=e?JSON.parse(e):{created:Math.floor(Date.now()/1e3)}).items&&(e.items=[]),e.created+3600<Math.floor(Date.now()/1e3)&&(e.items=[],e.created=Math.floor(Date.now()/1e3)),M.state.order=e}catch(e){M.state.order.created=Math.floor(Date.now()/1e3),M.state.order.items=[]}localStorage.idd||(localStorage.idd=b(8)+Math.floor(Date.now())),M.refreshCheckoutButton()}(),F(),J();var t=new URLSearchParams(window.location.search);(t.get("payment_token")?t.get("payment_token"):"").length>0&&B(),document.addEventListener("scroll",Y)}else alert(n("Oops, something went wrong. Please try again."))})).catch((function(e){console.error("Error:",e)}))}(),document.addEventListener("DOMContentLoaded",(function(){config.moreButton&&(document.querySelector(".kUNwHA .cta-btn .mbtnMore").style.display="flex",document.querySelector(".kUNwHA .cta-btn .mbtnMore").addEventListener("click",(function(e){x("")})))}));var P=function(){var e=new URLSearchParams(window.location.search);I=e.get("table")?e.get("table"):""},F=function(){localStorage.sid=config.sid,function(){var e,t=settings.categories.split("\n"),o="",r="",c="",i=a(t);try{for(i.s();!(e=i.n()).done;){var s=e.value.split("|"),d=s[0].trim(),l=null==s[1]?"":s[1].trim();o+='<div class="slide" data-cat="'+d+'" data-href="'+q(d)+'"><a data-cat="'+d+'" href="#'+q(d)+'" class=" cl">'+n(d)+"</a></div>";var u=function(e){if(products[e].id=products[e]._id,void 0===products[e].cats)return"continue";if(null==products[e].cats)return"continue";if(!products[e].cats.includes(d))return"continue";var t;if(products[e].img[0]||"true"==products[e].img[0]){var a=new Image;a._id=products[e]._id,a.updated=products[e].updated,(t=a).onload=function(){document.querySelector(".kUNwHA .kenzap-row[data-id='"+t._id+"'] img").setAttribute("src",t.src)},t.src=m+"/S"+localStorage.sid+"/product-"+t._id+"-1-250.jpeg?"+t.updated}var o="";products[e].stock&&products[e].stock.management&&0==parseInt(products[e].stock.qty)&&(o=n("sold out"));var i=M.state.order.items.find((function(t){return t.id==products[e]._id})),s=void 0===i?"":i.qty,u="";c!=d&&(u='<h2 id="'+q(c=d)+'" data-cat="'+d+'">'+n(c)+'</h2><p class="subnote">'+n(l)+"</p>"),r+='\n            <div class="kenzap-row" data-nostock="'.concat(!!o,'" data-index="').concat(e,'" data-id="').concat(products[e]._id,'">\n                ').concat(u,'\n                <div class="info-box">\n                    <div class="kenzap-col-7">\n                        <div class="kp-content">\n                            <h3><span class="tag ctag">').concat(s,"</span>").concat(n(products[e].title),"</h3>\n                            <p>").concat(n(products[e].sdesc),"</p>\n                            ").concat(o?'<span class="tag ptag">'+n("sold out")+"</span>":h(products[e]).html,'\n                        </div>\n                    </div>\n                    <div class="kenzap-col-5">\n                        <div class="kp-img">\n                            <img src="').concat("https://cdn.kenzap.com/loading.png",'" alt="').concat(products[e].title,'">\n                            <div class="kp-info">').concat(o,"</div>\n                        </div>\n                    </div>\n                </div>\n            </div> ")};for(var p in products)u(p)}}catch(e){i.e(e)}finally{i.f()}var y=document.querySelector(".kUNwHA .slideset"),f=document.querySelector(".kUNwHA .kenzap-container");""==r?f.innerHTML=n("Please add products and specify categories first"):(y.innerHTML=o,f.innerHTML=r)}(),j(),function(){var t,o=a(document.querySelectorAll(".kUNwHA .kenzap-row"));try{for(o.s();!(t=o.n()).done;)t.value.addEventListener("click",(function(t){if("true"==t.currentTarget.dataset.nostock)return alert(n("Product sold out")),!1;var o=t.currentTarget.dataset.index;M.state.index=o;var c=products[o].id,i=document.querySelector(".kUNwHA .mdialog-cnt");N.last_state=N.state,M.state.total=0,M.state.count=0;var s=M.state.order.items.find((function(e){return e.id==c}));M.state.product=void 0===s?{id:products[o].id,title:products[o].title,sdesc:products[o].sdesc,cats:products[o].cats,discounts:products[o].discounts?products[o].discounts:[],index:o,qty:0,note:"",variations:[]}:s,M.state.product.type=0==M.state.product.qty?"new":"update",document.querySelector("body").classList.add("kp-modal"),history.pushState({pageID:"feed"},"Feed",window.location.pathname+window.location.search+"#editing"),L();var d=products[o].img[0]?m+"/S"+localStorage.sid+"/product-"+products[o]._id+"-1-250.jpeg?"+products[o].updated:"https://cdn.kenzap.com/loading.png";document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-body > h2").innerHTML=n(M.state.product.title),document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-body > p").innerHTML=n(M.state.product.sdesc),document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-img img").setAttribute("src",d),document.querySelector(".kUNwHA .mdialog .qty").value=M.state.count=M.state.product.qty,document.querySelector(".kUNwHA .mdialog .kp-note textarea").value=M.state.product.note,document.querySelector(".kUNwHA .mdialog .kp-note textarea").setAttribute("placeholder",r("leave a note for a kitchen"));var l,u=new Image;u._id=products[o]._id,u.updated=products[o].updated,(l=u).onload=function(){document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-img img").setAttribute("src",l.src)},l.src=m+"/S"+localStorage.sid+"/product-"+l._id+"-1-500.jpeg?"+l.updated;var p="";if(e("undefined"!==products[o].variations))for(var y in products[o].variations){var f="";for(var g in"checkbox"==products[o].variations[y].type&&(f="check"),"radio"==products[o].variations[y].type&&(f="radio"),void 0===M.state.product.variations[y]&&(M.state.product.variations[y]={title:products[o].variations[y].title,required:products[o].variations[y].required,allow:"1"!=products[o].variations[y].required}),p+="                <h3>"+n(products[o].variations[y].title)+("1"==products[o].variations[y].required?' <span class="tag">'+n("required")+"</span>":"")+'</h3>                <div class="kp-'+f+'">',products[o].variations[y].data){var h=!1;switch(void 0!==M.state.product.variations[y]&&void 0!==M.state.product.variations[y].list&&void 0!==M.state.product.variations[y].list["_"+g]&&(h=!0),products[o].variations[y].data[g].price=S(products[o].variations[y].data[g].price),f){case"check":p+='\n                                <label>\n                                    <input type="checkbox" data-required="'.concat(products[o].variations[y].required,'" data-indexv="').concat(y,'" data-index="').concat(g,'" data-title="').concat(products[o].variations[y].data[g].title,'" data-price="').concat(products[o].variations[y].data[g].price,'" ').concat(h?'checked="checked"':"",'>\n                                    <div class="checkbox">\n                                        <svg width="20px" height="20px" viewBox="0 0 20 20">\n                                            <path d="M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z"></path>\n                                            <polyline points="4 11 8 15 16 6"></polyline>\n                                        </svg>\n                                    </div>\n                                    <span>').concat(n(products[o].variations[y].data[g].title),'</span>\n                                    <div class="price">+ ').concat(w(products[o].variations[y].data[g].price),"</div>\n                                </label>");break;case"radio":p+='\n                                <label>\n                                    <input type="radio" data-required="'.concat(products[o].variations[y].required,'" data-indexv="').concat(y,'" name="radio').concat(y,'" data-index="').concat(g,'" data-title="').concat(products[o].variations[y].data[g].title,'" data-price="').concat(products[o].variations[y].data[g].price,'" ').concat(h?'checked="checked"':""," />\n                                    <span>").concat(n(products[o].variations[y].data[g].title),'</span>\n                                    <div class="price">+ ').concat(w(products[o].variations[y].data[g].price),"</div>\n                                </label>")}}p+="</div>"}document.querySelector(".kUNwHA .mdialog-cnt .mdialog .kp-vars").innerHTML=p,M.refreshButton(),i.style.display="block",document.querySelector(".kUNwHA .overlay").style.display="block";var v,k=a(document.querySelectorAll(".kUNwHA .mdialog .kp-check input[type=checkbox]"));try{var b=function(){var e=v.value;e.addEventListener("change",(function(){var t=parseInt(e.dataset.indexv);M.state.product.variations[t].list={};var o,r=0,n=a(document.querySelectorAll(".kUNwHA .mdialog .kp-check input[type=checkbox][data-indexv='"+t+"']"));try{for(n.s();!(o=n.n()).done;){var c=o.value;"1"==e.dataset.required?r&&(M.state.product.variations[t].allow=!0):M.state.product.variations[t].allow=!0,c.checked&&(M.state.product.variations[t].list["_"+c.dataset.index]={title:c.dataset.title,price:parseFloat(c.dataset.price)},r+=1)}}catch(e){n.e(e)}finally{n.f()}M.refreshButton()}))};for(k.s();!(v=k.n()).done;)b()}catch(e){k.e(e)}finally{k.f()}var q,_=a(document.querySelectorAll(".kUNwHA .mdialog .kp-radio input[type=radio]"));try{var A=function(){var e=q.value;e.addEventListener("change",(function(){var t=parseInt(e.dataset.indexv);M.state.product.variations[t].list={};var o,r=0,n=a(document.querySelectorAll(".kUNwHA .mdialog .kp-radio input[type=radio][data-indexv='"+t+"']"));try{for(n.s();!(o=n.n()).done;){var c=o.value;c.checked&&(M.state.product.variations[t].list["_"+c.dataset.index]={title:c.dataset.title,price:parseFloat(c.dataset.price)},r+=1),"1"==e.dataset.required?r&&(M.state.product.variations[t].allow=!0):M.state.product.variations[t].allow=!0}}catch(e){n.e(e)}finally{n.f()}M.refreshButton()}))};for(_.s();!(q=_.n()).done;)A()}catch(e){_.e(e)}finally{_.f()}}))}catch(e){o.e(e)}finally{o.f()}var c=document.querySelector(".kUNwHA .mdialog .qty");document.querySelector(".kUNwHA .mdialog .plus").addEventListener("click",(function(e){M.state.count<config.cart.max_addition&&(M.state.count+=1),c.value=M.state.count,M.refreshButton(),_()})),document.querySelector(".kUNwHA .mdialog .minus").addEventListener("click",(function(e){M.state.count>0&&(M.state.count-=1),c.value=M.state.count,M.refreshButton(),_()})),document.querySelector(".kUNwHA .mdialog .add").addEventListener("click",(function(e){e.currentTarget.parentNode.classList.contains("dis")?alert(n("Please select required fields")):(M.addToCart(),U(),A(n("Cart updated")),_())}))}(),function(){var e,t=a(document.querySelectorAll(".kUNwHA .slideset .slide"));try{for(t.s();!(e=t.n()).done;){var o=e.value,r=o.offsetLeft;N.offsets[o.dataset.href]=r,o.addEventListener("click",(function(e){document.documentElement.scrollTop,setTimeout((function(e){var t,o=a(document.querySelectorAll(".kUNwHA .slide"));try{for(o.s();!(t=o.n()).done;)t.value.classList.remove("active")}catch(e){o.e(e)}finally{o.f()}e.classList.add("active")}),250,this)}))}}catch(e){t.e(e)}finally{t.f()}}(),console.log(M.state.step),document.querySelector(".kUNwHA .cta-btn .mbtn").addEventListener("click",(function(e){if(0!=M.state.order.total||1!=M.state.step&&2!=M.state.step){if(document.querySelector("body").classList.add("kp-modal"),history.pushState({pageID:"feed"},"Feed",window.location.pathname+window.location.search+"#checkout"),L(),1==M.state.step)return R(),void D(2);if(2==M.state.step)return M.loadCheckoutFields(),void D(3);if(3==M.state.step){if("2"==config.fast_checkout)return void B();document.querySelector(".kUNwHA .cdialog-cnt").style.display="none",U();var t=config.domain;return-1==t.indexOf("checkout")&&(t+=(-1==t.indexOf("?")?"?":"&")+"checkout=1"),window.location.href="https://auth.kenzap.com/?app="+y+"&redirect="+encodeURIComponent(t),document.querySelector(".kUNwHA .overlay").style.display="block",void(document.querySelector(".kUNwHA .overlay .loader").style.display="block")}4!=M.state.step||U()}else A(n("Cart is empty"))}))},j=function(){document.querySelector(".kUNwHA .mdialog .close").addEventListener("click",(function(e){U()})),document.querySelector(".kUNwHA .cdialog .close").addEventListener("click",(function(e){document.querySelector(".kUNwHA .cdialog-cnt").style.display="none",D(1),U()})),window.addEventListener("resize",L),window.addEventListener("orientationchange",L),window.addEventListener("hashchange",(function(e){if(document.querySelector("body").classList.contains("kp-modal"))return e.preventDefault(),U(),!1}))},R=function e(){var t=document.querySelector(".kUNwHA .cdialog-cnt");L(),t.style.display="block",document.querySelector(".kUNwHA .overlay").style.display="block";var o='\n        <table class="cart-table">\n\n            <tr><th><div class="prod me-1 me-sm-3">'.concat(n("Product"),'</div></th><th class="qty"><div class="me-1 me-sm-3">').concat(n("Qty"),'</div></th><th class="price"><div class="me-1 me-sm-3">').concat(n("Total"),"</div></th><th></th></tr>");for(var r in M.state.order.items)o+=O("cart",M.state.order.items[r]);o+=g("checkout",M.state.order.items).html,o+="\n        </table>",t.querySelector(".kUNwHA .cdialog-cnt .kp-body").innerHTML=o;var c,i=a(t.querySelectorAll(".kUNwHA .cdialog-cnt .kp-body .checkt"));try{for(i.s();!(c=i.n()).done;){c.value.addEventListener("click",(function(t){if(confirm("Remove "+t.currentTarget.dataset.title+"?")){if(document.querySelector(".kUNwHA .kenzap-row[data-id='"+t.currentTarget.dataset.id+"'] .ctag")&&(document.querySelector(".kUNwHA .kenzap-row[data-id='"+t.currentTarget.dataset.id+"'] .ctag").innerHTML=""),M.removeFromCart(t.currentTarget.dataset.id),M.refreshCheckoutButton(),0==Object.keys(M.state.order.items).length)return D(1),void U();e(),D(2)}}))}}catch(e){i.e(e)}finally{i.f()}},J=function(e,t){var a=new URLSearchParams(window.location.search),o=a.get("ott")?a.get("ott"):"",r=new URLSearchParams;r.append("cmd","get_state"),r.append("app",y),r.append("ott",o),r.append("token",v("kenzap_token")),config.token=v("kenzap_token"),fetch("https://api-v1.kenzap.cloud/auth/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:r}).then((function(e){return e.json()})).then((function(e){(a.get("checkout")?a.get("checkout"):"")&&(e.success?(e.token&&(config.token=e.token,function(e,t,a){var o="";if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3),o=";expires="+r.toUTCString()}document.cookie=e+"="+(escape(t)||"")+o+";path=/"}("kenzap_token",e.token,1),console.log("setting up token")),M.state.order.kid=e.kid,M.state.order.name=e.name,M.state.order.from=I+" - "+e.name,M.state.order.status="new",B()):alert(n("Oops, something went wrong. Please try checking out again.")))})).catch((function(e){console.error("Error:",e)}))},Y=function(e){var t=document.querySelectorAll(".kUNwHA .kenzap-row h2"),o=0,r=0;N.state=document.documentElement.scrollTop;var n,c=a(t);try{for(c.s();!(n=c.n()).done;){var i=n.value;r=i.offsetTop-document.documentElement.scrollTop,N.direction="down",r<0&&o>r&&(r=o,N.el_id=i.id),o=r}}catch(e){c.e(e)}finally{c.f()}if(N.state_prev!=N.state&&(N.state_prev=N.state),""!=N.el_id&&!document.querySelector("body").classList.contains("kp-modal")){var s=document.querySelector(".kUNwHA .cata-sub-nav");N.timer&&clearTimeout(N.timer),N.timer=setTimeout((function(e){s.scrollTo({left:N.offsets[e],behavior:"smooth"});var t,o=a(document.querySelectorAll(".kUNwHA .slide"));try{for(o.s();!(t=o.n()).done;){t.value.classList.remove("active")}}catch(e){o.e(e)}finally{o.f()}document.querySelector(".kUNwHA [data-href='"+e+"']").classList.add("active")}),200,N.el_id)}N.el_id=""}}();
