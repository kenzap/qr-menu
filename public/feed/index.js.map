{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_helpers.js","../../src/_/_menu.js","../../src/_/_account.js","../../src/_/_checkout.js","../../src/feed/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __init = (locale) => {\n\n    if(typeof locale !== 'object' || locale === null) return;\n\n    if(typeof window.i18n === 'undefined') window.i18n = {};\n\n    if(typeof window.i18n.state === 'undefined') window.i18n.state = { locale: {} };\n   \n    window.i18n.state.locale = locale;\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nexport const __ = (text, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n\n\n    return match(window.i18n.state.locale.values[text], p);\n}\n\n/*\n * Translates string based on preloaded i18n locale values.\n * \n * @param text {String} text to translate\n * @param cb {Function} callback function to escape text variable\n * @param p {String} list of parameters, to be replaced with %1$, %2$..\n * @returns {String} - text\n */\nconst __esc = (text, cb, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(typeof window.i18n === 'undefined') return match(text, p);\n    if(window.i18n.state.locale.values[text] === undefined) return match(text, p);\n\n    return match(cb(window.i18n.state.locale.values[text]), p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const attr = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __attr = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Removes special characters `<`, `>`, `\"`, `'` from the link.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const src = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[<>'\"]/g, tag => (\n        {\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n    \n}\n\n/*\n * Converts special characters `<`, `>`, `\"`, `'` from the link and does translation\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __src = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[<>'\"]/g, tag => (\n            {\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities.\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const html = (text) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    return text.replace(/[&<>'\"]/g, tag => (\n        {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            \"'\": '&apos;',\n            '\"': '&quot;'\n        } [tag]));\n}\n\n/*\n * Converts special characters `&`, `<`, `>`, `\"`, `'` to HTML entities and does translations\n * \n * @param text {String}  text\n * @returns {String} - text\n */\nexport const __html = (text, ...p) => {\n\n    text = String(text);\n\n    if(text.length === 0){\n\t\treturn '';\n\t}\n\n    let cb = (text) => {\n\n        return text.replace(/[&<>'\"]/g, tag => (\n            {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                \"'\": '&apos;',\n                '\"': '&quot;'\n            } [tag]));\n    }\n\n    return __esc(text, cb, ...p);\n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries.\n * @param {object} headers\n */\n export const H = () => {\n\n    return {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n        'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n        'Kenzap-Header': checkHeader(),\n        'Kenzap-Token': getCookie('kenzap_token'),\n        'Kenzap-Sid': spaceID()\n    }\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n * @deprecated\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center\" style=\"z-index:10000;\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","import { __attr, __html } from '@kenzap/k-cloud';\nexport const CDN = 'https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com';\nexport const appID = '66432108790002';\n\nexport const languages = [\n    { code : 'ab', name : 'Abkhazian' },\n    { code : 'aa', name : 'Afar' },\n    { code : 'af', name : 'Afrikaans' },\n    { code : 'ak', name : 'Akan' },\n    { code : 'sq', name : 'Albanian' },\n    { code : 'am', name : 'Amharic' },\n    { code : 'ar', name : 'Arabic' },\n    { code : 'an', name : 'Aragonese' },\n    { code : 'hy', name : 'Armenian' },\n    { code : 'as', name : 'Assamese' },\n    { code : 'av', name : 'Avaric' },\n    { code : 'ae', name : 'Avestan' },\n    { code : 'ay', name : 'Aymara' },\n    { code : 'az', name : 'Azerbaijani' },\n    { code : 'bm', name : 'Bambara' },\n    { code : 'ba', name : 'Bashkir' },\n    { code : 'eu', name : 'Basque' },\n    { code : 'be', name : 'Belarusian' },\n    { code : 'bn', name : 'Bengali' },\n    { code : 'bh', name : 'Bihari languages' },\n    { code : 'bi', name : 'Bislama' },\n    { code : 'bs', name : 'Bosnian' },\n    { code : 'br', name : 'Breton' },\n    { code : 'bg', name : 'Bulgarian' },\n    { code : 'my', name : 'Burmese' },\n    { code : 'ca', name : 'Catalan, Valencian' },\n    { code : 'km', name : 'Central Khmer' },\n    { code : 'ch', name : 'Chamorro' },\n    { code : 'ce', name : 'Chechen' },\n    { code : 'ny', name : 'Chichewa, Chewa, Nyanja' },\n    { code : 'zh', name : 'Chinese', native : '简体中文' },\n    { code : 'cu', name : 'Church Slavonic, Old Bulgarian, Old Church Slavonic' },\n    { code : 'cv', name : 'Chuvash' },\n    { code : 'kw', name : 'Cornish' },\n    { code : 'co', name : 'Corsican' },\n    { code : 'cr', name : 'Cree' },\n    { code : 'hr', name : 'Croatian' },\n    { code : 'cs', name : 'Czech' },\n    { code : 'da', name : 'Danish' },\n    { code : 'dv', name : 'Divehi, Dhivehi, Maldivian' },\n    { code : 'nl', name : 'Dutch, Flemish' },\n    { code : 'dz', name : 'Dzongkha' },\n    { code : 'en', name : 'English', native : 'English' },\n    { code : 'eo', name : 'Esperanto' },\n    { code : 'et', name : 'Estonian' },\n    { code : 'ee', name : 'Ewe' },\n    { code : 'fo', name : 'Faroese' },\n    { code : 'fj', name : 'Fijian' },\n    { code : 'fi', name : 'Finnish' },\n    { code : 'fr', name : 'French' },\n    { code : 'ff', name : 'Fulah' },\n    { code : 'gd', name : 'Gaelic, Scottish Gaelic' },\n    { code : 'gl', name : 'Galician' },\n    { code : 'lg', name : 'Ganda' },\n    { code : 'ka', name : 'Georgian' },\n    { code : 'de', name : 'German' },\n    { code : 'ki', name : 'Gikuyu, Kikuyu' },\n    { code : 'el', name : 'Greek (Modern)' },\n    { code : 'kl', name : 'Greenlandic, Kalaallisut' },\n    { code : 'gn', name : 'Guarani' },\n    { code : 'gu', name : 'Gujarati' },\n    { code : 'ht', name : 'Haitian, Haitian Creole' },\n    { code : 'ha', name : 'Hausa' },\n    { code : 'he', name : 'Hebrew' },\n    { code : 'hz', name : 'Herero' },\n    { code : 'hi', name : 'Hindi' },\n    { code : 'ho', name : 'Hiri Motu' },\n    { code : 'hu', name : 'Hungarian' },\n    { code : 'is', name : 'Icelandic' },\n    { code : 'io', name : 'Ido' },\n    { code : 'ig', name : 'Igbo' },\n    { code : 'id', name : 'Indonesian' },\n    { code : 'ia', name : 'Interlingua (International Auxiliary Language Association)' },\n    { code : 'ie', name : 'Interlingue' },\n    { code : 'iu', name : 'Inuktitut' },\n    { code : 'ik', name : 'Inupiaq' },\n    { code : 'ga', name : 'Irish' },\n    { code : 'it', name : 'Italian' },\n    { code : 'ja', name : 'Japanese' },\n    { code : 'jv', name : 'Javanese' },\n    { code : 'kn', name : 'Kannada' },\n    { code : 'kr', name : 'Kanuri' },\n    { code : 'ks', name : 'Kashmiri' },\n    { code : 'kk', name : 'Kazakh' },\n    { code : 'rw', name : 'Kinyarwanda' },\n    { code : 'kv', name : 'Komi' },\n    { code : 'kg', name : 'Kongo' },\n    { code : 'ko', name : 'Korean' },\n    { code : 'kj', name : 'Kwanyama, Kuanyama' },\n    { code : 'ku', name : 'Kurdish' },\n    { code : 'ky', name : 'Kyrgyz' },\n    { code : 'lo', name : 'Lao' },\n    { code : 'la', name : 'Latin' },\n    { code : 'lv', name : 'Latvian' },\n    { code : 'lb', name : 'Letzeburgesch, Luxembourgish' },\n    { code : 'li', name : 'Limburgish, Limburgan, Limburger' },\n    { code : 'ln', name : 'Lingala' },\n    { code : 'lt', name : 'Lithuanian' },\n    { code : 'lu', name : 'Luba-Katanga' },\n    { code : 'mk', name : 'Macedonian' },\n    { code : 'mg', name : 'Malagasy' },\n    { code : 'ms', name : 'Malay' },\n    { code : 'ml', name : 'Malayalam' },\n    { code : 'mt', name : 'Maltese' },\n    { code : 'gv', name : 'Manx' },\n    { code : 'mi', name : 'Maori' },\n    { code : 'mr', name : 'Marathi' },\n    { code : 'mh', name : 'Marshallese' },\n    { code : 'ro', name : 'Moldovan, Moldavian, Romanian' },\n    { code : 'mn', name : 'Mongolian' },\n    { code : 'na', name : 'Nauru' },\n    { code : 'nv', name : 'Navajo, Navaho' },\n    { code : 'nd', name : 'Northern Ndebele' },\n    { code : 'ng', name : 'Ndonga' },\n    { code : 'ne', name : 'Nepali' },\n    { code : 'se', name : 'Northern Sami' },\n    { code : 'no', name : 'Norwegian' },\n    { code : 'nb', name : 'Norwegian Bokmål' },\n    { code : 'nn', name : 'Norwegian Nynorsk' },\n    { code : 'ii', name : 'Nuosu, Sichuan Yi' },\n    { code : 'oc', name : 'Occitan (post 1500)' },\n    { code : 'oj', name : 'Ojibwa' },\n    { code : 'or', name : 'Oriya' },\n    { code : 'om', name : 'Oromo' },\n    { code : 'os', name : 'Ossetian, Ossetic' },\n    { code : 'pi', name : 'Pali' },\n    { code : 'pa', name : 'Panjabi, Punjabi' },\n    { code : 'ps', name : 'Pashto, Pushto' },\n    { code : 'fa', name : 'Persian' },\n    { code : 'pl', name : 'Polish' },\n    { code : 'pt', name : 'Portuguese' },\n    { code : 'qu', name : 'Quechua' },\n    { code : 'rm', name : 'Romansh' },\n    { code : 'rn', name : 'Rundi' },\n    { code : 'ru', name : 'Russian' },\n    { code : 'sm', name : 'Samoan' },\n    { code : 'sg', name : 'Sango' },\n    { code : 'sa', name : 'Sanskrit' },\n    { code : 'sc', name : 'Sardinian' },\n    { code : 'sr', name : 'Serbian' },\n    { code : 'sn', name : 'Shona' },\n    { code : 'sd', name : 'Sindhi' },\n    { code : 'si', name : 'Sinhala, Sinhalese' },\n    { code : 'sk', name : 'Slovak' },\n    { code : 'sl', name : 'Slovenian' },\n    { code : 'so', name : 'Somali' },\n    { code : 'st', name : 'Sotho, Southern' },\n    { code : 'nr', name : 'South Ndebele' },\n    { code : 'es', name : 'Spanish, Castilian' },\n    { code : 'su', name : 'Sundanese' },\n    { code : 'sw', name : 'Swahili' },\n    { code : 'ss', name : 'Swati' },\n    { code : 'sv', name : 'Swedish' },\n    { code : 'tl', name : 'Tagalog' },\n    { code : 'ty', name : 'Tahitian' },\n    { code : 'tg', name : 'Tajik' },\n    { code : 'ta', name : 'Tamil' },\n    { code : 'tt', name : 'Tatar' },\n    { code : 'te', name : 'Telugu' },\n    { code : 'th', name : 'Thai' },\n    { code : 'bo', name : 'Tibetan' },\n    { code : 'ti', name : 'Tigrinya' },\n    { code : 'to', name : 'Tonga (Tonga Islands)' },\n    { code : 'ts', name : 'Tsonga' },\n    { code : 'tn', name : 'Tswana' },\n    { code : 'tr', name : 'Turkish' },\n    { code : 'tk', name : 'Turkmen' },\n    { code : 'tw', name : 'Twi' },\n    { code : 'ug', name : 'Uighur, Uyghur' },\n    { code : 'uk', name : 'Ukrainian' },\n    { code : 'ur', name : 'Urdu' },\n    { code : 'uz', name : 'Uzbek' },\n    { code : 've', name : 'Venda' },\n    { code : 'vi', name : 'Vietnamese' },\n    { code : 'vo', name : 'Volap_k' },\n    { code : 'wa', name : 'Walloon' },\n    { code : 'cy', name : 'Welsh' },\n    { code : 'fy', name : 'Western Frisian' },\n    { code : 'wo', name : 'Wolof' },\n    { code : 'xh', name : 'Xhosa' },\n    { code : 'yi', name : 'Yiddish' },\n    { code : 'yo', name : 'Yoruba' },\n    { code : 'za', name : 'Zhuang, Chuang' },\n    { code : 'zu', name : 'Zulu' }\n];\n\nexport const mt = (val) => {\n\n    return (\"\"+val).length < 2 ? \"0\"+val : val;\n}\n\nexport const getTotals = (table, items) => {\n    \n    let colspan = 0;\n    switch(table){\n        case 'checkout': colspan = 4; break;\n        case 'account': colspan = 3; break;\n    }\n\n    let html = ``;\n\n    // defaults\n    let price = { grand_total: 0, total: 0, discount_percent: 0, discount_total: 0, fee_total: 0, tax_total: 0, tax_percent: 0 };\n\n    // sub total\n    items.forEach(item => price.total += parseFloat(item.total));\n\n    // grand total\n    price.grand_total = price.total;\n\n    // subtotal\n    html += `<tr><td colspan=\"${colspan}\"><div class=\"price\" style=\"margin-top:16px;\">${ __html('Subtotal') } <b>${ priceFormat(price.total) }</b></div></td></tr>`;\n\n    // service charge\n    if(config.price.fee_calc){\n \n        price.fee_total = parseFloat((config.price.fee_percent) * price.total)/100;\n        price.fee_percent = config.price.fee_percent;\n\n        html += `<tr><td colspan=\"${colspan}\"><div class=\"price\" >${ __html(config.price.fee_display) } <b>${ priceFormat(price.fee_total) }</b></div></td></tr>`;\n\n        price.grand_total += price.fee_total;\n    }\n     \n    // tax \n    if(config.price.tax_calc){\n \n        price.tax_total = ((price.fee_total + price.total) * parseFloat(config.price.tax_percent)/100);\n        price.tax_percent = config.price.tax_percent;\n\n        html += `<tr><td colspan=\"${colspan}\"><div class=\"price \">${ config.price.tax_display } <b>${ priceFormat(price.tax_total) }</b></div></td></tr>`;\n\n        price.grand_total += price.tax_total;\n    }\n \n    // grand total\n    price.grand_total = priceNorm(price.grand_total);\n\n    html += `<tr><td colspan=\"${colspan}\"><div class=\"price \" style=\"font-size:19px;font-weight:700;\">${ __html('Total') } <b>${ priceFormat(price.grand_total) }</b></div></td></tr>`;\n   \n    return { price: price, html: html };\n}\n\nexport const getPrice = (product) => {\n\n    // price\n    let price = { html: null, priced: null };\n    price.html = '<span class=\"tag ptag\">'+priceFormat(product['price'])+'</span>';\n\n    // simple discount\n    if(product['priced']!='' && product['priced']!='undefined'){\n\n    //     console.log(\"priced\");\n    //     price.html = '<span class=\"ptagc\">'+priceFormat(product['price'])+'</span> <span class=\"tag ptag\">'+priceFormat(product['priced'])+'</span>';\n    //     price.priced = product['priced'];\n    }\n     \n    // complex discount\n    if(product['discounts']){\n\n        let discounted = false;\n\n        const d = new Date();\n        let month = mt(d.getMonth() + 1); //months from 1-12\n        let day = mt(d.getDate());\n        let year = mt(d.getFullYear());\n\n        product['discounts'].forEach(el => {\n\n            switch(el.availability){\n\n                case 'always':\n\n                   discounted = true;\n\n                break;\n                case 'weekly':\n\n                    // console.log(d.getDay());\n\n                    if(el.dow[d.getDay()-1]){ discounted = true; }else{ break; }\n\n                case 'hourly':\n                \n                    let from = new Date(month + \"/\" + day + \"/\" + year + ' ' + el.hours.from + ':00').getTime();\n                    let to = new Date(month + \"/\" + day + \"/\" + year + ' ' + el.hours.to + ':00').getTime();\n\n                    // console.log(from + \" \" + Date.now() / 1000 + \" \" + to);\n\n                    if(from >  Date.now() / 1000 | 0 > to){\n                       \n                       discounted = true;\n                    }\n\n                break;\n            }\n\n            if(discounted){\n\n                // discount type\n                if(el.type == 'percent'){\n\n                    // alert(((100-el.percent)/100));\n                    price.priced = makeNumber(product['price']) * ((100-el.percent)/100);\n\n                }else if(el.type == 'value'){\n\n                    price.priced =  el.value;\n                }\n\n                price.html = `<span class=\"ptagc\">${ priceFormat(product['price']) }</span> <span class=\"tag ptag\">${ priceFormat(price.priced) }</span>`;\n\n                if(el.note) price.html += `<div class=\"pricenote\">${ el.note }</div>`;\n            }\n            // console.log(el);\n        });\n    }\n\n    return price;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.com subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\nexport const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n    * Normalize price to keep two decimal points\n    * @public\n    */\nexport const priceNorm = function(price) {\n\n    price = makeNumber(price);\n\n    let priceF = (Math.round(parseFloat(price) * 100)/100).toFixed(2);\n    \n    return priceF;\n}\n\n\n/**\n    * Render price\n    * @public\n    */\nexport const priceFormat = function(price) {\n\n    price = makeNumber(price);\n\n    let priceF = priceNorm(price);\n    \n    switch(config.price.style){\n        case 'left': priceF = config.price.symbol + priceF; break;\n        case 'right': priceF = priceF + config.price.symbol; break;\n    }\n\n    return priceF;\n}\n\n/**\n    * Normalize number variables mostly to cover malformed data cases\n    * @public\n    */\nexport const makeNumber = function(price) {\n\n    price = price == \"\" ? 0 : price;\n\n    return price;\n}\n\n/**\n    * Generates a random string\n    * \n    * @param int length_\n    * @return string\n    */\nexport const randomString = function(length_) {\n\n    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz'.split('');\n    if (typeof length_ !== \"number\") {\n        length_ = Math.floor(Math.random() * chars.length_);\n    }\n    var str = '';\n    for (var i = 0; i < length_; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\n\n/**\n    * Convert text to url friendly slug \n    * @public\n    */\nexport const convertToSlug = function(str) {\n\n    let output = \"cat\";\n    for(let i=0; i<str.length-1; i++){\n\n        output += str.charCodeAt(i)\n    }\n\n    return output;\n    // return str\n    //     .toLowerCase()\n    //     .replace(/[^\\w ]+/g,'')\n    //     .replace(/ +/g,'-')\n    //     ;\n}\n\n/**\n    * trigger small vibration effect when user interacts with UI\n    * @public\n    */\nexport const vibrate = function(){\n\n    if (window.navigator && window.navigator.vibrate) {\n        // Vibrate once for 1 second\n        navigator.vibrate(20);\n    }\n}\n\n/**\n * Show small toast notification\n * @public\n */\nexport const toast = function(msg){\n\n    // Get the snackbar DIV\n    let t = document.querySelector(\".kUNwHA .snackbar\");\n    t.innerHTML = msg;\n    t.classList.add(\"show\");\n\n    // After 3 seconds, remove the show class from div\n    setTimeout(function(){ t.className = t.className.replace(\"show\", \"\"); }, 2200);\n}\n\n export const renderStatus = (__, status) => {\n\n    switch (status){\n\n        case 'new': return '<div class=\"badge btn-warning text-dark fw-light\">' + __html('New') + '</div>';\n        case 'processing': return '<div class=\"badge btn-warning text-dark fw-light\">' + __html('Cooking') + '</div>';\n        case 'paid': return '<div class=\"badge btn-warning text-dark fw-light\">' + __html('New') + '</div>';\n        case 'completed': return '<div class=\"badge btn-success text-dark fw-light\">' + __html('Served') + '</div>';\n        case 'canceled': return '<div class=\"badge btn-secondary text-dark fw-light\">' + __html('Canceled') + '</div>';\n        case 'refunded': return '<div class=\"badge btn-secondary text-dark fw-light\">' + __html('Refunded') + '</div>';\n        case 'failed': return '<div class=\"badge btn-secondary text-dark fw-light\">' + __html('Failed') + '</div>';\n        default: return '<div class=\"badge btn-primary text-dark fw-light\">' + __html('Processing') + '</div>';\n\n    }\n }\n\n // time elapsed since creation \n export const timeConverterAgo = (__, now, time) => {\n\n    // console.log(now + \" \" + time);\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    // console.log(now + \" \" + time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return __html('moments ago');\n    if(past < 3600) return parseInt(past / 60) + ' ' + __html('minutes ago');\n    if(past < 86400) return parseInt(past / 60 / 24) + ' ' + __html('hours ago');\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = [__html('Jan'), __html('Feb'), __html('Mar'), __html('Apr'), __html('May'), __html('Jun'), __html('Jul'), __html('Aug'), __html('Sep'), __html('Oct'), __html('Nov'), __html('Dec')];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n }\n\n/*\n* Load additional JS or CSS depencies\n*\n* @param    dep       dependecy. Ex.: hiebee.min.js \n* @param    cb        function to call after script is loaded (optional)       \n* @return \t{Boolen} \tresult status \n* \n*/\nexport const loadAddon = (dep, t, version, cb) => {\n\n    // dependency already loaded, skip\n    if(document.getElementById(dep)){ if(typeof cb === 'function') cb.call(); return; }\n\n    // detect dependency type\n    // let t = dep.split('.').slice(-1)[0];\n    // console.log(dep);\n    // console.log('loadAddon'+t);\n    switch(t){\n      case 'js':\n        \n        let js = document.createElement(\"script\");\n        js.setAttribute(\"src\", dep);\n        js.id = \"addon\"+version;\n        js.onload = js.onreadystatechange = function() {\n \n          if(!this.readyState || this.readyState == 'complete')\n            if(typeof cb === 'function') cb.call();\n        };\n        document.body.appendChild(js);\n        \n      break;\n      case 'css':\n\n        let head  = document.getElementsByTagName('head')[0];\n        let css  = document.createElement('link');\n        css.id   = dep;\n        css.rel  = 'stylesheet';\n        css.type = 'text/css';\n        css.href = dep;\n        head.appendChild(css);\n\n      break;\n    }\n}","import { __, __attr, __html } from '@kenzap/k-cloud';\nimport { getCookie, setCookie, priceFormat, convertToSlug, makeNumber, mt, getPrice, CDN, vibrate, toast } from \"../_/_helpers.js\"\nimport { cart } from \"../_/_checkout.js\"\n\n// state of scrolling menu feed and horizontal menu buttons\nexport let scroll = { state: 0, last_state: 0, state_prev: 0, fp: 0, el_id: \"\", direction: \"\", offsets: {}, timer: null };\n\n/**\n * Render menu dialog\n * @public\n */\nexport const renderMenu = () => {\n\n    let rows = settings.categories.split('\\n');\n    let html_slider = '';\n    let html_menu = '';\n    let title = '';\n\n    for(let c of rows){\n\n        // get values\n        let val = c.split('|');\n        let cat = val[0].trim();\n        let note = val[1] == null ? '' : val[1].trim();\n        // console.log(note);\n\n        // render slider\n        html_slider += '<div class=\"slide\" data-cat=\"'+cat+'\" data-href=\"'+convertToSlug(cat)+'\"><a data-cat=\"'+cat+'\" href=\"#'+convertToSlug(cat)+'\" class=\" cl\">'+__html(cat)+'</a></div>'; \n\n        // render menu\n        for(let x in products){\n\n            // centralize IDS\n            products[x].id = products[x]._id;\n\n            // skip current loop if current category not present\n            if(typeof(products[x]['cats']) === 'undefined') continue;\n            if(products[x]['cats'] == null) continue;\n            if(!products[x]['cats'].includes(cat)) continue;\n\n            // product image\n            let img = 'https://cdn.kenzap.com/loading.png';\n\n            // load image asyncronously\n            if(products[x]['img'][0] || products[x]['img'][0] == 'true'){\n\n                let imgl = new Image();\n                imgl._id = products[x]['_id'];\n                imgl.updated = products[x]['updated'];\n                (function(i){      \n                    i.onload = function () { document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+i._id+\"'] img\").setAttribute('src', i.src); }\n                    i.src = CDN + '/S'+localStorage.sid+'/product-'+i._id+'-1-250.jpeg?'+i.updated;\n                })(imgl);\n            }\n\n            // stock\n            let info = '';\n            if(products[x]['stock']) if(products[x]['stock']['management']) if(parseInt(products[x]['stock']['qty']) == 0){\n\n                info = __html('sold out');\n            } \n\n            let item_cart = cart.state.order.items.find((el) => { return el.id == products[x]['_id']; });\n\n            // let ctag = typeof(cart.state.order.items[products[x]['_id']]) === 'undefined' ? \"\" : cart.state.order.items[products[x]['_id']].qty;\n            let ctag = typeof(item_cart) === 'undefined' ? \"\" : item_cart.qty;\n            let show_heading = '';\n            if(title != cat){ title = cat; show_heading = '<h2 id=\"'+convertToSlug(title)+'\" data-cat=\"'+cat+'\">'+__html(title)+'</h2><p class=\"subnote\">'+__html(note)+'</p>'; }\n            html_menu += `\n            <div class=\"kenzap-row\" data-nostock=\"${ info ? true : false }\" data-index=\"${ x }\" data-id=\"${ products[x]['_id'] }\">\n                ${ show_heading }\n                <div class=\"info-box\">\n                    <div class=\"kenzap-col-7\">\n                        <div class=\"kp-content\">\n                            <h3><span class=\"tag ctag\">${ ctag }</span>${ __html(products[x]['title']) }</h3>\n                            <p>${ __html(products[x]['sdesc']) }</p>\n                            ${ info ? '<span class=\"tag ptag\">' + __html('sold out') + '</span>' : getPrice(products[x]).html }\n                        </div>\n                    </div>\n                    <div class=\"kenzap-col-5\">\n                        <div class=\"kp-img\">\n                            <img src=\"${ img }\" alt=\"${ products[x]['title'] }\">\n                            <div class=\"kp-info\">${ info }</div>\n                        </div>\n                    </div>\n                </div>\n            </div> `;\n        }\n    }\n\n    let slider_container = document.querySelector(\".kUNwHA .slideset\");\n    let menu_container = document.querySelector(\".kUNwHA .kenzap-container\");\n    if(html_menu==''){\n        menu_container.innerHTML = __html(\"Please add products and specify categories first\");\n    }else{\n        slider_container.innerHTML = html_slider;\n        menu_container.innerHTML = html_menu;\n    }\t\n}\n\n/**\n    * Menu horizontal slider listeners listener.\n    * @public\n    */\nexport const menuListeners = () => {\n\n    // menu row click listener\n    let row_list = document.querySelectorAll(\".kUNwHA .kenzap-row\");\n    for(const row of row_list){\n\n        row.addEventListener('click', function(e) {\n\n            // alert(e.currentTarget.dataset.nostock);\n            if(e.currentTarget.dataset.nostock == 'true'){ alert( __html('Product sold out') ); return false; }\n\n            let x = e.currentTarget.dataset.index; cart.state.index = x;\n            let product_id = products[x].id;\n            let mdialogCnt = document.querySelector(\".kUNwHA .mdialog-cnt\");\n            scroll.last_state = scroll.state;\n\n            // console.log(cart.state.order.items);\n\n            cart.state.total = 0;\n            cart.state.count = 0;\n\n            // update cart state\n            let item_cart = cart.state.order.items.find((el) => { return el.id == product_id; });\n            cart.state.product = typeof(item_cart) === 'undefined' ? {id: products[x].id, title: products[x].title, sdesc: products[x].sdesc, cats: products[x].cats, discounts: products[x].discounts ? products[x].discounts : [], index: x, qty: 0, note: \"\", variations:[] }:item_cart;\n            \n            // detect product state\n            cart.state.product.type = cart.state.product.qty == 0 ? \"new\" : \"update\";\n            \n            document.querySelector(\"body\").classList.add('kp-modal');\n            history.pushState({pageID: 'feed'}, 'Feed', window.location.pathname + window.location.search + \"#editing\");\n\n            // console.log(cart.state.product.variations);\n\n            refreshDialogView();\n\n            let src = (products[x]['img'][0]) ? CDN + '/S'+localStorage.sid+'/product-'+products[x]['_id']+'-1-250.jpeg?'+products[x]['updated'] : 'https://cdn.kenzap.com/loading.png'\n\n            // bind data to modal body\n            document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-body > h2\").innerHTML = __html(cart.state.product.title);\n            document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-body > p\").innerHTML = __html(cart.state.product.sdesc);\n            document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-img img\").setAttribute('src', src);\n            document.querySelector(\".kUNwHA .mdialog .qty\").value = cart.state.count = cart.state.product.qty;\t\n            document.querySelector(\".kUNwHA .mdialog .kp-note textarea\").value = cart.state.product.note;\t\n            document.querySelector(\".kUNwHA .mdialog .kp-note textarea\").setAttribute('placeholder', __attr('leave a note for a kitchen'));\n\n            // load image asyncronously\n            let imgl = new Image();\n            imgl._id = products[x]['_id'];\n            imgl.updated = products[x]['updated'];\n            (function(i){      \n                i.onload = function () { document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-img img\").setAttribute('src', i.src); }\n                i.src = CDN + '/S'+localStorage.sid+'/product-'+i._id+'-1-500.jpeg?'+i.updated;\n            })(imgl);\n\n            // \"variations\":[{\"title\":\"Sauce\",\"type\":\"checkbox\",\"required\":\"0\",\"data\":[{\"title\":\"Chilli\",\"price\":\"0.40\",\"cond\":\"\"},{\"title\":\"Teriyaki\",\"price\":\"1.00\",\"cond\":\"\"}]},{\"title\":\"Rice\",\"type\":\"checkbox\",\"required\":\"1\",\"data\":[{\"title\":\"rice\",\"price\":\"0.00\",\"cond\":\"\"},{\"title\":\"cdscdsc\",\"price\":\"0.00\",\"cond\":\"\"}]}]}\n            let html_vars = '';\n            if(typeof(products[x].variations !== 'undefined'))\n            for(let v in products[x].variations){\n\n                // console.log(products[x].variations[v]);\n\n                // variation type\n                let type = '';\t\n                if(products[x].variations[v].type=='checkbox') type = 'check';\n                if(products[x].variations[v].type=='radio')    type = 'radio';\n\n                // update cart state\n                if(typeof(cart.state.product.variations[v]) === 'undefined') cart.state.product.variations[v] = {title: products[x].variations[v].title, required: products[x].variations[v].required, allow: products[x].variations[v].required == '1'?false:true };\t\n\n                // struct variation\n                html_vars += '\\\n                <h3>' + __html(products[x].variations[v].title) + (products[x].variations[v].required == '1' ? ' <span class=\"tag\">'+__html('required')+'</span>':'')+'</h3>\\\n                <div class=\"kp-'+type+'\">';\n\n                // variation labels\n                for(let d in products[x].variations[v].data){\n\n                    let checked = false;\n                    // console.log(cart.state.product.variations);\n                    if(typeof(cart.state.product.variations[v]) !== 'undefined' && typeof(cart.state.product.variations[v].list) !== 'undefined' && typeof(cart.state.product.variations[v].list[\"_\"+d]) !== 'undefined'){\n\n                        checked = true;\n                        // alert(\"checked\");\n                        // checked = typeof(cart.state.product.variations[v].list[\"_\"+d]) === 'undefined' ? false : true;\n                    }\n                    \n                    // verify variation price validity\n                    products[x].variations[v].data[d]['price']= makeNumber(products[x].variations[v].data[d]['price']);\n\n                    switch(type){\n                        case 'check':\n\n                            html_vars += `\n                                <label>\n                                    <input type=\"checkbox\" data-required=\"${ products[x].variations[v].required }\" data-indexv=\"${ v }\" data-index=\"${ d }\" data-title=\"${ products[x].variations[v].data[d]['title'] }\" data-price=\"${ products[x].variations[v].data[d]['price'] }\" ${ (checked?'checked=\"checked\"':'') }>\n                                    <div class=\"checkbox\">\n                                        <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\">\n                                            <path d=\"M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z\"></path>\n                                            <polyline points=\"4 11 8 15 16 6\"></polyline>\n                                        </svg>\n                                    </div>\n                                    <span>${ __html(products[x].variations[v].data[d]['title']) }</span>\n                                    <div class=\"price\">+ ${ priceFormat(products[x].variations[v].data[d]['price']) }</div>\n                                </label>`;\n                            \n                        break;\n                        case 'radio':\n\n                            html_vars += `\n                                <label>\n                                    <input type=\"radio\" data-required=\"${ products[x].variations[v].required }\" data-indexv=\"${ v }\" name=\"radio${ v }\" data-index=\"${ d }\" data-title=\"${ products[x].variations[v].data[d]['title'] }\" data-price=\"${ products[x].variations[v].data[d]['price'] }\" ${ (checked?'checked=\"checked\"':'') } />\n                                    <span>${ __html(products[x].variations[v].data[d]['title']) }</span>\n                                    <div class=\"price\">+ ${ priceFormat(products[x].variations[v].data[d]['price']) }</div>\n                                </label>`;\n                        \n                        break;\n                    }\n                }\n\n                html_vars += '</div>';\n            }\n\n            document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-vars\").innerHTML = html_vars;\n\n            cart.refreshButton();\n            \n            mdialogCnt.style.display = \"block\";\n            document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n    \n            // checkbox listener\n            let checkbox_list = document.querySelectorAll(\".kUNwHA .mdialog .kp-check input[type=checkbox]\");\n            for(const cb of checkbox_list){\n                cb.addEventListener('change', () =>  {\n\n                    // console.log(\"call refreshButton\");\n\n                    let v = parseInt(cb.dataset.indexv);\n                    // if(typeof(cart.state.product.variations[v].list) === 'undefined') \n                    cart.state.product.variations[v].list = {};\n\n                    let count = 0;\n                    for(const cbg of document.querySelectorAll(\".kUNwHA .mdialog .kp-check input[type=checkbox][data-indexv='\"+v+\"']\")){\n\n                        // checks if this block is required and allows checkout\n                        if(cb.dataset.required==\"1\"){ if(count) cart.state.product.variations[v].allow = true; }else{ cart.state.product.variations[v].allow = true; }\n\n                        // cache selected variations\n                        if(cbg.checked){ cart.state.product.variations[v].list[\"_\"+cbg.dataset.index] = {title: cbg.dataset.title, price: parseFloat(cbg.dataset.price) }; count +=1; }\n                    }\n                    \n                    // console.log(cart.state.product.variations);\n                    cart.refreshButton();\n                });\n            }\n\n            // radio listener\n            let radio_list = document.querySelectorAll(\".kUNwHA .mdialog .kp-radio input[type=radio]\");\n            for(const cb of radio_list){\n                cb.addEventListener('change', () =>  {\n\n                    // console.log(\"call refreshButton\");\n\n                    let v = parseInt(cb.dataset.indexv);\n                    // if(typeof(cart.state.product.variations[v].list) === 'undefined') \n                    cart.state.product.variations[v].list = {};\n\n                    let count = 0;\n                    for(const rag of document.querySelectorAll(\".kUNwHA .mdialog .kp-radio input[type=radio][data-indexv='\"+v+\"']\")){\n                    \n                        // console.log(rag.dataset.price);\n\n                        // cache selected variations\n                        if(rag.checked){ cart.state.product.variations[v].list[\"_\"+rag.dataset.index] = {title: rag.dataset.title, price: parseFloat(rag.dataset.price) }; count +=1; }\n                        \n                        // checks if this block is required and allows checkout\n                        if(cb.dataset.required==\"1\"){ if(count) cart.state.product.variations[v].allow = true; }else{ cart.state.product.variations[v].allow = true; }\n                    }\n\n                    // console.log(cart.state.product.variations);\n\n                    cart.refreshButton();\n                });\n            }\n        });\n    }\n\n    // plus click listener\n    let qty = document.querySelector(\".kUNwHA .mdialog .qty\");\n    let plus = document.querySelector(\".kUNwHA .mdialog .plus\");\n    plus.addEventListener('click', function(e) {\n\n        if(cart.state.count < config.cart.max_addition) cart.state.count +=1;\n        qty.value = cart.state.count;\n        cart.refreshButton();\n        vibrate();\n    });\n    \n    // minus click listener\n    let minus = document.querySelector(\".kUNwHA .mdialog .minus\");\n    minus.addEventListener('click', function(e) {\n\n        if(cart.state.count > 0) cart.state.count -=1;\n        qty.value = cart.state.count;\n        cart.refreshButton();\n        vibrate();\n    });\n\n    // add to cart listener\n    let add = document.querySelector(\".kUNwHA .mdialog .add\");\n    add.addEventListener('click', function(e) {\n\n        if(e.currentTarget.parentNode.classList.contains(\"dis\")){ alert( __html(\"Please select required fields\") ); return; }\n\n        cart.addToCart();\n\n        // cart.resetButton(); \n        closeModal();\n        toast( __html(\"Cart updated\") );\n        vibrate();\n    });\n\n    // checkout  button listener\n    // let checkout = document.querySelector(\".kUNwHA .vadd\");\n    // checkout.addEventListener('click', function(e) {\n\n    // \tviewCheckoutModal();\n    // });\n}\n\n/**\n * Menu horizontal slider listeners.\n * @public\n */\nexport const sliderListeners = () => {\n\n    let slide_list = document.querySelectorAll(\".kUNwHA .slideset .slide\");\n    for(const slide of slide_list){\n\n        // offsetLeft\n        let scrollDiv = slide.offsetLeft;\n        scroll.offsets[slide.dataset.href] = scrollDiv;\n        slide.addEventListener('click', function(e) {\n\n            let sto = document.documentElement.scrollTop;\n            // document.documentElement.scrollTop = sto-=10;\n            setTimeout(function(el){\n\n                for (const l of document.querySelectorAll(\".kUNwHA .slide\")){ l.classList.remove(\"active\"); }\n                el.classList.add(\"active\");\n                // document.documentElement.scrollTop = sto+=10;\n            },250, this)\n        });\n    }\n}\n\n/**\n * Dialog box listeners\n * @public\n */\nexport const refreshDialogView = () => {\n\n    // body prevent scroll\n    if(document.querySelector(\"body\").classList.contains('kp-modal')){\n        document.querySelector(\"body\").style.height = '100vh';\n        document.querySelector(\"body\").style.overflowY = 'hidden';\n        document.querySelector(\".kUNwHA .scrollable\").style.height = '100vh';\n        document.querySelector(\".kUNwHA .scrollable\").style.overflowY = 'hidden';\n        document.querySelector(\".kUNwHA .mdialog-cnt\").style.height = (window.screen.availHeight-160) + \"px\";\n    }\n    // document.querySelector(\".kUNwHA .cdialog-cnt\").style.height = (window.screen.availHeight-160) + \"px\";\n}\n\n/*\n* Close product popup\n* @public\n*/\nexport const closeModal = () => {\n\n   let mdialogCnt = document.querySelector(\".kUNwHA .mdialog-cnt\");\n   mdialogCnt.style.display = \"none\";\n\n   document.querySelector(\".kUNwHA .overlay\").style.display = \"none\";\n\n   // allow body scroll\n   document.querySelector(\".kUNwHA .scrollable\").style.height = 'auto';\n   document.querySelector(\".kUNwHA .scrollable\").style.overflowY = 'scroll';\n\n   document.querySelector(\"body\").style.overflowY = 'auto';\n   document.querySelector(\"body\").style.height = 'auto';\n   // document.querySelector(\"body\").classList.remove('kp-modal');\n   setTimeout(() => { document.querySelector(\"body\").classList.remove('kp-modal'); },300);\n\n   document.documentElement.scrollTop = scroll.last_state;\n\n   let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n   cdialogCnt.style.display = \"none\";\n\n   cart.refreshCheckoutButton();\n\n   document.querySelector(\".kUNwHA .cta-btn\").style.display = \"flex\";\n\n   if (window.location.href.indexOf(\"#editing\")==-1) return;\n\n   history.pushState({pageID: 'feed'}, 'Feed', window.location.pathname + window.location.search);\n\n}","import { showLoader, hideLoader, parseApiError, getCookie, onClick, onKeyUp, onChange, __, __html, __attr } from '@kenzap/k-cloud';\nimport { priceFormat, timeConverterAgo, renderStatus, makeNumber, CDN, vibrate, getTotals, toast } from \"../_/_helpers.js\"\nimport { refreshDialogView } from \"../_/_menu.js\"\nimport { getOrderHistory, structOrderRow } from \"../_/_checkout.js\"\n\nexport let account = {\n\n    initModal: (t) => {\n\n        let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n        cdialogCnt.style.display = \"block\";\n\n        document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n        document.querySelector(\".kUNwHA .cta-btn\").style.display = \"none\";\n        document.querySelector(\"body\").classList.add('kp-modal');\n        \n        history.pushState({pageID: 'feed'}, 'Feed', window.location.pathname + window.location.search + \"#account\");\n        \n        refreshDialogView();\n\n        // generate cart table\n        let html = ``;\n\n        // call waiter header\n        if(settings.orders_call_waiter){\n\n            html = `\n                <div class=\"account\">\n                    <h3 class=\"class-waiter\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"bell\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n                    <path d=\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z\"></path>\n                    </svg>${ __html('Call waiter') } <span class=\"statusLast\"></span></h3>\n                    <p>${ __html('You can track your order from the table below.') }</p>\n                    <div class=\"lottie-cont dn\"></div>\n                    `;\n\n        // default header\n        }else{\n\n            html = `\n                <div class=\"account\">\n                    <h3 class=\"\" style=\"display:flex;\">\n                    <svg style=\"margin:4px 12px 0 0px;\" xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"30\" fill=\"currentColor\" class=\"bi bi-cart-check\" viewBox=\"0 0 16 16\">\n                    <path d=\"M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z\"/>\n                    <path d=\"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\n                    </svg>\n                    ${ __html('My Account') } <span class=\"statusLast\"></span></h3>\n                    <p>${ __html('You can track your order from the table below or click on the bell to call waiter.') }</p>\n                    <div class=\"lottie-cont dn\"></div>\n                    `;\n        }\n\n        // order just received\n        if(t == 'new'){\n            html = `\n            <div class=\"account\">\n                <h3 class=\"class-waiter\"><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"bell\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z\"></path>\n                </svg>${ __html('Call waiter') } <span class=\"statusLast\"></span></h3>\n                <p>${ __html('Thank you for placing your order. You can track your order from the table below or click on the bell to call waiter.') }</p>\n                <div class=\"lottie-cont dn\"></div>\n                `;\n        }\n\n        html += `\n            <h4>${ __html('Orders') }</h4>\n            <div class=\"orders\">`;\n\n                loadOrders(html, cdialogCnt)\n\n            html += '</div>';\n            \n        html += '</div>';\n\n        cdialogCnt.querySelector(\".kUNwHA .cdialog-cnt .kp-body\").innerHTML = html;\n\n        // call waiter listener\n        onClick('.kUNwHA .class-waiter', (e) => {\n\n            let c = confirm(__html('Call waiter?'));\n\n            if(!c) return;\n\n            document.querySelector('.kUNwHA .bell').classList.add('dn');\n\n            let urlParams = new URLSearchParams(window.location.search);\n            let table = urlParams.get('table') ? urlParams.get('table') : \"\";\n    \n            // do API query\n            fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                    'Authorization': 'Bearer ' + API_KEY,\n                    'Kenzap-Token': config.token,\n                    'Kenzap-Sid': localStorage.sid,\n                },\n                body: JSON.stringify({\n                    query: {\n                        notify: {\n                            type:       'notify',\n                            key:        'ecommerce-message',        \n                            sid:        localStorage.sid,\n                            data:       {\n                                channel:    \"waiter\",\n                                idd:        localStorage.idd,\n                                msg:        __html('table %1$ is calling!', table),\n                                color:      \"danger\"\n                            }\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n                \n                if(response.success){\n                        \n                    toast( __html(\"Calling, please wait a moment!\") );\n\n                }else{\n\n                    document.querySelector('.kUNwHA .bell').classList.remove('dn');\n                    toast( __html(\"Oops, please try again\") );\n                }\n            })\n            .catch(error => { parseApiError(error); });\n        });\n    }\n}\n\nconst loadOrders = (html, cdialogCnt) => {\n\n    let urlParams = new URLSearchParams(window.location.search);\n\n    let table = urlParams.get('table') ? urlParams.get('table') : \"\";\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/x-www-form-urlencoded',\n            'Authorization': 'Bearer ' + API_KEY,\n            'Kenzap-Token': config.token,\n            'Kenzap-Sid': localStorage.sid,\n        },\n        body: JSON.stringify({\n            query: {\n                // user: {\n                //     type:       'authenticate',\n                //     fields:     ['avatar'],\n                //     token:      getCookie('kenzap_token')\n                // },\n                // locale: {\n                //     type:       'locale',\n                //     source:      ['extension'],\n                //     key:         'ecommerce',\n                // },\n                orders: {\n                    type:       'get-orders',\n                    idd:        localStorage.idd,\n                    table:      table,\n                    fields:     ['id', '_id', 'total', 'status', 'items', 'created'],\n                    // id:         ordersQuery,\n                    // term:       term != '' ? 'idd=\\'' + term +'\\'' : '',\n                    limit:      10,\n                    // search:     {                                                           // if s is empty search query is ignored\n                    //     field: 'from',\n                    //     s: s\n                    // },\n                    sortby:     {\n                        field: 'created',\n                        order: 'DESC'\n                    }\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        // hide UI loader\n        hideLoader();\n\n        if(response.success){\n                \n            let first = true;\n            let lottie = 'cooking';\n            let ohtml = '<ul class=\"accordion\">';\n\n            if(!response.orders){ ohtml += '<li>'+__html('No orders to display yet')+'</li>'; }\n\n            for(let order of response.orders){\n\n                if(first){ document.querySelector('.statusLast').innerHTML = renderStatus(__, order.status); if(order.status=='completed'){ lottie = 'serving'; } }\n\n                ohtml += structOrders(first, order);\n\n                first = false;\n            }\n\n            switch(lottie){\n                \n                case 'cooking':\n                    document.querySelector('.account .lottie-cont').innerHTML = '<lottie-player src=\"https://assets8.lottiefiles.com/packages/lf20_fefIZO.json\" background=\"transparent\" speed=\"1\" class=\"lplayer\" style=\"width: 300px; height: auto;\" loop autoplay></lottie-player>';\n                    break;\n                case 'serving':\n                    document.querySelector('.account .lottie-cont').innerHTML = '<lottie-player src=\"https://assets9.lottiefiles.com/packages/lf20_thgy1p9c.json\" background=\"transparent\" speed=\"1\" class=\"lplayer\" style=\"width: 300px; height: auto;\" loop autoplay></lottie-player>';\n                    break;\n            }\n\n            ohtml += '</ul>';\n\n            // orders list to html\n            cdialogCnt.querySelector(\".kUNwHA .orders\").innerHTML = ohtml;\n\n            // cancel button listener\n            onClick('.kUNwHA .accordion .cancel-order', (e) => {\n\n                e.preventDefault();\n\n                if (!confirm( __html('Cancel order?') )){ return false; }\n\n                let el = e.currentTarget;\n\n                let urlParams = new URLSearchParams(window.location.search);\n\n                let table = urlParams.get('table') ? urlParams.get('table') : \"-\";\n\n                // do API query\n                fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                        'Authorization': 'Bearer ' + API_KEY,\n                        'Kenzap-Token': config.token,\n                        'Kenzap-Sid': localStorage.sid,\n                    },\n                    body: JSON.stringify({\n                        query: {\n                            status: {\n                                type:       'update-order-status',\n                                id:         el.dataset._id,\n                                status:     \"canceled\",\n                                notify:     true,\n                                data:       {\n\n                                    \"msg\": __html('table %1$ canceled order #%2$', table, el.dataset.id),\n                                    \"idd\": localStorage.idd,\n                                    \"color\": 'danger'\n\n                                }\n                            }\n                        }\n                    })\n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    // hide UI loader\n                    hideLoader();\n\n                    if(response.success){\n\n                        el.parentElement.parentElement.querySelector('.badge').innerHTML = __html('Canceled');\n\n                        toast( __html(\"Order #\"+el.dataset.id+\" canceled\") );\n\n                        el.remove();\n\n                        closeModal();\n                        \n                    }else{\n\n                        // handle sign in cases\n                        // toast( __html(\"Please make your first order\") );\n                    }\n                })\n                .catch(error => { parseApiError(error); });\n            });\n\n            // toggle listener\n            onClick('.kUNwHA .accordion .toggle', (e) => {\n\n                e.preventDefault();\n\n                if(e.currentTarget.classList.contains('active')){\n                    \n                    e.currentTarget.classList.remove('active');\n                    e.currentTarget.parentElement.querySelector('.inner').classList.remove('show');\n                    e.currentTarget.parentElement.querySelector('.plusminus').classList.remove('active');\n                }else{\n\n                    e.currentTarget.classList.add('active');\n                    e.currentTarget.parentElement.querySelector('.inner').classList.add('show');\n                    e.currentTarget.parentElement.querySelector('.plusminus').classList.add('active');\n                }\n            });\n\n            // hide cta button\n            document.querySelector(\".kUNwHA .cta-btn\").style.display = \"none\";\n\n        }else{\n\n            // handle sign in cases\n            toast( __html(\"Please make your first order\") );\n\n            closeModal();\n\n            // parseApiError(response);\n        }\n    })\n    .catch(error => { parseApiError(error); });\n}\n\n// TODO\nexport const structOrders = (first, order) => {\n\n    let html = \n    `<li>\n        <a class=\"toggle ${ first ? 'active' : '' } \" href=\"#\">\n            #${ order.id } <span class=\"timago\">${ timeConverterAgo(__, Date.now() / 1000 | 0, order.created) }</span> ${ renderStatus(__, order.status) }<div class=\"plusminus ${ first ? 'active' : '' }\"></div>\n        </a>\n        <div class=\"inner ${ first ? 'show' : '' }\">\n            <table>\n                <tr><th><div class=\"me-1 me-sm-3\">${ __html('Product') }</div></th><th class=\"qty\"><div class=\"me-1 me-sm-3\">${ __html('Qty') }</div></th><th class=\"price\"><div class=\"me-1 me-sm-3\">${ __html('Total') }</div></th><th></th></tr>`;\n                \n                for(let item in order.items){ html += structOrderRow('history', order.items[item]); } \n\n                html += getTotals('account', order.items).html;\n                \n            html += \n            `</table> \n            <div class=\"tag cancel-order ${ config.orders_cancelable == 'true' ? (order.status != 'new' ? 'dn' : '') : 'dn' }\" data-id=\"${ order.id }\" data-_id=\"${ order._id }\">${ __html('Cancel order') }</div>\n        </div>\n    </li>`;\n\n    return html;\n}\n\n/*\n* Close product popup\n* @public\n*/\nexport const closeModal = () => {\n\n   let mdialogCnt = document.querySelector(\".kUNwHA .mdialog-cnt\");\n   mdialogCnt.style.display = \"none\";\n\n   document.querySelector(\".kUNwHA .overlay\").style.display = \"none\";\n\n   // allow body scroll\n   document.querySelector(\".kUNwHA .scrollable\").style.height = 'auto';\n   document.querySelector(\".kUNwHA .scrollable\").style.overflowY = 'scroll';\n\n   document.querySelector(\"body\").style.overflowY = 'auto';\n   document.querySelector(\"body\").style.height = 'auto';\n   setTimeout(() => { document.querySelector(\"body\").classList.remove('kp-modal'); },300);\n\n   document.documentElement.scrollTop = scroll.last_state;\n\n   let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n   cdialogCnt.style.display = \"none\";\n\n   document.querySelector(\".kUNwHA .cta-btn\").style.display = \"flex\";\n\n   if(typeof cart === 'undefined') return;\n   cart.refreshCheckoutButton();\n}\n","import { __, __attr, __html, onChange, onKeyUp } from '@kenzap/k-cloud';\nimport { getCookie, setCookie, priceNorm, priceFormat, randomString, getPrice, loadAddon, mt, toast } from \"../_/_helpers.js\"\nimport { closeModal } from \"../_/_menu.js\"\nimport { account } from \"../_/_account.js\"\n\n/**\n    * Cart and checkout functions\n    * @public\n    */\nexport let cart = {\n\n    state: { total: 0, count: 0, index: 0, product: { variations: [] }, order: { step: 0 } },\n\n    resetButton: () => {\n\n        cart.state.total = 0;\n        cart.state.count = 0;\n    },\n    refreshButton: () => {\n\n        products[cart.state.index].priced = getPrice(products[cart.state.index]).priced;\n\n        // console.log(getPrice(products[cart.state.index].price).priced);\n\n        // price | get base product price\n        cart.state.product.qty = parseInt(document.querySelector(\".kUNwHA .mdialog .qty\").value);\n        cart.state.product.price = products[cart.state.index].priced ? parseFloat(products[cart.state.index].priced) : parseFloat(products[cart.state.index].price);\n\n        // get note\n        cart.state.product.note = document.querySelector(\".kUNwHA .mdialog .kp-note textarea\").value;\n\n        // price | calculate upon checkbox variations\n        let cb_count = 0;\n        let checkbox_list = document.querySelectorAll(\".kUNwHA .mdialog .kp-check input[type=checkbox]\");\n        for(const cb of checkbox_list){ if(cb.checked){ cb_count++; cart.state.product.price+=parseFloat(cb.dataset.price);  } } //console.log(\"CB: \" + parseFloat(cb.dataset.price));\n\n        // price | calculate upon radio variations\n        let ra_count = 0;\n        let radio_list = document.querySelectorAll(\".kUNwHA .mdialog .kp-radio input[type=radio]\");\n        for(const ra of radio_list){ if(ra.checked){ ra_count++; cart.state.product.price+=parseFloat(ra.dataset.price); } } //console.log(\"RA: \" + parseFloat(ra.dataset.price)); \n\n        // price | assign to button\n        cart.state.product.total = parseFloat((cart.state.product.price*cart.state.product.qty));\n        document.querySelector(\".kUNwHA .mdialog .add .price\").innerHTML = priceFormat(cart.state.product.total);\n\n        // define button state, enabled, disabled\n        let dis = false;\n        if(cart.state.product.total==0) dis = true;\n        for(let v in cart.state.product.variations){ if(cart.state.product.variations[v].allow == false) dis = true; }\n\n        // define button text\n        document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn .add\").style.background = \"\";\n        if(cart.state.product.type == 'update' && cart.state.product.qty > 0){ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn .cta\").innerHTML = __html(\"Update\"); }\n        if(cart.state.product.type == 'update' && cart.state.product.qty == 0){ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn .cta\").innerHTML = __html(\"Remove\"); if(document.querySelector(\".kUNwHA .mdialog .kp-add .btn .add\")) document.querySelector(\".kUNwHA .mdialog .kp-add .btn .add\").style.background=\"#df1960\"; dis = false; }\n        if(cart.state.product.type == 'new'){ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn .cta\").innerHTML = __html(\"Add\"); }\n\n        // to differentiate order items when orders are aggregated\n        cart.state.product.idd = localStorage.idd;\n\n        // refresh UI\n        if(dis){ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn\").classList.add(\"dis\"); }else{ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn\").classList.remove(\"dis\"); }\n    },\n    refreshCheckoutButton: () => {\n\n        // console.log(cart.state.order.items);\n        let total = 0;\n        for(let p in cart.state.order.items){\n\n            // console.log(cart.state.order.items[p].priceF);\n            total += parseFloat(cart.state.order.items[p].total);\n        }\n\n        cart.state.order.total = total;\n\n        // trigger visibility\n        if(total>0) {\n\n            document.querySelector(\"body\").classList.add(\"cbtn\");\n            \n            setBtnStep(1);\n\n            document.querySelector(\".kUNwHA .cta-btn .price\").innerHTML = priceFormat(total);\n        }else{\n            document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __html(\"cart empty\");\n            // document.querySelector(\".kUNwHA .cta-btn\").style.display = \"none\";\n            document.querySelector(\"body\").classList.remove(\"cbtn\");\n        }\n    },\n    addToCart: () => {\n\n        // remove current product from cart\n        cart.state.order.items = cart.state.order.items.filter((el) => { return el.id != cart.state.product.id; });\n\n        // any mandatory products to add\n        if(config.add_products == \"1\" && cart.state.order.items.length == 0){\n\n            config.add_products_list.trim().split('\\n').forEach((_id, i) => {\n\n                let productsF = products.filter(el=>{ return el._id == _id });\n\n                // only add if mandatory product exists in the main product list\n                if(productsF[0]){\n                    \n                    let obj = {\n                        id: productsF[0]._id,\n                        idd: localStorage.idd,\n                        index: \"-1\",\n                        note: \"\",\n                        noremove: true,\n                        price: productsF[0].price,\n                        qty: 1,\n                        sdesc: productsF[0].sdesc,\n                        title: productsF[0].title,\n                        total: productsF[0].price,\n                        type: \"new\",\n                        variations: []\n                    }\n\n                    cart.state.order.items.push(obj);\n                    \n                    console.log(\"adding mandatory product\");\n                    console.log(obj);\n                }\n            });\n        }\n        // console.log(config.add_products);\n        // console.log(cart.state.product);\n\n        // add to cart\n        cart.state.order.items.push(cart.state.product); // push(cart.state.product);\n\n        // remove from cart\n        if(cart.state.product.qty==0){ cart.removeFromCart(cart.state.product.id); }else{ document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+cart.state.product.id+\"'] .ctag\").innerHTML = cart.state.product.qty; }\n\n        // cache results\n        localStorage.cart = JSON.stringify(cart.state.order);\n\n        // setBtnStep(1);\n        cart.refreshCheckoutButton();\n        \n    },\n    removeFromCart: function(id){\n\n        cart.state.order.items = cart.state.order.items.filter((el) => { return el.id != id; });\n\n        delete cart.state.order.items[id];\n\n        if(document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+id+\"'] .ctag\")) document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+id+\"'] .ctag\").innerHTML = \"\";\n \n        // cache results\n        localStorage.cart = JSON.stringify(cart.state.order);\n    },\n    clearCart: () => {\n\n        // clear cart and refresh UI\n        for(let i in cart.state.order.items){ document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+cart.state.order.items[i].id+\"'] .ctag\").innerHTML = \"\"; }\n\n        // reset cached data\n        cart.state.order = {};\n        cart.state.order.created = Math.floor(Date.now() / 1000);\n        cart.state.order.items = [];\n\n        localStorage.cart = JSON.stringify(cart.state.order);\n\n        // refresh cart button \n        cart.refreshCheckoutButton();\n\n        // remove checkoout request from url\n        // window.history.replaceState({}, document.title, config.domain);\n        window.history.replaceState({pageID: 'feed'}, 'Feed', window.location.pathname + window.location.search);\n    },\n    loadCheckoutFields: () => {\n\n        let urlParams = new URLSearchParams(window.location.search);\n        let table = urlParams.get('table') ? urlParams.get('table') : \"\";\n\n        let autocomplete;\n        let address1Field;\n        cart.state.order.phone = localStorage.QR_menu_phone ? localStorage.QR_menu_phone : \"\";\n        cart.state.order.takeaway = settings.checkout_takeaway_field;\n        cart.state.order.addr1 = localStorage.QR_menu_addr1 ? localStorage.QR_menu_addr1 : \"\";\n        cart.state.order.note = \"\";\n\n        if(document.querySelector(\"#addon10\")){ document.querySelector(\"#addon10\").remove(); document.querySelector(\".pac-container\").remove(); }\n\n        function initAutocomplete() {\n\n            const map = new google.maps.Map(document.getElementById(\"checkout_map\"), {\n                center: { lat: -6.2309225, lng: 106.8023857 },\n                zoom: 12,\n                mapTypeId: \"roadmap\",\n                streetViewControl: false,\n                mapTypeControl: false,\n                fullscreenControl: false\n            });\n\n            address1Field = document.querySelector(\".checkout_address\");\n            // address2Field = document.querySelector(\"#address2\");\n            // postalField = document.querySelector(\"#postcode\");\n            // Create the autocomplete object, restricting the search predictions to\n            // addresses in the US and Canada.\n            // autocomplete = new google.maps.places.Autocomplete(address1Field, {\n            //     componentRestrictions: { country: [\"id\"] },\n            //     fields: [\"address_components\", \"geometry\", \"name\"],\n            //     types: [\"address\"],\n            // });\n            autocomplete = new google.maps.places.SearchBox(address1Field, {\n                componentRestrictions: { country: [\"id\"] },\n                fields: [\"address_components\", \"geometry\", \"name\"],\n                types: [\"address\"],\n            });\n\n            map.addListener(\"bounds_changed\", () => {\n                autocomplete.setBounds(map.getBounds());\n            });\n\n            let markers = [];\n\n            // Listen for the event fired when the user selects a prediction and retrieve\n            // more details for that place.\n            autocomplete.addListener(\"places_changed\", () => {\n\n                const places = autocomplete.getPlaces();\n\n                if (places.length == 0) {\n                    return;\n                }\n\n                // Clear out the old markers.\n                markers.forEach((marker) => {\n                    marker.setMap(null);\n                });\n                markers = [];\n\n                // For each place, get the icon, name and location.\n                const bounds = new google.maps.LatLngBounds();\n\n                places.forEach((place) => {\n                    if (!place.geometry || !place.geometry.location) {\n                        console.log(\"Returned place contains no geometry\");\n                        return;\n                    }\n\n                    const icon = {\n                        url: place.icon,\n                        size: new google.maps.Size(71, 71),\n                        origin: new google.maps.Point(0, 0),\n                        anchor: new google.maps.Point(17, 34),\n                        scaledSize: new google.maps.Size(25, 25),\n                    };\n\n                    // Create a marker for each place.\n                    markers.push(\n                        new google.maps.Marker({\n                            map,\n                            icon,\n                            title: place.name,\n                            position: place.geometry.location,\n                        })\n                    );\n                    \n                    if (place.geometry.viewport) {\n                        // Only geocodes have viewport.\n                        bounds.union(place.geometry.viewport);\n                    } else {\n                        bounds.extend(place.geometry.location);\n                    }\n\n                    // cart.state.order.addr1 = \n                    cart.state.order.addr_lat = place.geometry.location.lat();\n                    cart.state.order.addr_lng = place.geometry.location.lng();\n\n                    console.log(place.geometry.location);\n                });\n                map.fitBounds(bounds);\n            });\n              \n            address1Field.focus();\n        }\n\n        // if(!window.initAutocomplete){\n\n            window.initAutocomplete = initAutocomplete;\n\n            // loag google API\n            loadAddon('https://maps.googleapis.com/maps/api/js?key=AIzaSyDeFSWQfA18NwUammRut5D9LkAgjkNnshQ&callback=initAutocomplete&libraries=places&v=weekly', 'js', '10'); \n        // }\n\n        window.googleMapsLoaded = true;\n\n        // console.log(settings)\n\n        // view contents\n        let html = `\n            <div class=\"ptable\">\n                <label class=\"takeaway ${ settings.checkout_takeaway_field ? '' : 'd-none' }\" >\n                    <input type=\"checkbox\" name=\"takeaway\" class=\"takeaway\" value=\"1\">\n                    <div class=\"checkbox\">\n                        <svg width=\"32px\" height=\"32px\" viewBox=\"0 0 20 20\">\n                            <path d=\"M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z\"></path>\n                            <polyline points=\"4 11 8 15 16 6\"></polyline>\n                        </svg>\n                    </div>\n                    <span>${ __html('Take away order') }</span>\n                </label>\n                <div class=\"checkout_address_cont ${ settings.checkout_takeaway_address_field ? '' : 'd-none' }\">\n                    <label for=\"checkout_address\" >${ __html('Address') }</label>\n                    <input type=\"text\" value=\"\" name=\"checkout_address\" class=\"checkout_address\" autocomplete=\"off\" class=\"inp\" size=\"200\" pattern=\"\" inputmode=\"\" value=\"${ cart.state.order.addr1 }\" placeholder=\"${ __attr('Enter address') }\">\n                    <div id=\"checkout_map\" style=\"min-height:260px;margin-bottom: 16px;\"></div>\n                </div>\n                <div class=\"checkout_phone_cont ${ settings.checkout_takeaway_phone_field ? '' : 'd-none' }\">\n                    <label for=\"checkout_phone\" >${ __html('Phone number') }</label>\n                    <input type=\"text\" value=\"\" name=\"checkout_phone\" class=\"checkout_phone\" autocomplete=\"off\" class=\"inp\" size=\"15\" pattern=\"\" value=\"${ cart.state.order.phone }\" inputmode=\"\">\n                </div>\n                <div class=\"checkout_table_cont ${ table.length > 0 ? 'd-none':'' }\" >\n                    <label for=\"table\" >${ __html('Table number') }</label>\n                    <input type=\"number\" value=\"${ table }\" name=\"table\" style=\"${ (table.length>0?'display:none;':'') }\" autocomplete=\"off\" class=\"table\" size=\"4\" pattern=\"\" inputmode=\"\">\n                </div>\n                <div class=\"${ settings.checkout_notes_field ? '' : 'd-none' }\">\n                    <label for=\"note\">${ __html('Note') }</label>\n                    <textarea class=\"note\" name=\"note\" placeholder=\"${ __attr('leave a note') }\"></textarea>\n                </div>\n            </div>`;\n\n        document.querySelector(\".kUNwHA .cdialog-cnt .kp-body\").innerHTML = html;\n        document.querySelector(\".kUNwHA .cdialog-cnt .ptable .table\").focus();\n\n        // takeaway\n        onChange('.takeaway', e => {\n\n            cart.state.order.takeaway = e.currentTarget.checked;\n\n            // cache results\n            localStorage.cart = JSON.stringify(cart.state.order);\n        });\n\n        // phone\n        onKeyUp('.checkout_phone', e => {\n\n            cart.state.order.phone = e.currentTarget.value;\n\n            localStorage.QR_menu_phone = cart.state.order.phone;\n\n            // cache results\n            localStorage.cart = JSON.stringify(cart.state.order);\n        });\n\n        // phone\n        onChange('.checkout_phone', e => {\n\n            cart.state.order.phone = e.currentTarget.value;\n\n            localStorage.QR_menu_phone = cart.state.order.phone;\n\n            // cache results\n            localStorage.cart = JSON.stringify(cart.state.order);\n        });\n        \n        // address\n        onKeyUp('.checkout_address', e => {\n\n            setTimeout(()=>{\n                \n                cart.state.order.addr1 = document.querySelector('.checkout_address').value;\n\n                localStorage.QR_menu_addr1 = cart.state.order.addr1;\n\n                // cache results\n                localStorage.cart = JSON.stringify(cart.state.order);\n            },50);\n        });\n\n        // address\n        onChange('.checkout_address', e => {\n\n            setTimeout(()=>{\n\n                cart.state.order.addr1 = document.querySelector('.checkout_address').value;\n\n                localStorage.QR_menu_addr1 = cart.state.order.addr1;\n\n                // cache results\n                localStorage.cart = JSON.stringify(cart.state.order);\n            },250);\n        });\n\n        // note\n        onKeyUp('.note', e => {\n\n            cart.state.order.note = e.currentTarget.value;\n\n            // cache results\n            localStorage.cart = JSON.stringify(cart.state.order);\n        });\n\n        // cart.state.order.addr1 = takeaway_address;\n\n        // onChange('.takeaway', e => {\n        \n        //     if(e.currentTarget.checked){\n\n        //         if(settings.checkout_takeaway_phone_field) document.querySelector(\".checkout_phone_cont\").classList.remove(\"d-none\");\n        //         if(settings.checkout_takeaway_address_field) document.querySelector(\".checkout_address_cont\").classList.remove(\"d-none\");\n        //         document.querySelector(\".checkout_table_cont\").classList.add(\"d-none\");\n        //     }else{\n\n        //         if(settings.checkout_takeaway_phone_field) document.querySelector(\".checkout_phone_cont\").classList.add(\"d-none\");\n        //         if(settings.checkout_takeaway_address_field) document.querySelector(\".checkout_address_cont\").classList.add(\"d-none\");\n        //         document.querySelector(\".checkout_table_cont\").classList.remove(\"d-none\");\n        //     }\n        // });\n    }\n}\n\n/**\n * cache locally ID of newly created orders\n * @public\n */\nexport const addOrderHistory = (id) => {\n\n    let pastOrders = [];\n    try{\n        pastOrders = JSON.parse(localStorage.orderIDs);\n    }catch(e){ }\n\n    let timestamp = Date.now() / 1000 | 0;\n    let date = new Date(timestamp);\n    let year = date.getFullYear();\n    let month = date.getMonth() + 1;\n    let day = date.getDate();\n\n    let obj = {time: timestamp, date: year + '' + month + '' + day, id: id}\n\n    pastOrders.push(obj);\n\n    localStorage.orderIDs = JSON.stringify(pastOrders)\n}\n\n/**\n * get cacheed locally ID of newly created orders\n * @public\n */\nexport const getOrderHistory = () => {\n\n    let pastOrders = [];\n    try{\n        pastOrders = JSON.parse(localStorage.orderIDs);\n    }catch(e){ }\n\n    return pastOrders;\n}\n\n/**\n * initiate Cart state\n * @public\n */\nexport const initCart = () => {\n\n    setBtnStep(1);\n    \n    try{\n        \n        let order = localStorage.cart;\n        \n        if(!order){ order = {created: Math.floor(Date.now() / 1000) }; }else{ order = JSON.parse(order); }\n        if(typeof(order.items) === 'undefined'){ order.items = []; }\n\n        // check if cart expired 1h session\n        if(order.created+3600 < Math.floor(Date.now() / 1000)) {\n\n            order.items = [];\n            order.created = Math.floor(Date.now() / 1000);\n        }\n\n        cart.state.order = order;\n        // console.log(order);\n    }catch(e){\n        \n        cart.state.order.created = Math.floor(Date.now() / 1000);\n        cart.state.order.items = [];\n    }\n\n    // make sure user ID exists\n    if(!localStorage.idd) localStorage.idd = randomString(8)+Math.floor(Date.now());\n\n    // console.log(cart.state.order);\n    cart.refreshCheckoutButton();\n}\n\nexport const structOrderRow = (type, row) => {\n \n    // parse variations\n    let vars = '';\n    for(let v in row.variations){\n\n        // parse variation list\n        let list = ''; for(let l in row.variations[v].list) list += __html(row.variations[v].list[l].title) + \" \";\n        vars += '<div class=\"vars\" ><b>' + __html(row.variations[v].title) + \"</b> <span>\" + list + \"</span></div> \";\n\n        // meal note\n        if(row.variations[v].note !== undefined && row.variations[v].note.length > 0) vars += \"<div><b>\" + __html('Note') + \"</b> \" + row.variations[v].note + \"</div> \";\n    }\n    \n    return '<tr><td data-id=\"'+row.id+'\" data-title=\"'+__html(row.title)+'\" class=\"checkt\"><div>'+__html(row.title)+'</div><div>'+vars+'</div></td><td class=\"qty\">'+row.qty+'</td><td class=\"price\"><strong>'+priceFormat(row.price)+'</strong></td></tr>';\n}\n\n/* @deprecated */\nexport const structOrderTotals = (cart, settings, order) => {\n\n    let html = ``, grand_total_temp = parseFloat(order.total);\n    \n    // defaults\n    cart.state.order.price = { grand_total: 0, total: parseFloat(order.total), discount_percent: 0, discount_total: 0, fee_total: 0, tax_total: 0, tax_percent: 0, payment_method: \"\" };\n\n    // subtotal\n    html += `<tr><td colspan=\"4\"><div class=\"price\" style=\"margin-top:16px;\">${ __html('Subtotal') } <b>${ priceFormat(cart.state.order.price.total) }</b></div></td></tr>`;\n    \n    // service charge\n    if(settings.price.fee_calc){\n\n        cart.state.order.price.fee_total = parseFloat((settings.price.fee_percent)*cart.state.order.price.total)/100;\n        cart.state.order.price.fee_percent = settings.price.fee_percent;\n        html += `<tr><td colspan=\"4\"><div class=\"price\" >${ __html(settings.price.fee_display) } <b>${ priceFormat(cart.state.order.price.fee_total) }</b></div></td></tr>`;\n\n        grand_total_temp += cart.state.order.price.fee_total;\n    }\n    \n    // tax \n    if(settings.price.tax_calc){\n\n        cart.state.order.price.tax_total = ((cart.state.order.price.fee_total + cart.state.order.price.total) * parseFloat(settings.price.tax_percent)/100);\n        cart.state.order.price.tax_percent = settings.price.tax_percent\n        html += `<tr><td colspan=\"4\"><div class=\"price \">${ settings.price.tax_display } <b>${ priceFormat(cart.state.order.price.tax_total) }</b></div></td></tr>`;\n\n        grand_total_temp += cart.state.order.price.tax_total;\n    }\n\n    // grand total\n    cart.state.order.price.grand_total = priceNorm(grand_total_temp);\n    html += `<tr><td colspan=\"4\"><div class=\"price \" style=\"font-size:19px;font-weight:700;\">${ __html('Total') } <b>${ priceFormat(cart.state.order.price.grand_total) }</b></div></td></tr>`;\n    \n    return html;\n}\n\n/**\n * set button Call to action step\n * @public\n */\nexport const setBtnStep = function(step){\n\n    document.querySelector(\".kUNwHA .cta-btn\").style.display = \"flex\";\n    switch(step){\n\n        case 1: cart.state.step = step; document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __html('Cart') + ' <span class=\"price\">s$0.00</span>'; break;\n        case 2: cart.state.step = step; document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __html('Continue'); break;\n        case 3: cart.state.step = step; document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __html('Checkout');  break;\n        case 4: cart.state.step = step; document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __html('Back to menu'); break;\n    }\n}\n\n/**\n* send checkout data to backend\n* @public\n*/\nexport const ajaxCheckout = function(){\n\n    let urlParams = new URLSearchParams(window.location.search);\n    cart.state.order.payment_token = urlParams.get('payment_token') ? urlParams.get('payment_token') : \"\";\n    cart.state.order.table = urlParams.get('table') ? urlParams.get('table') : cart.state.order.table;\n    cart.state.order.idd = localStorage.idd;\n    cart.state.order.sid = localStorage.sid;\n    cart.state.order.aggregation = config.aggregation;\n    cart.state.order.id = (typeof(cart.state.order.id) === 'undefined' ? randomString(8)+Math.floor(Date.now()) : cart.state.order.id);\n    cart.state.order.kid = \"0\";\n    cart.state.order.name = \"qr menu\";\n    cart.state.order.status = 'new';\n    cart.state.order.from = urlParams.get('table') ? \"table \" + urlParams.get('table') : \"qr menu\";\n    localStorage.lastOrder = JSON.stringify(cart.state.order);\n\n    // adding date\n    let dateObj = new Date();\n    cart.state.order['created_ymd'] = dateObj.getUTCFullYear() + '' + mt(dateObj.getUTCMonth() + 1) + '' + mt(dateObj.getUTCDate());\n    cart.state.order['created_ym'] = dateObj.getUTCFullYear() + '' + mt(dateObj.getUTCMonth() + 1);\n    cart.state.order['created_y'] = dateObj.getUTCFullYear() + '';\n\n    // console.log(cart.state.order);\n\n    // validate data\n    if(settings.checkout_takeaway_address_field && cart.state.order.addr1.length<5){ alert( __html(\"Please enter valid address\") ); return; }\n    if(settings.checkout_takeaway_phone_field && cart.state.order.phone.length<5){ alert( __html(\"Please enter valid phone number\") ); return; }\n\n    // alert(cart.state.order.addr1); return;\n\n    // determine query type\n    switch(settings.payment_method){\n\n        // create payment intent before creating the order\n        case 'xendit':\n\n            if(cart.state.order.payment_token.length>0){\n\n                // store order\n                fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                        'Authorization': 'Bearer ' + API_KEY,\n                        'Kenzap-Token': config.token,\n                        'Kenzap-Sid': localStorage.sid,\n                    },\n                    body: JSON.stringify({\n                        query: {\n                            order: {\n                                type:       'create-order',\n                                key:        'ecommerce-order',        \n                                sid:        localStorage.sid,\n                                data:       cart.state.order\n                            }\n                        }\n                    })\n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    if(response.success){\n\n                        // remove payment_token from url\n                        urlParams.delete('payment_token');\n\n                        closeModal();\n                    \n                        toast( __html(\"Checking out\") );\n\n                        // add order ids to the past orders stack\n                        addOrderHistory(response.order.id);\n                        \n                        // reset cart\n                        cart.clearCart();\n\n                        // thank you modal\n                        account.initModal('new');\n\n                        // next step\n                        setBtnStep(4);\n\n                    }else{\n\n                        // alert(\"Error occured. Please try again!\");\n                        alert('Error: '+JSON.stringify(response));\n\n                    }\n                })\n                .catch(error => {\n                    console.error('Error:', error);\n                });\n\n            }else{\n\n                if(!cart.state.order.price) cart.state.order.price = {}\n                cart.state.order.price.payment_method = \"xendit\";\n                cart.state.order.origin_url = window.location.href.split('#')[0]\n\n                // store order\n                fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                        'Authorization': 'Bearer ' + API_KEY,\n                        'Kenzap-Token': config.token,\n                        'Kenzap-Sid': localStorage.sid,\n                    },\n                    body: JSON.stringify({\n                        query: {\n                            order: {\n                                type:       'create-order-intent',\n                                key:        'ecommerce-order',        \n                                sid:        localStorage.sid,\n                                data:       cart.state.order\n                            }\n                        }\n                    })\n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    if(response.success){\n\n                        console.log(response.order.id)\n\n                        window.location.href = \"https://checkout.kenzap.site/?sid=\"+localStorage.sid+\"&id=\"+response.order.id;\n\n                        // redirect to payment page\n                        // https://checkout.kenzap.site/?sid=1002297&id=9b788b732c3cc1d0014183c9b8f7640f09fd4036\n\n                        // // add order ids to the past orders stack\n                        // addOrderHistory(response.order.id);\n                        \n                        // // reset cart\n                        // cart.clearCart();\n\n                        // // thank you modal\n                        // account.initModal('new');\n\n                        // // next step\n                        // setBtnStep(4);\n                    }else{\n\n                        // alert(\"Error occured. Please try again!\");\n                        alert('Error: '+JSON.stringify(response));\n                    }\n                })\n                .catch(error => {\n                    console.error('Error:', error);\n                });\n            }\n\n        break;\n        case 'cash':\n        default:\n\n            // store order\n            fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                    'Authorization': 'Bearer ' + API_KEY,\n                    'Kenzap-Token': config.token,\n                    'Kenzap-Sid': localStorage.sid,\n                },\n                body: JSON.stringify({\n                    query: {\n                        order: {\n                            type:       'create-order',\n                            key:        'ecommerce-order',        \n                            sid:        localStorage.sid,\n                            data:       cart.state.order\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if(response.success){\n\n                    closeModal();\n                \n                    toast( __html(\"Checking out\") );\n\n                    // add order ids to the past orders stack\n                    addOrderHistory(response.order.id);\n                    \n                    // reset cart\n                    cart.clearCart();\n\n                    // thank you modal\n                    account.initModal('new');\n\n                    // next step\n                    setBtnStep(4);\n\n                }else{\n\n                    // alert(\"Error occured. Please try again!\");\n                    alert('Error: '+JSON.stringify(response));\n\n                }\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n\n        break;\n    }\n}\n","import { onClick, __, __attr, __html, onChange } from '@kenzap/k-cloud';\nimport { getCookie, setCookie, randomString, makeNumber, CDN, appID, toast, getTotals, mt } from \"../_/_helpers.js\"\nimport { cart, setBtnStep, initCart, addOrderHistory, structOrderRow, ajaxCheckout} from \"../_/_checkout.js\"\nimport { account } from \"../_/_account.js\"\nimport { renderMenu, menuListeners, sliderListeners, refreshDialogView, closeModal, scroll } from \"../_/_menu.js\"\n\nlet table = '';\n\nconst getData = function(){\n\n    // init locales globally\n    window.i18n = i18n;\n\n    let urlParams = new URLSearchParams(window.location.search);\n    // console.log(window.i18n);\n\n    // init languages\n    let lang_html = '';\n    config.available_locales.forEach((lang, i) => { lang_html += `<li data-locale=\"${ lang.locale }\" data-link=\"${ lang.link }\">${ lang.language_native }</li>`; });\n    document.querySelector(\".lang-post\").innerHTML = lang_html;\n\n    // console.log(screen); \n    let lang_offset = () => {\n\n        // console.log(screen.availHeight + \" \" + document.querySelector('.lang-post').offsetHeight);\n        document.querySelector('.lang-post').style.marginTop = screen.availHeight - (document.querySelector('.lang-post').offsetHeight + 200) + \"px\";\n    }\n\n    window.addEventListener(\"resize\", lang_offset);\n    window.addEventListener(\"orientationchange\", lang_offset);\n    lang_offset();\n    onClick(\".lang-post li\", e => {\n\n        let link = e.currentTarget.dataset.link.split(\"?\")[0] + window.location.search;\n        window.location.href = link + ((link.indexOf(\"?\") == -1) ? \"?no_picker=1\" : \"&no_picker=1\");\n        //console.log(window.location.search);\n        //console.log(e.currentTarget.dataset.link.split(\"?\")[0] + window.location.search );\n        //console.log(e.currentTarget.dataset.link.split(\"?\")[0] + window.location.search + ((window.location.search.indexOf(\"?\") == -1) ? \"?no_picker=1\" : \"&no_picker=1\"));\n        return;\n    });\n\n    // hide language picker if only one language present\n    if(config.available_locales.length < 2 || urlParams.get('no_picker')){\n        document.querySelector(\".lang-holder\").classList.add(\"dn\");\n        document.querySelector(\"body\").style.overflowY = 'auto';\n        document.querySelector(\"body\").style.height = 'auto';\n    }\n\n    // get latest menu updates\n    const limit = 1000;\n    let offset = 0;\n\n    let query = {\n        products: {\n            type:       'get-products',\n            key:        'ecommerce-product',\n            fields:     ['_id', 'img', 'status', 'price', 'title', 'cats', 'sdesc', 'ldesc', 'stock', 'discounts', 'variations', 'updated'],\n            limit:      limit,\n            offset:     offset,\n            sortby:     {\n                            field: 'created',\n                            order: 'ASC'\n                        }\n        },\n        // settings: {\n        //     type:       'get',\n        //     key:        'qrmenu-settings',\n        //     fields:     ['mode', 'palette', 'categories'],\n        // }\n    };\n\n    // let locales = document.querySelector('#locales').value;\n    // if (locales.length == 0) locales = 'en';\n    // let localesArr = locales.split(/\\r?\\n/);\n    // for (let locale of localesArr){\n    //     query['locale_'+locale] = {\n    //         type:       'locale',\n    //         locale:     'lv',\n    //         source:      ['extension', 'data'],\n    //         key:         'ecommerce',\n    //     }\n    // }\n\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/x-www-form-urlencoded',\n            // 'Authorization': 'Bearer ' + API_KEY,\n            // 'Kenzap-Token': config.token,\n            'Kenzap-Sid': config.sid,\n        },\n        body: JSON.stringify({\n            query\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success){\n\n            products = response.products;\n                    \n            setTable();\n\n            initCart();\n        \n            getMenu();\n        \n            let cb = function(){ console.log('processed'); }\n            authUser(cb, false);\n\n            // finalize payment\n            let urlParams = new URLSearchParams(window.location.search);\n            let payment_token = urlParams.get('payment_token') ? urlParams.get('payment_token') : \"\";\n            if(payment_token.length>0) ajaxCheckout();\n        \n            document.addEventListener(\"scroll\", scrollEvents);\n            \n        }else{\n\n            alert( __html('Oops, something went wrong. Please try again.') );\n        }\n    })\n    .catch(error => {\n        console.error('Error:', error);\n    });\n}\n\ngetData();\n\n// when HTML is loaded run all required scripts to render the menu\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n\n    // is more options button enabled\n    if(config.moreButton){\n\n        document.querySelector('.kUNwHA .cta-btn .mbtnMore').style.display = \"flex\";\n        document.querySelector(\".kUNwHA .cta-btn .mbtnMore\").addEventListener('click', function(e) { account.initModal(''); });\n    }\n});\n\n/**\n * Set default table number taken from the QR-code\n * @public\n */\nconst setTable = function(){\n\n    // set current table if provided\n    let urlParams = new URLSearchParams(window.location.search);\n    table = urlParams.get('table') ? urlParams.get('table') : \"\";\n}\n\n/**\n * Init call to action button listeners\n * @public\n */\nconst btnListeners = function(){\n\n    console.log(cart.state.step);\n\n    // continue to table selection\n    document.querySelector(\".kUNwHA .cta-btn .mbtn\").addEventListener('click', function(e) {\n\n        // prevent cart opening if nothing is there\n        if(cart.state.order.total == 0 && (cart.state.step == 1 || cart.state.step == 2)){ toast( __html(\"Cart is empty\") ); return; }\n\n        document.querySelector(\"body\").classList.add('kp-modal');\n        history.pushState({ pageID: 'feed' }, 'Feed', window.location.pathname + window.location.search + \"#checkout\");\n\n        refreshDialogView();\n\n        // view cart\n        if(cart.state.step == 1){\n\n            viewCheckoutModal();\n            setBtnStep(2);\n            return;\n        }\n        \n        // pick table number view\n        if(cart.state.step == 2){\n            \n            // do fast checkout\n            // if(config.fast_checkout == \"2\"){\n\n            //     let urlParams = new URLSearchParams(window.location.search);\n            //     cart.state.order.kid = \"0\";\n            //     cart.state.order.name = \"dine-in\";\n            //     cart.state.order.from = urlParams.get('table') ? \"table \" + urlParams.get('table') : \"dine-in\";\n            //     cart.state.order.status = 'new';\n\n            //     closeModal();\n                \n            //     toast( __html(\"Checking out\") );\n\n            //     // DO CHECKOUT\n            //     // cb.call();\n            //     ajaxCheckout();\n\n            //     return;\n            // }\n\n            cart.loadCheckoutFields();\n\n            // next step\n            setBtnStep(3);\n\n            return;\n        }\n\n        // finalize checkout\n        if(cart.state.step == 3){\n\n            // validate input field\n            // let table = document.querySelector(\".kUNwHA .cdialog-cnt .ptable .table\").value;\n            // let note = document.querySelector(\".kUNwHA .cdialog-cnt .ptable .note\").value;\n            // let takeaway = document.querySelector(\".kUNwHA .ptable input.takeaway\").checked;\n            // let takeaway_phone = document.querySelector(\".kUNwHA .ptable .checkout_phone\").value;\n            // let takeaway_address = document.querySelector(\".kUNwHA .ptable .checkout_address\").value;\n\n            // take away\n            // if(takeaway){\n\n            //     // checkout phone\n            //     if(settings.checkout_takeaway_phone_field && takeaway_phone.length<5){ alert( __html(\"Please enter valid phone number\") ); return; }\n\n            //     //checkout address\n            //     if(settings.checkout_takeaway_address_field && takeaway_address.length<10){ alert( __html(\"Please enter valid address\") ); return; }\n            // }else{\n\n            //     // checkout table number\n            //     if(table==\"\"){ alert( __html(\"Please enter table number\") ); return; }\n            // }\n\n            // get note\n            // cart.state.order.table = table;\n            // cart.state.order.note = note;\n            // cart.state.order.takeaway = takeaway;\n\n            // cache data\n            // localStorage.cart = JSON.stringify(cart.state.order);\n\n            // do fast checkout\n            if(config.fast_checkout == \"2\"){\n\n                // let urlParams = new URLSearchParams(window.location.search);\n                // cart.state.order.kid = \"0\";\n                // cart.state.order.name = \"qr menu\";\n                // cart.state.order.from = urlParams.get('table') ? \"table \" + urlParams.get('table') : \"qr menu\";\n                // cart.state.order.from += takeaway ? \" / take away\":\"\";\n                // cart.state.order.takeaway = takeaway ? \"take away\":\"dine-in\";\n                // cart.state.order.phone = takeaway_phone;\n                // cart.state.order.addr1 = takeaway_address;\n                // cart.state.order.status = 'new';\n                // if(takeaway) table = \"\"\n\n                // closeModal();\n                \n                // toast( __html(\"Checking out\") );\n\n                // DO CHECKOUT\n                // cb.call();\n                ajaxCheckout();\n\n                return;\n            }\n\n            // close checkout modal\n            let mdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n            mdialogCnt.style.display = \"none\";\n\n            // hide button\n            // document.querySelector(\".kUNwHA .cta-btn\").style.display = \"none\";\n\n            // restore body scrolling params \n            closeModal();\n            \n            // send order to backend\n            // let cb = function(){ console.log('processed'); }\n            // authUser(cb, true);\n \n            // auth user to finish checkout\n            let origin = config.domain;\n            if(origin.indexOf('checkout')==-1) origin += (origin.indexOf('?')==-1 ? '?':'&')+'checkout=1';\n            // alert('https://auth.kenzap.com/?app='+appID+'&redirect='+encodeURIComponent(origin));\n\n            // TODO url redirect problem\n            window.location.href = 'https://auth.kenzap.com/?app='+appID+'&redirect='+encodeURIComponent(origin);\n            \n            document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n            document.querySelector(\".kUNwHA .overlay .loader\").style.display = \"block\";\n\n            return;\n        }\n\n        // offer sign in\n        if(cart.state.step == 4){\n\n            // restore body scrolling params\n            closeModal();\n\n            // window.location.href = 'https://auth.kenzap.com/?redirect=https%3A%2F%2Faccount.kenzap.com%2F%3Flauncher%3Dmenu-orders&idd=' + localStorage.idd;\n            return;\n        }\n    });\n}\n\n/**\n * Gets menu data\n * @public\n */\nconst getMenu = function(){\n\n    localStorage.sid = config.sid;\n\n    renderMenu();\n\n    dialogListeners();\n\n    menuListeners();\n\n    sliderListeners();\n\n    btnListeners();\n}\n\n/**\n * Dialog box listeners\n * @public\n */\nconst dialogListeners = function(){\n\n    let close = document.querySelector(\".kUNwHA .mdialog .close\");\n    close.addEventListener('click', function(e) {\n\n        closeModal();\n    });\n\n    let close2 = document.querySelector(\".kUNwHA .cdialog .close\");\n    close2.addEventListener('click', function(e) {\n\n        let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n        cdialogCnt.style.display = \"none\";\n\n        setBtnStep(1);\n\n        closeModal();\n    });\n\n    window.addEventListener(\"resize\", refreshDialogView);\n    window.addEventListener(\"orientationchange\", refreshDialogView);\n\n    // android back pressed\n    window.addEventListener(\"hashchange\", function(e) {\n\n        if(document.querySelector('body').classList.contains('kp-modal')){\n\n            e.preventDefault();\n\n            closeModal();\n\n            return false;\n        }\n    });\n}\n\n/**\n    * view checkout modal\n    * @public\n    */\nconst viewCheckoutModal = function(){\n\n    let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n\n    refreshDialogView();\n\n    cdialogCnt.style.display = \"block\";\n    document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n\n    let html = `\n        <table class=\"cart-table\">\n\n            <tr><th><div class=\"prod me-1 me-sm-3\">${ __html('Product') }</div></th><th class=\"qty\"><div class=\"me-1 me-sm-3\">${ __html('Qty') }</div></th><th class=\"price\"><div class=\"me-1 me-sm-3\">${ __html('Total') }</div></th><th></th></tr>`;\n            for(let p in cart.state.order.items){ html += structOrderRow('cart', cart.state.order.items[p]); }\n\n            html += getTotals('checkout', cart.state.order.items).html;\n\n    html += `\n        </table>`;\n    \n\n    cdialogCnt.querySelector(\".kUNwHA .cdialog-cnt .kp-body\").innerHTML = html;\n\n    // remove item from cart\n    for(const td of cdialogCnt.querySelectorAll(\".kUNwHA .cdialog-cnt .kp-body .checkt\")){\n\n        td.addEventListener('click', function(e) {\n\n            let c = confirm(\"Remove \"+e.currentTarget.dataset.title + \"?\");\n            if(c){\n\n                if(document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+e.currentTarget.dataset.id+\"'] .ctag\")) document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+e.currentTarget.dataset.id+\"'] .ctag\").innerHTML = \"\";\n                cart.removeFromCart(e.currentTarget.dataset.id);\n                cart.refreshCheckoutButton();\n\n                // console.log(cart.state.order.items);\n                if(Object.keys(cart.state.order.items).length == 0){\n\n                    setBtnStep(1);\n                    // console.log(\"closeModal\"); \n                    closeModal(); \n                    return; \n                }\n                viewCheckoutModal();\n                setBtnStep(2);\n            }\n        });\n    }\t\n}\n\n/**\n    * send checkout data to backend\n    * @public\n    */\nconst authUser = function(cb, force){\n        \n    let urlParams = new URLSearchParams(window.location.search);\n    let ott = urlParams.get('ott') ? urlParams.get('ott') : \"\";\n    let params = new URLSearchParams();\n        params.append(\"cmd\", \"get_state\");\n        params.append(\"app\", appID);\n        params.append(\"ott\", ott);\n        params.append(\"token\", getCookie('kenzap_token'));\n\n        config.token = getCookie('kenzap_token');\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/auth/', {\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/x-www-form-urlencoded',\n            // 'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n        },\n        body: params\n    })\n    .then(response => response.json())\n    .then(response => {\n \n        let checkout = urlParams.get('checkout') ? urlParams.get('checkout') : \"\";\n        if(!checkout) return;\n\n        if(response.success){\n\n            if(response.token){ config.token = response.token; setCookie('kenzap_token', response.token, 1); console.log('setting up token'); }\n\n            // let table = 5;\n            cart.state.order.kid = response.kid;\n            cart.state.order.name = response.name;\n            cart.state.order.from = table+' - '+response.name;\n            cart.state.order.status = 'new';\n\n            // DO CHECKOUT\n            // cb.call();\n            ajaxCheckout();\n        }else{\n\n            alert( __html('Oops, something went wrong. Please try checking out again.') );\n \n            // DO AUTH\n            // if(force) window.location.href = 'https://auth.kenzap.com/?app='+appID+'&redirect='+encodeURI(window.location.href);\n            // window.location.href = 'https://auth.kenzap.com/?app='+appID;\n            // https://auth.kenzap.com/?app=66432108790001\n        }\n    })\n    .catch(error => {\n        console.error('Error:', error);\n    });\n}\n\n/**\n    * Scroll listener. Add/Remove scrolled class to body\n    * @public\n    */\nconst scrollEvents = function(e) {\n\n\n    // console.log(document.documentElement.scrollTop);\n    let h_list = document.querySelectorAll(\".kUNwHA .kenzap-row h2\");\n    let s_id = \"\";\n    let diff_prev = 0;\n    let diff = 0;\n    scroll.state = document.documentElement.scrollTop;\n\n    for (const h of h_list){\n\n        diff = (h.offsetTop - document.documentElement.scrollTop);\n        \n        // scrolling up\n        // if(scroll.state<scroll.state_prev){\n\n        // \tscroll.direction = \"up\";\n        // \tif(diff>0){\n                \n        // \t\tif(scroll.el_id == \"\") scroll.el_id = h.id;\n        // \t\tif(diff_prev > diff){ console.log(diff + \" \" +h.id); diff = diff_prev; scroll.el_id = h.id; }\n        // \t}\n        // }\n\n        // scrolling down\n        // if(scroll.state>scroll.state_prev){\n\n            scroll.direction = \"down\";\n            if(diff<0){\n\n                if(diff_prev > diff){ diff = diff_prev; scroll.el_id = h.id; }\n            }\n    \n            // if(diff>0){\n\n            // }\n        // }\n\n        diff_prev = diff;\n    }\n\n    // save previous scroll state\n    if(scroll.state_prev!=scroll.state) scroll.state_prev = scroll.state;\n\n    if(scroll.el_id != \"\" && !document.querySelector(\"body\").classList.contains('kp-modal')){\n\n        let sc = document.querySelector(\".kUNwHA .cata-sub-nav\");\n        if(scroll.timer) clearTimeout(scroll.timer);\n        scroll.timer = setTimeout((el_id) => {\n\n            sc.scrollTo({ left: scroll.offsets[el_id], behavior: 'smooth'}); // \n\n            for (const l of document.querySelectorAll(\".kUNwHA .slide\")){ l.classList.remove(\"active\"); }\n            document.querySelector(\".kUNwHA [data-href='\"+el_id+\"']\").classList.add(\"active\");\n\n        }, 200, scroll.el_id);\n    }\n\n    scroll.el_id = \"\";\n}\n\n"],"names":["setCookie","getCookie","CDN","appID","mt","val","length","getTotals","table","items","colspan","html","price","grand_total","total","discount_percent","discount_total","fee_total","tax_total","tax_percent","forEach","item","parseFloat","__html","priceFormat","config","fee_calc","fee_percent","fee_display","tax_calc","tax_display","priceNorm","getPrice","product","priced","discounted","d","Date","month","getMonth","day","getDate","year","getFullYear","el","availability","dow","getDay","from","hours","getTime","to","now","type","makeNumber","percent","value","note","name","days","expires","date","setTime","toUTCString","document","cookie","escape","cname","decodedCookie","decodeURIComponent","ca","split","i","c","charAt","substring","indexOf","priceF","Math","round","toFixed","style","symbol","randomString","length_","chars","floor","random","str","convertToSlug","output","charCodeAt","vibrate","window","navigator","toast","msg","t","querySelector","innerHTML","classList","add","setTimeout","className","replace","renderStatus","__","status","timeConverterAgo","time","parseInt","past","a","months","getHours","getMinutes","getSeconds","loadAddon","dep","version","cb","getElementById","call","js","createElement","setAttribute","id","onload","onreadystatechange","readyState","body","appendChild","head","getElementsByTagName","css","rel","href","scroll","state","last_state","state_prev","fp","el_id","direction","offsets","timer","renderMenu","rows","settings","categories","html_slider","html_menu","title","cat","trim","products","x","_id","includes","img","imgl","Image","updated","src","localStorage","sid","info","item_cart","cart","order","find","ctag","qty","show_heading","slider_container","menu_container","menuListeners","row_list","querySelectorAll","row","addEventListener","e","currentTarget","dataset","nostock","alert","index","product_id","mdialogCnt","count","sdesc","cats","discounts","variations","history","pushState","pageID","location","pathname","search","refreshDialogView","__attr","html_vars","v","required","allow","data","checked","list","refreshButton","display","checkbox_list","indexv","cbg","radio_list","rag","plus","max_addition","minus","parentNode","contains","addToCart","closeModal","sliderListeners","slide_list","slide","scrollDiv","offsetLeft","sto","documentElement","scrollTop","l","remove","height","overflowY","screen","availHeight","cdialogCnt","refreshCheckoutButton","account","initModal","orders_call_waiter","loadOrders","onClick","confirm","urlParams","URLSearchParams","get","fetch","method","headers","API_KEY","token","JSON","stringify","query","notify","key","channel","idd","color","then","response","json","success","error","parseApiError","orders","fields","limit","sortby","field","hideLoader","first","lottie","ohtml","structOrders","preventDefault","parentElement","created","structOrderRow","orders_cancelable","step","resetButton","cb_count","ra_count","ra","dis","background","p","setBtnStep","filter","add_products","add_products_list","productsF","obj","noremove","push","console","log","removeFromCart","clearCart","replaceState","loadCheckoutFields","autocomplete","address1Field","phone","QR_menu_phone","takeaway","checkout_takeaway_field","addr1","QR_menu_addr1","initAutocomplete","map","google","maps","Map","center","lat","lng","zoom","mapTypeId","streetViewControl","mapTypeControl","fullscreenControl","places","SearchBox","componentRestrictions","country","types","addListener","setBounds","getBounds","markers","getPlaces","marker","setMap","bounds","LatLngBounds","place","geometry","icon","url","size","Size","origin","Point","anchor","scaledSize","Marker","position","viewport","union","extend","addr_lat","addr_lng","fitBounds","focus","googleMapsLoaded","checkout_takeaway_address_field","checkout_takeaway_phone_field","checkout_notes_field","onChange","onKeyUp","addOrderHistory","pastOrders","parse","orderIDs","timestamp","initCart","vars","undefined","ajaxCheckout","payment_token","aggregation","kid","lastOrder","dateObj","getUTCFullYear","getUTCMonth","getUTCDate","payment_method","origin_url","getData","i18n","lang_html","available_locales","lang","locale","link","language_native","lang_offset","marginTop","offsetHeight","offset","setTable","getMenu","authUser","scrollEvents","moreButton","btnListeners","viewCheckoutModal","fast_checkout","domain","encodeURIComponent","dialogListeners","close","close2","td","Object","keys","force","ott","params","append","checkout","h_list","diff_prev","diff","h","offsetTop","sc","clearTimeout","scrollTo","left","behavior"],"mappings":"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"}