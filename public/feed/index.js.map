{"version":3,"file":"index.js","sources":["../../src/_/_helpers.js","../../src/_/_feed_checkout.js","../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_feed_menu.js","../../src/_/_feed_account.js","../../src/feed/index.js"],"sourcesContent":["export const CDN = 'https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com';\nexport const appID = '66432108790002';\n\nexport const mt = (val) => {\n\n    return (\"\"+val).length < 2 ? \"0\"+val : val;\n}\n\nexport const getPrice = (product) => {\n\n    // price\n    let price = { html: null, priced: null };\n    price.html = '<span class=\"tag ptag\">'+priceFormat(product['price'])+'</span>';\n\n    // simple discount\n    if(product['priced']!=''){\n\n       price.html = '<span class=\"ptagc\">'+priceFormat(product['price'])+'</span> <span class=\"tag ptag\">'+priceFormat(product['priced'])+'</span>';\n       price.priced = product['priced'];\n    }\n\n    // console.log(product['discounts']);\n\n    // complex discount\n    if(product['discounts']){\n\n        let discounted = false;\n\n        const d = new Date();\n        let month = mt(d.getMonth() + 1); //months from 1-12\n        let day = mt(d.getDate());\n        let year = mt(d.getFullYear());\n\n        product['discounts'].forEach(el => {\n\n            switch(el.availability){\n\n                case 'always':\n\n                   discounted = true;\n\n                break;\n                case 'weekly':\n\n                    // console.log(d.getDay());\n\n                    if(el.dow[d.getDay()-1]){ discounted = true; }else{ break; }\n\n                case 'hourly':\n                \n                    let from = new Date(month + \"/\" + day + \"/\" + year + ' ' + el.hours.from + ':00').getTime();\n                    let to = new Date(month + \"/\" + day + \"/\" + year + ' ' + el.hours.to + ':00').getTime();\n\n                    // console.log(from + \" \" + Date.now() / 1000 + \" \" + to);\n\n                    if(from >  Date.now() / 1000 | 0 > to){\n                       \n                       discounted = true;\n                    }\n\n                break;\n            }\n\n            if(discounted){\n\n                // discount type\n                if(el.type == 'percent'){\n\n                    // alert(((100-el.percent)/100));\n                    price.priced = makeNumber(product['price']) * ((100-el.percent)/100);\n\n                }else if(el.type == 'value'){\n\n                    price.priced =  el.value;\n                }\n\n                price.html = `<span class=\"ptagc\">${ priceFormat(product['price']) }</span> <span class=\"tag ptag\">${ priceFormat(price.priced) }</span>`;\n\n                if(el.note) price.html += `<div class=\"pricenote\">${ el.note }</div>`;\n            }\n            // console.log(el);\n        });\n    }\n\n    return price;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.com subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\nexport const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n    * Normalize price to keep two decimal points\n    * @public\n    */\nexport const priceNorm = function(price) {\n\n    price = makeNumber(price);\n\n    let priceF = (Math.round(parseFloat(price) * 100)/100).toFixed(2);\n    \n    return priceF;\n}\n\n\n/**\n    * Render price\n    * @public\n    */\nexport const priceFormat = function(price) {\n\n    price = makeNumber(price);\n\n    let priceF = priceNorm(price);\n    \n    switch(config.price.style){\n        case 'left': priceF = config.price.symbol + priceF; break;\n        case 'right': priceF = priceF + config.price.symbol; break;\n    }\n\n    return priceF;\n}\n\n/**\n    * Normalize number variables mostly to cover malformed data cases\n    * @public\n    */\nexport const makeNumber = function(price) {\n\n    price = price == \"\" ? 0 : price;\n\n    return price;\n}\n\n/**\n    * Generates a random string\n    * \n    * @param int length_\n    * @return string\n    */\nexport const randomString = function(length_) {\n\n    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz'.split('');\n    if (typeof length_ !== \"number\") {\n        length_ = Math.floor(Math.random() * chars.length_);\n    }\n    var str = '';\n    for (var i = 0; i < length_; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\n\n/**\n    * Convert text to url friendly slug \n    * @public\n    */\nexport const convertToSlug = function(str) {\n\n    return str\n        .toLowerCase()\n        .replace(/[^\\w ]+/g,'')\n        .replace(/ +/g,'-')\n        ;\n}\n\n/**\n    * trigger small vibration effect when user interacts with UI\n    * @public\n    */\nexport const vibrate = function(){\n\n    if (window.navigator && window.navigator.vibrate) {\n        // Vibrate once for 1 second\n        navigator.vibrate(20);\n    }\n}\n\n/**\n * Show small toast notification\n * @public\n */\nexport const toast = function(msg){\n\n    // Get the snackbar DIV\n    let t = document.querySelector(\".kUNwHA .snackbar\");\n    t.innerHTML = msg;\n    t.classList.add(\"show\");\n\n    // After 3 seconds, remove the show class from div\n    setTimeout(function(){ t.className = t.className.replace(\"show\", \"\"); }, 2200);\n}\n\n/**\n * Localize string\n * @public\n */\n export const __ = (text, ...p) => {\n\n    let match = (input, pa) => {\n\n        pa.forEach((p, i) => { input = input.replace('%'+(i+1)+'$', p); }); \n        \n        return input;\n    }\n\n    if(i18n.state.locale.values[text] === undefined) return match(text, p);\n\n    return match(i18n.state.locale.values[text], p);\n}\n\n export const renderStatus = (__, status) => {\n\n    switch (status){\n\n        case 'new': return '<div class=\"badge btn-warning text-dark fw-light\">' + __('New') + '</div>';\n        case 'processing': return '<div class=\"badge btn-warning text-dark fw-light\">' + __('Cooking') + '</div>';\n        case 'paid': return '<div class=\"badge btn-warning text-dark fw-light\">' + __('New') + '</div>';\n        case 'completed': return '<div class=\"badge btn-success text-dark fw-light\">' + __('Served') + '</div>';\n        case 'canceled': return '<div class=\"badge btn-secondary text-dark fw-light\">' + __('Canceled') + '</div>';\n        case 'refunded': return '<div class=\"badge btn-secondary text-dark fw-light\">' + __('Refunded') + '</div>';\n        case 'failed': return '<div class=\"badge btn-secondary text-dark fw-light\">' + __('Failed') + '</div>';\n        default: return '<div class=\"badge btn-primary text-dark fw-light\">' + __('Processing') + '</div>';\n\n    }\n }\n\n // time elapsed since creation \n export const timeConverterAgo = (__, now, time) => {\n\n    // console.log(now + \" \" + time);\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    // console.log(now + \" \" + time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return 'moments ago';\n    if(past < 3600) return parseInt(past / 60) + ' minutes ago';\n    if(past < 86400) return parseInt(past / 60 / 24) + ' hours ago';\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = [__('Jan'), __('Feb'), __('Mar'), __('Apr'), __('May'), __('Jun'), __('Jul'), __('Aug'), __('Sep'), __('Oct'), __('Nov'), __('Dec')];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n }","import { getCookie, setCookie, priceNorm, priceFormat, randomString, getPrice, toast, __ } from \"../_/_helpers.js\"\n\n/**\n    * Cart and checkout functions\n    * @public\n    */\nexport let cart = {\n\n    state: {total: 0, count: 0, index: 0, product: { variations: [] }, order: {} },\n    // order:{total: 0, items: []},\n    resetButton: () => {\n\n        // document.querySelector(\".kUNwHA .qty\").value = 0;\n        cart.state.total = 0;\n        cart.state.count = 0;\n        // cart.state.product = { variations: [] };\n        // cart.refreshButton();\n    },\n    refreshButton: () => {\n\n        products[cart.state.index].priced = getPrice(products[cart.state.index]).priced;\n\n        // console.log(getPrice(products[cart.state.index].price).priced);\n\n        // price | get base product price\n        cart.state.product.qty = parseInt(document.querySelector(\".kUNwHA .mdialog .qty\").value);\n        cart.state.product.price = products[cart.state.index].priced ? parseFloat(products[cart.state.index].priced) : parseFloat(products[cart.state.index].price);\n\n        // get note\n        cart.state.product.note = document.querySelector(\".kUNwHA .mdialog .kp-note textarea\").value;\n\n        // price | calculate upon checkbox variations\n        let cb_count = 0;\n        let checkbox_list = document.querySelectorAll(\".kUNwHA .mdialog .kp-check input[type=checkbox]\");\n        for(const cb of checkbox_list){ if(cb.checked){ cb_count++; cart.state.product.price+=parseFloat(cb.dataset.price);  } } //console.log(\"CB: \" + parseFloat(cb.dataset.price));\n\n        // price | calculate upon radio variations\n        let ra_count = 0;\n        let radio_list = document.querySelectorAll(\".kUNwHA .mdialog .kp-radio input[type=radio]\");\n        for(const ra of radio_list){ if(ra.checked){ ra_count++; cart.state.product.price+=parseFloat(ra.dataset.price); } } //console.log(\"RA: \" + parseFloat(ra.dataset.price)); \n\n        // price | assign to button\n        cart.state.product.priceF = parseFloat((cart.state.product.price*cart.state.product.qty));\n        document.querySelector(\".kUNwHA .mdialog .add .price\").innerHTML = priceFormat(cart.state.product.priceF);\n\n        // define button state, enabled, disabled\n        let dis = false;\n        if(cart.state.product.priceF==0) dis = true;\n        for(let v in cart.state.product.variations){ if(cart.state.product.variations[v].allow == false) dis = true; }\n\n        // define button text\n        // console.log(cart.state.product.type);\n        document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn .add\").style.background = \"\";\n        if(cart.state.product.type == 'update' && cart.state.product.qty > 0){ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn .cta\").innerHTML = __(\"Update\"); }\n        if(cart.state.product.type == 'update' && cart.state.product.qty == 0){ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn .cta\").innerHTML = __(\"Remove\"); if(document.querySelector(\".kUNwHA .mdialog .kp-add .btn .add\")) document.querySelector(\".kUNwHA .mdialog .kp-add .btn .add\").style.background=\"#df1960\"; dis = false; }\n        if(cart.state.product.type == 'new'){ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn .cta\").innerHTML = __(\"Add\"); }\n\n        // refresh UI\n        if(dis){ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn\").classList.add(\"dis\"); }else{ document.querySelector(\".kUNwHA .mdialog .kp-add .mbtn\").classList.remove(\"dis\"); }\n    },\n    refreshCheckoutButton: () => {\n\n        // console.log(cart.state.order.items);\n        let total = 0;\n        for(let p in cart.state.order.items){\n\n            // console.log(cart.state.order.items[p].priceF);\n            total += parseFloat(cart.state.order.items[p].priceF);\n        }\n\n        cart.state.order.total = total;\n\n        // trigger visibility\n        if(total>0) {\n\n            document.querySelector(\"body\").classList.add(\"cbtn\");\n            \n            setBtnStep(1);\n\n            document.querySelector(\".kUNwHA .cta-btn .price\").innerHTML = priceFormat(total);\n        }else{\n            document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __(\"cart empty\");\n            // document.querySelector(\".kUNwHA .cta-btn\").style.display = \"none\";\n            document.querySelector(\"body\").classList.remove(\"cbtn\");\n        }\n    },\n    addToCart: () => {\n\n        // remove current product from cart\n        cart.state.order.items = cart.state.order.items.filter((el) => { return el.id != cart.state.product.id; });\n\n        // add to cart\n        cart.state.order.items.push(cart.state.product); // push(cart.state.product);\n\n        // remove from cart\n        if(cart.state.product.qty==0){ cart.removeFromCart(cart.state.product.id); }else{ document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+cart.state.product.id+\"'] .ctag\").innerHTML = cart.state.product.qty; }\n\n        // cache results\n        localStorage.cart = JSON.stringify(cart.state.order);\n\n        // setBtnStep(1);\n        cart.refreshCheckoutButton();\n        \n    },\n    removeFromCart: function(id){\n\n        cart.state.order.items = cart.state.order.items.filter((el) => { return el.id != id; });\n\n        delete cart.state.order.items[id];\n\n        document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+id+\"'] .ctag\").innerHTML = \"\";\n \n        // cache results\n        localStorage.cart = JSON.stringify(cart.state.order);\n    },\n    clearCart: () => {\n\n        // clear cart and refresh UI\n        for(let i in cart.state.order.items){  document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+cart.state.order.items[i].id+\"'] .ctag\").innerHTML = \"\"; }\n\n        // reset cached data\n        cart.state.order = {};\n        cart.state.order.created = Math.floor(Date.now() / 1000);\n        cart.state.order.items = [];\n\n        localStorage.cart = JSON.stringify(cart.state.order);\n\n        // refresh cart button \n        cart.refreshCheckoutButton();\n\n        // remove checkoout request from url\n        window.history.replaceState({}, document.title, config.domain);\n    }\n}\n\n/**\n * cache locally ID of newly created orders\n * @public\n */\nexport const addOrderHistory = (id) => {\n\n    let pastOrders = [];\n    try{\n        pastOrders = JSON.parse(localStorage.orderIDs);\n    }catch(e){ }\n\n    let timestamp = Date.now() / 1000 | 0;\n    let date = new Date(timestamp);\n    let year = date.getFullYear();\n    let month = date.getMonth() + 1;\n    let day = date.getDate();\n\n    let obj = {time: timestamp, date: year + '' + month + '' + day, id: id}\n\n    pastOrders.push(obj);\n\n    localStorage.orderIDs = JSON.stringify(pastOrders)\n}\n\n/**\n * get cacheed locally ID of newly created orders\n * @public\n */\n export const getOrderHistory = () => {\n\n    let pastOrders = [];\n    try{\n        pastOrders = JSON.parse(localStorage.orderIDs);\n    }catch(e){ }\n\n    return pastOrders;\n}\n\n/**\n * initiate Cart state\n * @public\n */\nexport const initCart = () => {\n\n    setBtnStep(1);\n    \n    try{\n        \n        let order = localStorage.cart;\n        \n        if(!order){ order = {created: Math.floor(Date.now() / 1000) }; }else{ order = JSON.parse(order); }\n        if(typeof(order.items) === 'undefined'){ order.items = []; }\n\n        // check if cart expired 1h session\n        if(order.created+3600 < Math.floor(Date.now() / 1000)) {\n\n            order.items = [];\n            order.created = Math.floor(Date.now() / 1000);\n        }\n\n        cart.state.order = order;\n        // console.log(order);\n    }catch(e){\n        \n        cart.state.order.created = Math.floor(Date.now() / 1000);\n        cart.state.order.items = [];\n    }\n\n    // make sure user ID exists\n    if(!localStorage.idd) localStorage.idd = randomString(8)+Math.floor(Date.now());\n\n    // console.log(cart.state.order);\n    cart.refreshCheckoutButton();\n}\n\nexport const structOrderRow = (type, row) => {\n \n    // parse variations\n    let vars = '';\n    for(let v in row.variations){\n\n        // parse variation list\n        let list = ''; for(let l in row.variations[v].list) list += row.variations[v].list[l].title + \" \";\n        vars += '<div><b>' + row.variations[v].title + \"</b> <span>\" + list + \"</span></div> \";\n\n        // meal note\n        if(row.variations[v].note !== undefined && row.variations[v].note.length > 0) vars += \"<div><b>\" + __('Note') + \"</b> \" + row.variations[v].note + \"</div> \";\n    }\n\n    // console.log(row);\n    // ${ __('Summary') }\n    // total += makeNumber(item.priceF);\n    return '<tr><td data-id=\"'+row.id+'\" data-title=\"'+__(row.title)+'\" class=\"checkt\"><div>'+__(row.title)+'</div><div>'+vars+'</div></td><td class=\"qty\">'+row.qty+'</td><td class=\"price\"><strong>'+priceFormat(row.price)+'</strong></td></tr>';\n}\n\nexport const structOrderTotals = (cart, settings, order) => {\n\n    let html = ``, grand_total_temp = parseFloat(order.total);\n    \n    // defaults\n    cart.state.order.price = { grand_total: 0, total: parseFloat(order.total), discount_percent: 0, discount_total: 0, fee_total: 0, tax_total: 0, tax_percent: 0 };\n\n    // subtotal\n    html += `<tr><td colspan=\"4\"><div class=\"price\" style=\"margin-top:16px;\">${ __('Subtotal') } <b>${ priceFormat(cart.state.order.price.total) }</b></div></td></tr>`;\n    \n    // service charge\n    if(settings.price.fee_calc){\n\n        cart.state.order.price.fee_total = parseFloat((settings.price.fee_percent)*cart.state.order.price.total)/100;\n        cart.state.order.price.fee_percent = settings.price.fee_percent;\n        html += `<tr><td colspan=\"4\"><div class=\"price\" >${ __(settings.price.fee_display) } <b>${ priceFormat(cart.state.order.price.fee_total) }</b></div></td></tr>`;\n\n        grand_total_temp += cart.state.order.price.fee_total;\n    }\n    \n    // tax \n    if(settings.price.tax_calc){\n\n        cart.state.order.price.tax_total = ((cart.state.order.price.fee_total + cart.state.order.price.total) * parseFloat(settings.price.tax_percent)/100);\n        cart.state.order.price.tax_percent = settings.price.tax_percent\n        html += `<tr><td colspan=\"4\"><div class=\"price \">${ settings.price.tax_display } <b>${ priceFormat(cart.state.order.price.tax_total) }</b></div></td></tr>`;\n\n        grand_total_temp += cart.state.order.price.tax_total;\n    }\n\n    // grand total\n    cart.state.order.price.grand_total = priceNorm(grand_total_temp);\n    html += `<tr><td colspan=\"4\"><div class=\"price \" style=\"font-size:19px;font-weight:700;\">${ __('Total') } <b>${ priceFormat(cart.state.order.price.grand_total) }</b></div></td></tr>`;\n    \n    return html;\n}\n\n/**\n * set button Call to action step\n * @public\n */\n export const setBtnStep = function(step){\n\n    document.querySelector(\".kUNwHA .cta-btn\").style.display = \"flex\";\n    switch(step){\n\n        case 1: cart.state.order.step = step; document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __('Cart') + ' <span class=\"price\">s$0.00</span>'; break;\n        case 2: cart.state.order.step = step; document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __('Continue'); break;\n        case 3: cart.state.order.step = step; document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __('Checkout');  break;\n        case 4: cart.state.order.step = step; document.querySelector(\".kUNwHA .cta-btn .mbtn\").innerHTML = __('Back to menu'); break;\n    }\n}\n","/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","import { getCookie, setCookie, priceFormat, convertToSlug, makeNumber, mt, getPrice, CDN, vibrate, toast, __ } from \"../_/_helpers.js\"\nimport { cart } from \"../_/_feed_checkout.js\"\n\n// state of scrolling menu feed and horizontal menu buttons\nexport let scroll = { state: 0, last_state: 0, state_prev: 0, fp: 0, el_id: \"\", direction: \"\", offsets: {}, timer: null };\n\n/**\n * Render menu dialog\n * @public\n */\nexport const renderMenu = () => {\n\n    let rows = settings.categories.split('\\n');\n    let html_slider = '';\n    let html_menu = '';\n    let title = '';\n\n    for(let c of rows){\n\n        // get values\n        let val = c.split('|');\n        let cat = val[0].trim();\n        let note = val[1] == null ? '' : val[1].trim();\n        // console.log(note);\n\n        // render slider\n        html_slider += '<div class=\"slide\" data-href=\"'+convertToSlug(cat)+'\"><a href=\"#'+convertToSlug(cat)+'\" class=\" cl\">'+__(cat)+'</a></div>'; \n\n        // render menu\n        for(let x in products){\n\n            // centralize IDS\n            products[x].id = products[x]._id;\n\n            // skip current loop if current category not present\n            if(typeof(products[x]['cats']) === 'undefined') continue;\n            if(products[x]['cats'] == null) continue;\n            if(!products[x]['cats'].includes(cat)) continue;\n\n            // product image\n            let img = 'https://cdn.kenzap.com/loading.png';\n\n            // load image asyncronously\n            if(products[x]['img'][0] || products[x]['img'][0] == 'true'){\n\n                let imgl = new Image();\n                imgl._id = products[x]['_id'];\n                imgl.updated = products[x]['updated'];\n                (function(i){      \n                    i.onload = function () { document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+i._id+\"'] img\").setAttribute('src', i.src); }\n                    i.src = CDN + '/S'+localStorage.sid+'/product-'+i._id+'-1-250.jpeg?'+i.updated;\n                })(imgl);\n            }\n\n            // stock\n            let info = '';\n            if(products[x]['stock']) if(products[x]['stock']['management']) if(parseInt(products[x]['stock']['qty']) == 0){\n\n                info = __('sold out');\n            }\n\n            let item_cart = cart.state.order.items.find((el) => { return el.id == products[x]['_id']; });\n\n            // let ctag = typeof(cart.state.order.items[products[x]['_id']]) === 'undefined' ? \"\" : cart.state.order.items[products[x]['_id']].qty;\n            let ctag = typeof(item_cart) === 'undefined' ? \"\" : item_cart.qty;\n            let show_heading = '';\n            if(title != cat){ title = cat; show_heading = '<h2 id=\"'+convertToSlug(title)+'\">'+__(title)+'</h2><p class=\"subnote\">'+__(note)+'</p>'; }\n            html_menu += `\n            <div class=\"kenzap-row\" data-nostock=\"${ info ? true : false }\" data-index=\"${ x }\" data-id=\"${ products[x]['_id'] }\">\n                ${ show_heading }\n                <div class=\"info-box\">\n                    <div class=\"kenzap-col-7\">\n                        <div class=\"kp-content\">\n                            <h3><span class=\"tag ctag\">${ ctag }</span>${ __(products[x]['title']) }</h3>\n                            <p>${ __(products[x]['sdesc']) }</p>\n                            ${ info ? '<span class=\"tag ptag\">' + __('sold out') + '</span>' : getPrice(products[x]).html }\n                        </div>\n                    </div>\n                    <div class=\"kenzap-col-5\">\n                        <div class=\"kp-img\">\n                            <img src=\"${ img }\" alt=\"${ products[x]['title'] }\">\n                            <div class=\"kp-info\">${ info }</div>\n                        </div>\n                    </div>\n                </div>\n            </div> `;\n        }\n    }\n\n    let slider_container = document.querySelector(\".kUNwHA .slideset\");\n    let menu_container = document.querySelector(\".kUNwHA .kenzap-container\");\n    if(html_menu==''){\n        menu_container.innerHTML = __(\"Please add products and specify categories first\");\n    }else{\n        slider_container.innerHTML = html_slider;\n        menu_container.innerHTML = html_menu;\n    }\t\n}\n\n/**\n    * Menu horizontal slider listeners listener.\n    * @public\n    */\nexport const menuListeners = () => {\n\n    // menu row click listener\n    let row_list = document.querySelectorAll(\".kUNwHA .kenzap-row\");\n    for(const row of row_list){\n\n        row.addEventListener('click', function(e) {\n\n            // alert(e.currentTarget.dataset.nostock);\n            if(e.currentTarget.dataset.nostock == 'true'){ alert( __('Product sold out') ); return false; }\n\n            let x = e.currentTarget.dataset.index; cart.state.index = x;\n            let product_id = products[x].id;\n            let mdialogCnt = document.querySelector(\".kUNwHA .mdialog-cnt\");\n            scroll.last_state = scroll.state;\n\n            // console.log(cart.state.order.items);\n\n            cart.state.total = 0;\n            cart.state.count = 0;\n\n            // update cart state\n            let item_cart = cart.state.order.items.find((el) => { return el.id == product_id; });\n            cart.state.product = typeof(item_cart) === 'undefined' ? {id: products[x].id, title: products[x].title, sdesc: products[x].sdesc, index: x, qty: 0, note: \"\", variations:[] }:item_cart;\n            \n            // detect product state\n            cart.state.product.type = cart.state.product.qty == 0 ? \"new\" : \"update\";\n            \n            document.querySelector(\"body\").classList.add('kp-modal');\n            history.pushState({pageID: 'feed'}, 'Feed', window.location.pathname + window.location.search + \"#editing\");\n\n            // console.log(cart.state.product.variations);\n\n            refreshDialogView();\n\n            let src = (products[x]['img'][0]) ? CDN + '/S'+localStorage.sid+'/product-'+products[x]['_id']+'-1-250.jpeg?'+products[x]['updated'] : 'https://cdn.kenzap.com/loading.png'\n\n            // bind data to modal body\n            document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-body > h2\").innerHTML = __(cart.state.product.title);\n            document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-body > p\").innerHTML = __(cart.state.product.sdesc);\n            document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-img img\").setAttribute('src', src);\n            document.querySelector(\".kUNwHA .mdialog .qty\").value = cart.state.count = cart.state.product.qty;\t\n            document.querySelector(\".kUNwHA .mdialog .kp-note textarea\").value = cart.state.product.note;\t \n\n            // load image asyncronously\n            let imgl = new Image();\n            imgl._id = products[x]['_id'];\n            imgl.updated = products[x]['updated'];\n            (function(i){      \n                i.onload = function () { document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-img img\").setAttribute('src', i.src); }\n                i.src = CDN + '/S'+localStorage.sid+'/product-'+i._id+'-1-500.jpeg?'+i.updated;\n            })(imgl);\n\n            // \"variations\":[{\"title\":\"Sauce\",\"type\":\"checkbox\",\"required\":\"0\",\"data\":[{\"title\":\"Chilli\",\"price\":\"0.40\",\"cond\":\"\"},{\"title\":\"Teriyaki\",\"price\":\"1.00\",\"cond\":\"\"}]},{\"title\":\"Rice\",\"type\":\"checkbox\",\"required\":\"1\",\"data\":[{\"title\":\"rice\",\"price\":\"0.00\",\"cond\":\"\"},{\"title\":\"cdscdsc\",\"price\":\"0.00\",\"cond\":\"\"}]}]}\n            let html_vars = '';\n            if(typeof(products[x].variations !== 'undefined'))\n            for(let v in products[x].variations){\n\n                // console.log(products[x].variations[v]);\n\n                // variation type\n                let type = '';\t\n                if(products[x].variations[v].type=='checkbox') type = 'check';\n                if(products[x].variations[v].type=='radio')    type = 'radio';\n\n                // update cart state\n                if(typeof(cart.state.product.variations[v]) === 'undefined') cart.state.product.variations[v] = {title: products[x].variations[v].title, required: products[x].variations[v].required, allow: products[x].variations[v].required == '1'?false:true };\t\n\n                // struct variation\n                html_vars += '\\\n                <h3>' + __(products[x].variations[v].title) + (products[x].variations[v].required == '1' ? ' <span class=\"tag\">'+__('required')+'</span>':'')+'</h3>\\\n                <div class=\"kp-'+type+'\">';\n\n                // variation labels\n                for(let d in products[x].variations[v].data){\n\n                    let checked = false;\n                    // console.log(cart.state.product.variations);\n                    if(typeof(cart.state.product.variations[v]) !== 'undefined' && typeof(cart.state.product.variations[v].list) !== 'undefined' && typeof(cart.state.product.variations[v].list[\"_\"+d]) !== 'undefined'){\n\n                        checked = true;\n                        // alert(\"checked\");\n                        // checked = typeof(cart.state.product.variations[v].list[\"_\"+d]) === 'undefined' ? false : true;\n                    }\n                    \n                    // verify variation price validity\n                    products[x].variations[v].data[d]['price']= makeNumber(products[x].variations[v].data[d]['price']);\n\n                    switch(type){\n                        case 'check':\n\n                            html_vars += `\n                                <label>\n                                    <input type=\"checkbox\" data-required=\"${ products[x].variations[v].required }\" data-indexv=\"${ v }\" data-index=\"${ d }\" data-title=\"${ products[x].variations[v].data[d]['title'] }\" data-price=\"${ products[x].variations[v].data[d]['price'] }\" ${ (checked?'checked=\"checked\"':'') }>\n                                    <div class=\"checkbox\">\n                                        <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\">\n                                            <path d=\"M3,1 L17,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 L1,3 C1,1.8954305 1.8954305,1 3,1 Z\"></path>\n                                            <polyline points=\"4 11 8 15 16 6\"></polyline>\n                                        </svg>\n                                    </div>\n                                    <span>${ __(products[x].variations[v].data[d]['title']) }</span>\n                                    <div class=\"price\">+ ${ priceFormat(products[x].variations[v].data[d]['price']) }</div>\n                                </label>`;\n                            \n                        break;\n                        case 'radio':\n\n                            html_vars += `\n                                <label>\n                                    <input type=\"radio\" data-required=\"${ products[x].variations[v].required }\" data-indexv=\"${ v }\" name=\"radio${ v }\" data-index=\"${ d }\" data-title=\"${ products[x].variations[v].data[d]['title'] }\" data-price=\"${ products[x].variations[v].data[d]['price'] }\" ${ (checked?'checked=\"checked\"':'') } />\n                                    <span>${ __(products[x].variations[v].data[d]['title']) }</span>\n                                    <div class=\"price\">+ ${ priceFormat(products[x].variations[v].data[d]['price']) }</div>\n                                </label>`;\n                        \n                        break;\n                    }\n                }\n\n                html_vars += '</div>';\n            }\n\n            document.querySelector(\".kUNwHA .mdialog-cnt .mdialog .kp-vars\").innerHTML = html_vars;\n\n            cart.refreshButton();\n            \n            mdialogCnt.style.display = \"block\";\n            document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n    \n            // checkbox listener\n            let checkbox_list = document.querySelectorAll(\".kUNwHA .mdialog .kp-check input[type=checkbox]\");\n            for(const cb of checkbox_list){\n                cb.addEventListener('change', () =>  {\n\n                    // console.log(\"call refreshButton\");\n\n                    let v = parseInt(cb.dataset.indexv);\n                    // if(typeof(cart.state.product.variations[v].list) === 'undefined') \n                    cart.state.product.variations[v].list = {};\n\n                    let count = 0;\n                    for(const cbg of document.querySelectorAll(\".kUNwHA .mdialog .kp-check input[type=checkbox][data-indexv='\"+v+\"']\")){\n\n                        // checks if this block is required and allows checkout\n                        if(cb.dataset.required==\"1\"){ if(count) cart.state.product.variations[v].allow = true; }else{ cart.state.product.variations[v].allow = true; }\n\n                        // cache selected variations\n                        if(cbg.checked){ cart.state.product.variations[v].list[\"_\"+cbg.dataset.index] = {title: cbg.dataset.title, price: parseFloat(cbg.dataset.price) }; count +=1; }\n                    }\n                    \n                    // console.log(cart.state.product.variations);\n                    cart.refreshButton();\n                });\n            }\n\n            // radio listener\n            let radio_list = document.querySelectorAll(\".kUNwHA .mdialog .kp-radio input[type=radio]\");\n            for(const cb of radio_list){\n                cb.addEventListener('change', () =>  {\n\n                    // console.log(\"call refreshButton\");\n\n                    let v = parseInt(cb.dataset.indexv);\n                    // if(typeof(cart.state.product.variations[v].list) === 'undefined') \n                    cart.state.product.variations[v].list = {};\n\n                    let count = 0;\n                    for(const rag of document.querySelectorAll(\".kUNwHA .mdialog .kp-radio input[type=radio][data-indexv='\"+v+\"']\")){\n                    \n                        // console.log(rag.dataset.price);\n\n                        // cache selected variations\n                        if(rag.checked){ cart.state.product.variations[v].list[\"_\"+rag.dataset.index] = {title: rag.dataset.title, price: parseFloat(rag.dataset.price) }; count +=1; }\n                        \n                        // checks if this block is required and allows checkout\n                        if(cb.dataset.required==\"1\"){ if(count) cart.state.product.variations[v].allow = true; }else{ cart.state.product.variations[v].allow = true; }\n                    }\n\n                    // console.log(cart.state.product.variations);\n\n                    cart.refreshButton();\n                });\n            }\n        });\n    }\n\n    // plus click listener\n    let qty = document.querySelector(\".kUNwHA .mdialog .qty\");\n    let plus = document.querySelector(\".kUNwHA .mdialog .plus\");\n    plus.addEventListener('click', function(e) {\n\n        if(cart.state.count < config.cart.max_addition) cart.state.count +=1;\n        qty.value = cart.state.count;\n        cart.refreshButton();\n        vibrate();\n    });\n    \n    // minus click listener\n    let minus = document.querySelector(\".kUNwHA .mdialog .minus\");\n    minus.addEventListener('click', function(e) {\n\n        if(cart.state.count > 0) cart.state.count -=1;\n        qty.value = cart.state.count;\n        cart.refreshButton();\n        vibrate();\n    });\n\n    // add to cart listener\n    let add = document.querySelector(\".kUNwHA .mdialog .add\");\n    add.addEventListener('click', function(e) {\n\n        if(e.currentTarget.parentNode.classList.contains(\"dis\")){ alert( __(\"Please select required fields\") ); return; }\n\n        cart.addToCart();\n\n        // cart.resetButton(); \n        closeModal();\n        toast(__(\"Cart updated\"));\n        vibrate();\n    });\n\n    // checkout  button listener\n    // let checkout = document.querySelector(\".kUNwHA .vadd\");\n    // checkout.addEventListener('click', function(e) {\n\n    // \tviewCheckoutModal();\n    // });\n}\n\n/**\n * Menu horizontal slider listeners.\n * @public\n */\nexport const sliderListeners = () => {\n\n    let slide_list = document.querySelectorAll(\".kUNwHA .slideset .slide\");\n    for(const slide of slide_list){\n\n        // offsetLeft\n        let scrollDiv = slide.offsetLeft;\n        scroll.offsets[slide.dataset.href] = scrollDiv;\n        slide.addEventListener('click', function(e) {\n\n            let sto = document.documentElement.scrollTop;\n            // document.documentElement.scrollTop = sto-=10;\n            setTimeout(function(el){\n\n                for (const l of document.querySelectorAll(\".kUNwHA .slide\")){ l.classList.remove(\"active\"); }\n                el.classList.add(\"active\");\n                // document.documentElement.scrollTop = sto+=10;\n            },250, this)\n        });\n    }\n}\n\n/**\n * Dialog box listeners\n * @public\n */\nexport const refreshDialogView = () => {\n\n    // body prevent scroll\n    if(document.querySelector(\"body\").classList.contains('kp-modal')){\n        document.querySelector(\"body\").style.height = '100vh';\n        document.querySelector(\"body\").style.overflowY = 'hidden';\n        document.querySelector(\".kUNwHA .scrollable\").style.height = '100vh';\n        document.querySelector(\".kUNwHA .scrollable\").style.overflowY = 'hidden';\n        document.querySelector(\".kUNwHA .mdialog-cnt\").style.height = (window.screen.availHeight-160) + \"px\";\n    }\n    // document.querySelector(\".kUNwHA .cdialog-cnt\").style.height = (window.screen.availHeight-160) + \"px\";\n}\n\n/*\n* Close product popup\n* @public\n*/\nexport const closeModal = () => {\n\n   let mdialogCnt = document.querySelector(\".kUNwHA .mdialog-cnt\");\n   mdialogCnt.style.display = \"none\";\n\n   document.querySelector(\".kUNwHA .overlay\").style.display = \"none\";\n\n   // allow body scroll\n   document.querySelector(\".kUNwHA .scrollable\").style.height = 'auto';\n   document.querySelector(\".kUNwHA .scrollable\").style.overflowY = 'scroll';\n\n   document.querySelector(\"body\").style.overflowY = 'auto';\n   document.querySelector(\"body\").style.height = 'auto';\n   setTimeout(() => { document.querySelector(\"body\").classList.remove('kp-modal'); },300);\n\n   document.documentElement.scrollTop = scroll.last_state;\n\n   let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n   cdialogCnt.style.display = \"none\";\n\n   cart.refreshCheckoutButton();\n\n   document.querySelector(\".kUNwHA .cta-btn\").style.display = \"flex\";\n\n   if (window.location.href.indexOf(\"#editing\")==-1) return;\n\n   history.pushState({pageID: 'feed'}, 'Feed', window.location.pathname + window.location.search);\n\n}","import { showLoader, hideLoader, parseApiError, getCookie, onClick, onKeyUp, onChange } from '@kenzap/k-cloud';\nimport { priceFormat, timeConverterAgo, renderStatus, makeNumber, CDN, vibrate, toast, __ } from \"../_/_helpers.js\"\nimport { refreshDialogView } from \"../_/_feed_menu.js\"\nimport { getOrderHistory, structOrderRow } from \"../_/_feed_checkout.js\"\n\nexport let account = {\n\n    initModal: (t) => {\n\n        let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n        cdialogCnt.style.display = \"block\";\n\n        document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n        document.querySelector(\".kUNwHA .cta-btn\").style.display = \"none\";\n        document.querySelector(\"body\").classList.add('kp-modal');\n        history.pushState({pageID: 'feed'}, 'Feed', window.location.pathname + window.location.search + \"#account\");\n        \n        refreshDialogView();\n\n        // generate cart table\n        let html = `\n        <div class=\"account\">\n            <h3><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"bell\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n            <path d=\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z\"></path>\n            </svg>${ __('Order received') } <span class=\"statusLast\"></span></h3>\n            <p>${ __('You can track your order from the table below or click on the bell to call waiter.') }</p>\n            <div class=\"lottie-cont\"></div>\n            `;\n\n        // order just received\n        if(t == 'new'){\n            html = `\n            <div class=\"account\">\n                <h3><svg xmlns=\"http://www.w3.org/2000/svg\" class=\"bell\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z\"></path>\n                </svg>${ __('Order received!') } <span class=\"statusLast\"></span></h3>\n                <p>${ __('Thank you for placing your order. You can track your order from the table below or click on the bell to call waiter.') }</p>\n                <div class=\"lottie-cont\"></div>\n                `;\n        }\n\n        html += `\n            <h4>${ __('Orders') }</h4>\n            <div class=\"orders\">`;\n\n                loadOrders(html, cdialogCnt)\n\n            html += '</div>';\n            \n        html += '</div>';\n\n        cdialogCnt.querySelector(\".kUNwHA .cdialog-cnt .kp-body\").innerHTML = html;\n\n        // call waiter listener\n        onClick('.kUNwHA .bell', (e) => {\n\n            let c = confirm(__('Call waiter?'));\n\n            if(!c) return;\n\n            document.querySelector('.kUNwHA .bell').classList.add('dn');\n\n            let urlParams = new URLSearchParams(window.location.search);\n            let table = urlParams.get('table') ? urlParams.get('table') : \"\";\n    \n            // do API query\n            fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                    'Authorization': 'Bearer ' + API_KEY,\n                    'Kenzap-Token': config.token,\n                    'Kenzap-Sid': localStorage.sid,\n                },\n                body: JSON.stringify({\n                    query: {\n                        notify: {\n                            type:       'notify',\n                            key:        'ecommerce-message',        \n                            sid:        localStorage.sid,\n                            data:       {\n                                channel: \"waiter\",\n                                idd: localStorage.idd,\n                                msg: \"table \"+table+\" is calling\",\n                                color: \"danger\"\n                            }\n                        }\n                    }\n                })\n            })\n            .then(response => response.json())\n            .then(response => {\n                \n                if(response.success){\n                        \n                    toast(__(\"Calling, please wait a moment!\"));\n\n                }else{\n\n                    document.querySelector('.kUNwHA .bell').classList.remove('dn');\n                    toast(__(\"Oops, please try again\"));\n                }\n            })\n            .catch(error => { parseApiError(error); });\n        });\n    }\n}\n\nconst loadOrders = (html, cdialogCnt) => {\n\n    // // with fast checkout enabled can not retrieve user orders from the database since he is not authenticated.\n    // // render from what we have in the history of the browser.\n    // if(config.fast_checkout == \"2\"){\n\n\n    // }\n\n    // get last 2 days orders to query\n    // let ordersQuery = [];\n    // let timestamp = Date.now() / 1000 | 0;\n    // for(let obj of getOrderHistory()){\n\n    //     if(obj.time > timestamp - 3600 * 24 * 30) ordersQuery.push(obj.id);\n    //     // console.log('orders to query' + obj.id);\n    // }\n\n    // TODO handle empty idd case\n    let term = localStorage.idd;\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/', {\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/x-www-form-urlencoded',\n            'Authorization': 'Bearer ' + API_KEY,\n            'Kenzap-Token': config.token,\n            'Kenzap-Sid': localStorage.sid,\n        },\n        body: JSON.stringify({\n            query: {\n                user: {\n                    type:       'authenticate',\n                    fields:     ['avatar'],\n                    token:      getCookie('kenzap_token')\n                },\n                // locale: {\n                //     type:       'locale',\n                //     source:      ['extension'],\n                //     key:         'ecommerce',\n                // },\n                orders: {\n                    type:       'find',\n                    key:        'ecommerce-order',\n                    fields:     ['id', '_id', 'status', 'items', 'created'],\n                    // id:         ordersQuery,\n                    term:       term != '' ? 'idd=\\'' + term +'\\'' : '',\n                    limit:      10,\n                    // search:     {                                                           // if s is empty search query is ignored\n                    //     field: 'from',\n                    //     s: s\n                    // },\n                    sortby:     {\n                        field: 'created',\n                        order: 'DESC'\n                    }\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        // hide UI loader\n        hideLoader();\n\n        if(response.success){\n                \n            let first = true;\n            let lottie = 'cooking';\n            let ohtml = '<ul class=\"accordion\">';\n\n            for(let order of response.orders){\n\n                if(first){ document.querySelector('.statusLast').innerHTML = renderStatus(__, order.status); if(order.status=='completed'){ lottie = 'serving'; } }\n\n                ohtml += structOrders(first, order);\n\n                first = false;\n            }\n\n            switch(lottie){\n                case 'cooking':\n                    document.querySelector('.account .lottie-cont').innerHTML = '<lottie-player src=\"https://assets8.lottiefiles.com/packages/lf20_fefIZO.json\" background=\"transparent\" speed=\"1\" class=\"lplayer\" style=\"width: 300px; height: auto;\" loop autoplay></lottie-player>';\n                    break;\n                case 'serving':\n                    document.querySelector('.account .lottie-cont').innerHTML = '<lottie-player src=\"https://assets9.lottiefiles.com/packages/lf20_thgy1p9c.json\" background=\"transparent\" speed=\"1\" class=\"lplayer\" style=\"width: 300px; height: auto;\" loop autoplay></lottie-player>';\n                    break;\n            }\n\n            ohtml += '</ul>';\n\n            // orders list to html\n            cdialogCnt.querySelector(\".kUNwHA .orders\").innerHTML = ohtml;\n\n            // cancel button listener\n            onClick('.kUNwHA .accordion .cancel-order', (e) => {\n\n                e.preventDefault();\n\n                if (!confirm( __('Cancel order?') )){ return false; }\n\n                let el = e.currentTarget;\n\n                // do API query\n                fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                        'Authorization': 'Bearer ' + API_KEY,\n                        'Kenzap-Token': config.token,\n                        'Kenzap-Sid': localStorage.sid,\n                    },\n                    body: JSON.stringify({\n                        query: {\n                            status: {\n                                type:       'update-order-status',\n                                id:         el.dataset._id,\n                                status:     \"canceled\",\n                            }\n                        }\n                    })\n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    // hide UI loader\n                    hideLoader();\n\n                    if(response.success){\n\n                        el.parentElement.parentElement.querySelector('.badge').innerHTML = __('Canceled');\n\n                        toast( __(\"Order #\"+el.dataset.id+\" canceled\") );\n\n                        el.remove();\n\n                        closeModal();\n                        \n                    }else{\n\n                        // handle sign in cases\n                        // toast( __(\"Please make your first order\") );\n                    }\n                })\n                .catch(error => { parseApiError(error); });\n            });\n\n            // toggle listener\n            onClick('.kUNwHA .accordion .toggle', (e) => {\n\n                e.preventDefault();\n\n                if(e.currentTarget.classList.contains('active')){\n                    \n                    e.currentTarget.classList.remove('active');\n                    e.currentTarget.parentElement.querySelector('.inner').classList.remove('show');\n                    e.currentTarget.parentElement.querySelector('.plusminus').classList.remove('active');\n                }else{\n\n                    e.currentTarget.classList.add('active');\n                    e.currentTarget.parentElement.querySelector('.inner').classList.add('show');\n                    e.currentTarget.parentElement.querySelector('.plusminus').classList.add('active');\n                }\n            });\n\n            // hide cta button\n            document.querySelector(\".kUNwHA .cta-btn\").style.display = \"none\";\n\n        }else{\n\n            // handle sign in cases\n            toast(__(\"Please make your first order\"));\n\n            closeModal();\n\n            // parseApiError(response);\n        }\n    })\n    .catch(error => { parseApiError(error); });\n}\n\nexport const structOrders = (first, order) => {\n\n    let html = \n    `<li>\n        <a class=\"toggle ${ first ? 'active' : '' } \" href=\"#\">\n            #${ order.id } <span class=\"timago\">${ timeConverterAgo(__, Date.now() / 1000 | 0, order.created) }</span> ${ renderStatus(__, order.status) }<div class=\"plusminus ${ first ? 'active' : '' }\"></div>\n        </a>\n        <div class=\"inner ${ first ? 'show' : '' }\">\n            <table>\n                <tr><th><div class=\"me-1 me-sm-3\">${ __('Product') }</div></th><th class=\"qty\"><div class=\"me-1 me-sm-3\">${ __('Qty') }</div></th><th class=\"price\"><div class=\"me-1 me-sm-3\">${ __('Total') }</div></th><th></th></tr>`;\n                for(let item in order.items){ html += structOrderRow('history', order.items[item]); }\n    html += \n            `</table> \n            <div class=\"tag cancel-order ${ order.status != 'new' ? 'dn' : ''}\" data-id=\"${ order.id }\" data-_id=\"${ order._id }\">${ __('Cancel order') }</div>\n        </div>\n    </li>`;\n\n    return html;\n}\n\n/*\n* Close product popup\n* @public\n*/\nexport const closeModal = () => {\n\n   let mdialogCnt = document.querySelector(\".kUNwHA .mdialog-cnt\");\n   mdialogCnt.style.display = \"none\";\n\n   document.querySelector(\".kUNwHA .overlay\").style.display = \"none\";\n\n   // allow body scroll\n   document.querySelector(\".kUNwHA .scrollable\").style.height = 'auto';\n   document.querySelector(\".kUNwHA .scrollable\").style.overflowY = 'scroll';\n\n   document.querySelector(\"body\").style.overflowY = 'auto';\n   document.querySelector(\"body\").style.height = 'auto';\n   setTimeout(() => { document.querySelector(\"body\").classList.remove('kp-modal'); },300);\n\n   document.documentElement.scrollTop = scroll.last_state;\n\n   let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n   cdialogCnt.style.display = \"none\";\n\n   document.querySelector(\".kUNwHA .cta-btn\").style.display = \"flex\";\n\n   if(typeof cart === 'undefined') return;\n   cart.refreshCheckoutButton();\n}\n","import { getCookie, setCookie, priceFormat, randomString, makeNumber, CDN, appID, toast, mt, __ } from \"../_/_helpers.js\"\nimport { cart, setBtnStep, initCart, addOrderHistory, structOrderRow, structOrderTotals } from \"../_/_feed_checkout.js\"\nimport { account } from \"../_/_feed_account.js\"\nimport { renderMenu, menuListeners, sliderListeners, refreshDialogView, closeModal, scroll } from \"../_/_feed_menu.js\"\n\nlet table = '';\n\nconst getData = function(){\n\n    // get latest menu updates\n    const limit = 1000;\n    let offset = 0;\n\n    let query = {\n        products: {\n            type:       'get-products',\n            key:        'ecommerce-product',\n            fields:     ['_id', 'img', 'status', 'price', 'priced', 'title', 'cats', 'sdesc', 'ldesc', 'stock', 'discounts', 'variations', 'updated'],\n            limit:      limit,\n            offset:     offset,\n            sortby:     {\n                            field: 'created',\n                            order: 'ASC'\n                        }\n        },\n        // settings: {\n        //     type:       'get',\n        //     key:        'qrmenu-settings',\n        //     fields:     ['mode', 'palette', 'categories'],\n        // }\n    };\n\n    // let locales = document.querySelector('#locales').value;\n    // if (locales.length == 0) locales = 'en';\n    // let localesArr = locales.split(/\\r?\\n/);\n    // for (let locale of localesArr){\n    //     query['locale_'+locale] = {\n    //         type:       'locale',\n    //         locale:     'lv',\n    //         source:      ['extension', 'data'],\n    //         key:         'ecommerce',\n    //     }\n    // }\n\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/x-www-form-urlencoded',\n            // 'Authorization': 'Bearer ' + API_KEY,\n            // 'Kenzap-Token': config.token,\n            'Kenzap-Sid': config.sid,\n        },\n        body: JSON.stringify({\n            query\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if (response.success){\n\n            products = response.products;\n                    \n            setTable();\n\n            initCart();\n        \n            getMenu();\n        \n            let cb = function(){ console.log('processed'); }\n            authUser(cb, false);\n        \n            document.addEventListener(\"scroll\", scrollEvents);\n            \n        }else{\n\n            alert( __('Oops, something went wrong. Please try again.') );\n        }\n    })\n    .catch(error => {\n        console.error('Error:', error);\n    });\n}\n\ngetData();\n\n// when HTML is loaded run all required scripts to render the menu\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n\n    // is more options button enabled\n    if(config.moreButton){\n\n        document.querySelector('.kUNwHA .cta-btn .mbtnMore').style.display = \"flex\";\n        document.querySelector(\".kUNwHA .cta-btn .mbtnMore\").addEventListener('click', function(e) { account.initModal(''); });\n    }\n});\n\n/**\n * Set default table number taken from the QR-code\n * @public\n */\nconst setTable = function(){\n\n    // set current table if provided\n    let urlParams = new URLSearchParams(window.location.search);\n    table = urlParams.get('table') ? urlParams.get('table') : \"\";\n}\n\n/**\n * Init call to action button listeners\n * @public\n */\nconst btnListeners = function(){\n\n    // continue to table selection\n    document.querySelector(\".kUNwHA .cta-btn .mbtn\").addEventListener('click', function(e) {\n\n        document.querySelector(\"body\").classList.add('kp-modal');\n        history.pushState({pageID: 'feed'}, 'Feed', window.location.pathname + window.location.search + \"#checkout\");\n\n        refreshDialogView();\n\n        // view cart\n        if(cart.state.order.step == 1){\n\n            // prevent cart opening if nothing is there\n            if(cart.state.order.total == 0){ toast(__(\"Cart is empty\")); return; }\n\n            viewCheckoutModal();\n            setBtnStep(2);\n            return;\n        }\n        \n        // pick table number view\n        if(cart.state.order.step == 2){\n            \n            // prevent cart opening if nothing is there\n            if(cart.state.order.total == 0){ toast( __(\"Cart is empty\") ); return; }\n\n            // do fast checkou\n            if(config.fast_checkout == \"2\"){\n\n                // alert(\"fast\");\n\n                let urlParams = new URLSearchParams(window.location.search);\n                cart.state.order.kid = \"0\";\n                cart.state.order.name = \"dine-in\";\n                cart.state.order.from = urlParams.get('table') ? \"table \" + urlParams.get('table') : \"dine-in\";\n                cart.state.order.status = 'new';\n\n                closeModal();\n                \n                toast(__(\"Checking out\"));\n\n                // DO CHECKOUT\n                // cb.call();\n                ajaxCheckout();\n\n                return;\n            }\n\n            // view contents\n            let html = '';\n            html = '<div class=\"ptable\">';\n            html +=\t'<label for=\"table\" style=\"'+(table.length>0?'display:none;':'')+'\">'+__('Table number')+'</label>';\n            html +=\t'<input type=\"number\" value=\"'+table+'\" name=\"table\" style=\"'+(table.length>0?'display:none;':'')+'\" autocomplete=\"off\" class=\"table\" size=\"4\" pattern=\"\" inputmode=\"\">';\n            html +=\t'<label for=\"note\">' + __('Note') + '</label>';\n            html += '<textarea class=\"note\" name=\"note\" placeholder=\"' + __('leave a note for a kitchen') + '\"></textarea>';\n            html +=\t'</div>';\n\n            document.querySelector(\".kUNwHA .cdialog-cnt .kp-body\").innerHTML = html;\n            document.querySelector(\".kUNwHA .cdialog-cnt .ptable .table\").focus();\n\n            setBtnStep(3);\n            return;\n        }\n\n        // finalize checkout\n        if(cart.state.order.step == 3){\n\n            // validate input field\n            let table = document.querySelector(\".kUNwHA .cdialog-cnt .ptable .table\").value;\n            let note = document.querySelector(\".kUNwHA .cdialog-cnt .ptable .note\").value;\n            if(table==\"\"){ alert(\"Please enter table number\"); return; }\n\n            // get note\n            cart.state.order.table = table;\n            cart.state.order.note = note;\n\n            // cache data\n            localStorage.cart = JSON.stringify(cart.state.order);\n\n            // close checkout modal\n            let mdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n            mdialogCnt.style.display = \"none\";\n\n            // hide button\n            // document.querySelector(\".kUNwHA .cta-btn\").style.display = \"none\";\n\n            // restore body scrolling params \n            closeModal();\n            \n            // send order to backend\n            // let cb = function(){ console.log('processed'); }\n            // authUser(cb, true);\n \n            // auth user to finish checkout\n            let origin = config.domain;\n            if(origin.indexOf('checkout')==-1) origin += (origin.indexOf('?')==-1 ? '?':'&')+'checkout=1';\n            // alert('https://auth.kenzap.com/?app='+appID+'&redirect='+encodeURIComponent(origin));\n            window.location.href = 'https://auth.kenzap.com/?app='+appID+'&redirect='+encodeURIComponent(origin);\n            \n            document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n            document.querySelector(\".kUNwHA .overlay .loader\").style.display = \"block\";\n\n            return;\n        }\n\n        // offer sign in\n        if(cart.state.order.step == 4){\n\n            // restore body scrolling params\n            closeModal();\n\n            // window.location.href = 'https://auth.kenzap.com/?redirect=https%3A%2F%2Faccount.kenzap.com%2F%3Flauncher%3Dmenu-orders&idd=' + localStorage.idd;\n            return;\n        }\n    });\n}\n\n/**\n * Gets menu data\n * @public\n */\nconst getMenu = function(){\n\n    localStorage.sid = config.sid;\n\n    renderMenu();\n\n    dialogListeners();\n\n    menuListeners();\n\n    sliderListeners();\n\n    btnListeners();\n    \n}\n\n/**\n * Dialog box listeners\n * @public\n */\nconst dialogListeners = function(){\n\n    let close = document.querySelector(\".kUNwHA .mdialog .close\");\n    close.addEventListener('click', function(e) {\n\n        closeModal();\n    });\n\n    let close2 = document.querySelector(\".kUNwHA .cdialog .close\");\n    close2.addEventListener('click', function(e) {\n\n        let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n        cdialogCnt.style.display = \"none\";\n\n        setBtnStep(1);\n\n        closeModal();\n    });\n\n    window.addEventListener(\"resize\", refreshDialogView);\n    window.addEventListener(\"orientationchange\", refreshDialogView);\n\n    // android back pressed\n    window.addEventListener(\"hashchange\", function(e) {\n\n        if(document.querySelector('body').classList.contains('kp-modal')){\n\n            e.preventDefault();\n            \n            // let mdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n            // mdialogCnt.style.display = \"none\";\n            closeModal();\n\n            return false;\n        }\n        // if(_this.modalCont){ e.preventDefault(); _this.modalOpen = false; _this.modalCont.hide(); return false; }\n    });\n}\n\n/**\n    * view checkout modal\n    * @public\n    */\nconst viewCheckoutModal = function(){\n\n    let cdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n\n    refreshDialogView();\n\n    cdialogCnt.style.display = \"block\";\n    document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n\n    let html = `\n        <table class=\"cart-table\">\n\n            <tr><th><div class=\"prod me-1 me-sm-3\">${ __('Product') }</div></th><th class=\"qty\"><div class=\"me-1 me-sm-3\">${ __('Qty') }</div></th><th class=\"price\"><div class=\"me-1 me-sm-3\">${ __('Total') }</div></th><th></th></tr>`;\n            for(let p in cart.state.order.items){ html += structOrderRow('cart', cart.state.order.items[p]); }\n\n            html += structOrderTotals(cart, config, cart.state.order);\n\n    html += `\n        </table>`;\n    \n\n    cdialogCnt.querySelector(\".kUNwHA .cdialog-cnt .kp-body\").innerHTML = html;\n\n    // remove item from cart\n    for(const td of cdialogCnt.querySelectorAll(\".kUNwHA .cdialog-cnt .kp-body .checkt\")){\n\n        td.addEventListener('click', function(e) {\n\n            let c = confirm(\"Remove \"+e.currentTarget.dataset.title + \"?\");\n            if(c){\n\n                document.querySelector(\".kUNwHA .kenzap-row[data-id='\"+e.currentTarget.dataset.id+\"'] .ctag\").innerHTML = \"\";\n                cart.removeFromCart(e.currentTarget.dataset.id);\n                cart.refreshCheckoutButton();\n\n                // console.log(cart.state.order.items);\n                if(Object.keys(cart.state.order.items).length == 0){\n\n                    setBtnStep(1);\n                    // console.log(\"closeModal\"); \n                    closeModal(); \n                    return; \n                }\n                viewCheckoutModal();\n                setBtnStep(2);\n            }\n        });\n    }\t\n}\n\n/**\n    * view thank you modal\n    * @public\n    * @deprecated\n    */\n// const viewThankyouModal = function(){\n\n//     let tdialogCnt = document.querySelector(\".kUNwHA .cdialog-cnt\");\n\n//     refreshDialogView();\n\n//     tdialogCnt.style.display = \"block\";\n//     document.querySelector(\".kUNwHA .overlay\").style.display = \"block\";\n\n//     // generate cart table\n//     let html = '<div>';\n//     html += '<h3>Order received!</h3>';\n//     html += '<p>Thank you for your order, you can close the window or return to the menu.</p>';\n//     html += '<lottie-player src=\"https://assets8.lottiefiles.com/packages/lf20_fefIZO.json\"  background=\"transparent\"  speed=\"1\" class=\"lplayer\" style=\"width: 300px; height: 300px;\" loop  autoplay></lottie-player>';\n    \n//     // generate order table\n//     html += '<h4>Summary</h4>';\n//     html += '<table>';\n//     let total = 0;\n//     let lastOrder = JSON.parse(localStorage.lastOrder);\n//     for(let p in lastOrder.items){\n\n//         // console.log(cart.state.order.items[p].priceF);\n//         total += parseFloat(lastOrder.items[p].priceF);\n//         html += '<tr><td data-id=\"'+lastOrder.items[p].id+'\" class=\"checkt\">'+lastOrder.items[p].qty+' x '+lastOrder.items[p].title+'</td><td></td><td class=\"price\"><strong>'+priceFormat(lastOrder.items[p].price)+'</strong></td></tr>';\n//     }\n\n//     html += '<tr><td class=\"summ\" colspan=\"3\">Total <strong>'+priceFormat(total)+'</strong></td></tr>';\n//     html += '</table>';\n\n    \n//     // html +=  \n//     html += '</div>';\n\n//     tdialogCnt.querySelector(\".kUNwHA .cdialog-cnt .kp-body\").innerHTML = html;\n// }\n\n/**\n    * send checkout data to backend\n    * @public\n    */\nconst authUser = function(cb, force){\n\n    console.log(cart.state.order);\n        \n    let urlParams = new URLSearchParams(window.location.search);\n    let ott = urlParams.get('ott') ? urlParams.get('ott') : \"\";\n    \n    let params = new URLSearchParams();\n        params.append(\"cmd\", \"get_state\");\n        params.append(\"app\", appID);\n        params.append(\"ott\", ott);\n        params.append(\"token\", getCookie('kenzap_token'));\n\n        config.token = getCookie('kenzap_token');\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/auth/', {\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/x-www-form-urlencoded',\n            // 'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n        },\n        body: params\n    })\n    .then(response => response.json())\n    .then(response => {\n \n        let checkout = urlParams.get('checkout') ? urlParams.get('checkout') : \"\";\n        if(!checkout) return;\n\n        if(response.success){\n\n            if(response.token){ config.token = response.token; setCookie('kenzap_token', response.token, 1); console.log('setting up token'); }\n\n            // let table = 5;\n            cart.state.order.kid = response.kid;\n            cart.state.order.name = response.name;\n            cart.state.order.from = table+' - '+response.name;\n            cart.state.order.status = 'new';\n\n            // DO CHECKOUT\n            // cb.call();\n            ajaxCheckout();\n        }else{\n\n            alert( __('Oops, something went wrong. Please try checking out again.') );\n \n            // DO AUTH\n            // if(force) window.location.href = 'https://auth.kenzap.com/?app='+appID+'&redirect='+encodeURI(window.location.href);\n            // window.location.href = 'https://auth.kenzap.com/?app='+appID;\n            // https://auth.kenzap.com/?app=66432108790001\n        }\n    })\n    .catch(error => {\n        console.error('Error:', error);\n    });\n}\n\n/**\n    * send checkout data to backend\n    * @public\n    */\nconst ajaxCheckout = function(){\n\n    cart.state.order.idd = localStorage.idd;\n    cart.state.order.sid = localStorage.sid;\n    cart.state.order.id = (typeof(cart.state.order.id) === 'undefined' ? randomString(8)+Math.floor(Date.now()) : cart.state.order.id);\n\n    localStorage.lastOrder = JSON.stringify(cart.state.order);\n\n    // adding date\n    let dateObj = new Date();\n    cart.state.order['created_ymd'] = dateObj.getUTCFullYear() + '' + mt(dateObj.getUTCMonth() + 1) + '' + mt(dateObj.getUTCDate());\n    cart.state.order['created_ym'] = dateObj.getUTCFullYear() + '' + mt(dateObj.getUTCMonth() + 1);\n    cart.state.order['created_y'] = dateObj.getUTCFullYear() + '';\n\n    // alert(cart.state.order.id);\n    // let kenzap_api_key = 'DoSTdhxk6BTIHiYno9XhZ4zorh0ak0MRGMH5T2iP2h1BNo3MtA69irZJp3pZuaiA';\n    // alert('token 2 '+ config.token);\n\n    // do API query\n    fetch('https://api-v1.kenzap.cloud/ecommerce/', {\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/x-www-form-urlencoded',\n            'Authorization': 'Bearer ' + API_KEY,\n            'Kenzap-Token': config.token,\n            'Kenzap-Sid': localStorage.sid,\n        },\n        body: JSON.stringify({\n            query: {\n                order: {\n                    type:       'create-order',\n                    key:        'ecommerce-order',        \n                    sid:        localStorage.sid,\n                    data:       cart.state.order\n                }\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(response => {\n\n        if(response.success){\n\n            // add order ids to the past orders stack\n            addOrderHistory(response.order.id);\n\n            // thank you modal\n            // viewThankyouModal();\n            account.initModal('new');\n\n            // reset cart\n            cart.clearCart();\n\n            // next step\n            setBtnStep(4);\n        }else{\n\n            // alert(\"Error occured. Please try again!\");\n            alert('Error: '+JSON.stringify(response));\n\n        }\n    })\n    .catch(error => {\n        console.error('Error:', error);\n    });\n}\n\n/**\n    * Scroll listener. Add/Remove scrolled class to body\n    * @public\n    */\nconst scrollEvents = function() {\n\n    // console.log(document.documentElement.scrollTop);\n    let h_list = document.querySelectorAll(\".kUNwHA .kenzap-row h2\");\n    let s_id = \"\";\n    let diff_prev = 0;\n    let diff = 0;\n    scroll.state = document.documentElement.scrollTop;\n\n    for (const h of h_list){\n\n        diff = (h.offsetTop - document.documentElement.scrollTop);\n        \n        // scrolling up\n        // if(scroll.state<scroll.state_prev){\n\n        // \tscroll.direction = \"up\";\n        // \tif(diff>0){\n                \n        // \t\tif(scroll.el_id == \"\") scroll.el_id = h.id;\n        // \t\tif(diff_prev > diff){ console.log(diff + \" \" +h.id); diff = diff_prev; scroll.el_id = h.id; }\n        // \t}\n        // }\n\n        // scrolling down\n        // if(scroll.state>scroll.state_prev){\n\n            scroll.direction = \"down\";\n            if(diff<0){\n\n                if(diff_prev > diff){ diff = diff_prev; scroll.el_id = h.id; }\n            }\n    \n            // if(diff>0){\n\n            // }\n        // }\n\n        diff_prev = diff;\n    }\n\n    // save previous scroll state\n    if(scroll.state_prev!=scroll.state) scroll.state_prev = scroll.state;\n\n    if(scroll.el_id!=\"\"){\n\n        let sc = document.querySelector(\".kUNwHA .cata-sub-nav\");\n        if(scroll.timer) clearTimeout(scroll.timer);\n        scroll.timer = setTimeout((el_id) => {\n\n            sc.scrollTo({ left: scroll.offsets[el_id], behavior: 'smooth'});\n\n            for (const l of document.querySelectorAll(\".kUNwHA .slide\")){ l.classList.remove(\"active\"); }\n            document.querySelector(\".kUNwHA [data-href='\"+el_id+\"']\").classList.add(\"active\");\n\n        }, 200, scroll.el_id);\n    }\n\n    scroll.el_id = \"\";\n}\n\n"],"names":["CDN","appID","mt","val","length","getPrice","product","price","html","priced","priceFormat","discounted","d","Date","month","getMonth","day","getDate","year","getFullYear","forEach","el","availability","dow","getDay","from","hours","getTime","to","now","type","makeNumber","percent","value","note","setCookie","name","days","expires","date","setTime","toUTCString","document","cookie","escape","getCookie","cname","decodedCookie","decodeURIComponent","ca","split","i","c","charAt","substring","indexOf","priceNorm","priceF","Math","round","parseFloat","toFixed","config","style","symbol","randomString","length_","chars","floor","random","str","convertToSlug","toLowerCase","replace","vibrate","window","navigator","toast","msg","t","querySelector","innerHTML","classList","add","setTimeout","className","__","text","match","input","pa","p","i18n","state","locale","values","undefined","renderStatus","status","timeConverterAgo","time","parseInt","past","a","months","getHours","getMinutes","getSeconds","cart","total","count","index","variations","order","resetButton","refreshButton","products","qty","cb_count","checkbox_list","querySelectorAll","cb","checked","dataset","ra_count","radio_list","ra","dis","v","allow","background","remove","refreshCheckoutButton","items","setBtnStep","addToCart","filter","id","push","removeFromCart","localStorage","JSON","stringify","clearCart","created","history","replaceState","title","domain","addOrderHistory","pastOrders","parse","orderIDs","e","timestamp","obj","initCart","idd","structOrderRow","row","vars","list","l","structOrderTotals","settings","grand_total_temp","grand_total","discount_percent","discount_total","fee_total","tax_total","tax_percent","fee_calc","fee_percent","fee_display","tax_calc","tax_display","step","display","scroll","last_state","state_prev","fp","el_id","direction","offsets","timer","renderMenu","rows","categories","html_slider","html_menu","cat","trim","x","_id","includes","img","imgl","Image","updated","onload","setAttribute","src","sid","info","item_cart","find","ctag","show_heading","slider_container","menu_container","menuListeners","row_list","addEventListener","currentTarget","nostock","alert","product_id","mdialogCnt","sdesc","pushState","pageID","location","pathname","search","refreshDialogView","html_vars","required","data","indexv","cbg","rag","plus","max_addition","minus","parentNode","contains","closeModal","sliderListeners","slide_list","slide","scrollDiv","offsetLeft","href","sto","documentElement","scrollTop","height","overflowY","screen","availHeight","cdialogCnt","account","initModal","loadOrders","onClick","confirm","urlParams","URLSearchParams","table","get","fetch","method","headers","API_KEY","token","body","query","notify","key","channel","color","then","response","json","success","error","parseApiError","term","user","fields","orders","limit","sortby","field","hideLoader","first","lottie","ohtml","structOrders","preventDefault","parentElement","item","getData","offset","setTable","getMenu","authUser","scrollEvents","console","moreButton","btnListeners","viewCheckoutModal","fast_checkout","kid","ajaxCheckout","focus","origin","encodeURIComponent","dialogListeners","close","close2","td","Object","keys","force","log","ott","params","append","checkout","lastOrder","dateObj","getUTCFullYear","getUTCMonth","getUTCDate","h_list","diff_prev","diff","h","offsetTop","sc","clearTimeout","scrollTo","left","behavior"],"mappings":"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"}